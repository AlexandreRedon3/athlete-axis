"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/uploadthing";
exports.ids = ["vendor-chunks/uploadthing"];
exports.modules = {

/***/ "(rsc)/./node_modules/uploadthing/dist/_internal/config.js":
/*!***********************************************************!*\
  !*** ./node_modules/uploadthing/dist/_internal/config.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ApiUrl: () => (/* binding */ ApiUrl),\n/* harmony export */   IngestUrl: () => (/* binding */ IngestUrl),\n/* harmony export */   IsDevelopment: () => (/* binding */ IsDevelopment),\n/* harmony export */   UPLOADTHING_VERSION: () => (/* binding */ version),\n/* harmony export */   UTToken: () => (/* binding */ UTToken),\n/* harmony export */   UfsHost: () => (/* binding */ UfsHost),\n/* harmony export */   UtfsHost: () => (/* binding */ UtfsHost),\n/* harmony export */   configProvider: () => (/* binding */ configProvider)\n/* harmony export */ });\n/* harmony import */ var effect_Config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! effect/Config */ \"(rsc)/./node_modules/effect/dist/esm/Config.js\");\n/* harmony import */ var effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! effect/ConfigProvider */ \"(rsc)/./node_modules/effect/dist/esm/ConfigProvider.js\");\n/* harmony import */ var effect_Effect__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! effect/Effect */ \"(rsc)/./node_modules/effect/dist/esm/Effect.js\");\n/* harmony import */ var effect_Schema__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! effect/Schema */ \"(rsc)/./node_modules/effect/dist/esm/Schema.js\");\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @uploadthing/shared */ \"(rsc)/./node_modules/@uploadthing/shared/dist/index.js\");\n/* harmony import */ var _shared_schemas_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./shared-schemas.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/shared-schemas.js\");\n\n\n\n\n\n\n\nvar version = \"7.6.0\";\n\n/**\n * Merge in `import.meta.env` to the built-in `process.env` provider\n * Prefix keys with `UPLOADTHING_` so we can reference just the name.\n * @example\n * process.env.UPLOADTHING_TOKEN = \"foo\"\n * Config.string(\"token\"); // Config<\"foo\">\n */ const envProvider = effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__.fromEnv().pipe(effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__.orElse(()=>effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__.fromMap(new Map(Object.entries((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.filterDefinedObjectValues)(// fuck this I give up. import.meta is a mistake, someone else can fix it\n     null ?? {}))), {\n        pathDelim: \"_\"\n    })), effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__.nested(\"uploadthing\"), effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__.constantCase);\n/**\n * Config provider that merges the options from the object\n * and environment variables prefixed with `UPLOADTHING_`.\n * @remarks Options take precedence over environment variables.\n */ const configProvider = (options)=>effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__.fromJson(options ?? {}).pipe(effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__.orElse(()=>envProvider));\nconst IsDevelopment = effect_Config__WEBPACK_IMPORTED_MODULE_2__.boolean(\"isDev\").pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.orElse(()=>effect_Config__WEBPACK_IMPORTED_MODULE_2__.succeed(typeof process !== \"undefined\" ? \"development\" : undefined).pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.map((_)=>_ === \"development\"))), effect_Config__WEBPACK_IMPORTED_MODULE_2__.withDefault(false));\nconst UTToken = effect_Schema__WEBPACK_IMPORTED_MODULE_3__.Config(\"token\", _shared_schemas_js__WEBPACK_IMPORTED_MODULE_4__.UploadThingToken).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.catchTags({\n    ConfigError: (e)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n            code: e._op === \"InvalidData\" ? \"INVALID_SERVER_CONFIG\" : \"MISSING_ENV\",\n            message: e._op === \"InvalidData\" ? \"Invalid token. A token is a base64 encoded JSON object matching { apiKey: string, appId: string, regions: string[] }.\" : \"Missing token. Please set the `UPLOADTHING_TOKEN` environment variable or provide a token manually through config.\",\n            cause: e\n        })\n}));\nconst ApiUrl = effect_Config__WEBPACK_IMPORTED_MODULE_2__.string(\"apiUrl\").pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.withDefault(\"https://api.uploadthing.com\"), effect_Config__WEBPACK_IMPORTED_MODULE_2__.mapAttempt((_)=>new URL(_)), effect_Config__WEBPACK_IMPORTED_MODULE_2__.map((url)=>url.href.replace(/\\/$/, \"\")));\nconst IngestUrl = effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function*() {\n    const { regions, ingestHost } = yield* UTToken;\n    const region = regions[0]; // Currently only support 1 region per app\n    return yield* effect_Config__WEBPACK_IMPORTED_MODULE_2__.string(\"ingestUrl\").pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.withDefault(`https://${region}.${ingestHost}`), effect_Config__WEBPACK_IMPORTED_MODULE_2__.mapAttempt((_)=>new URL(_)), effect_Config__WEBPACK_IMPORTED_MODULE_2__.map((url)=>url.href.replace(/\\/$/, \"\")));\n});\nconst UtfsHost = effect_Config__WEBPACK_IMPORTED_MODULE_2__.string(\"utfsHost\").pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.withDefault(\"utfs.io\"));\nconst UfsHost = effect_Config__WEBPACK_IMPORTED_MODULE_2__.string(\"ufsHost\").pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.withDefault(\"ufs.sh\"));\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvY29uZmlnLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXdDO0FBQ2dCO0FBQ2hCO0FBQ0w7QUFDK0M7QUFDM0I7O0FBRXZEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0Isd0JBQXdCLDBEQUFzQixRQUFRLHlEQUFxQixLQUFLLDBEQUFzQix3QkFBd0IsOEVBQXlCO0FBQ3ZKLElBQUksS0FBZ0IsTUFBTTtBQUMxQjtBQUNBLEtBQUssSUFBSSx5REFBcUIsaUJBQWlCLCtEQUEyQjtBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQywyREFBdUIsY0FBYyxPQUFPLHlEQUFxQjtBQUN2RyxzQkFBc0Isa0RBQWMsZUFBZSxpREFBYSxLQUFLLGtEQUFjLGtDQUFrQyxhQUFvQixtQkFBbUIsOENBQVUsOEJBQThCLHNEQUFrQjtBQUN0TixnQkFBZ0IsaURBQVEsVUFBVSxnRUFBZ0IsT0FBTyxvREFBZ0I7QUFDekUsMEJBQTBCLGlFQUFnQjtBQUMxQztBQUNBLGtIQUFrSCxrREFBa0Q7QUFDcEs7QUFDQSxTQUFTO0FBQ1QsQ0FBQztBQUNELGVBQWUsaURBQWEsZ0JBQWdCLHNEQUFrQixpQ0FBaUMscURBQWlCLG1CQUFtQiw4Q0FBVTtBQUM3SSxrQkFBa0IsOENBQVU7QUFDNUIsWUFBWSxzQkFBc0I7QUFDbEMsK0JBQStCO0FBQy9CLGtCQUFrQixpREFBYSxtQkFBbUIsc0RBQWtCLFlBQVksT0FBTyxHQUFHLFdBQVcsSUFBSSxxREFBaUIsbUJBQW1CLDhDQUFVO0FBQ3ZKLENBQUM7QUFDRCxpQkFBaUIsaURBQWEsa0JBQWtCLHNEQUFrQjtBQUNsRSxnQkFBZ0IsaURBQWEsaUJBQWlCLHNEQUFrQjs7QUFFd0QiLCJzb3VyY2VzIjpbIi9ob21lL2FsZXhhbmRyZS9Eb2N1bWVudHMvbWFzdGVyXzIvUk5DUC9hdGhsZXRlLWF4aXMvbm9kZV9tb2R1bGVzL3VwbG9hZHRoaW5nL2Rpc3QvX2ludGVybmFsL2NvbmZpZy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBDb25maWcgZnJvbSAnZWZmZWN0L0NvbmZpZyc7XG5pbXBvcnQgKiBhcyBDb25maWdQcm92aWRlciBmcm9tICdlZmZlY3QvQ29uZmlnUHJvdmlkZXInO1xuaW1wb3J0ICogYXMgRWZmZWN0IGZyb20gJ2VmZmVjdC9FZmZlY3QnO1xuaW1wb3J0ICogYXMgUyBmcm9tICdlZmZlY3QvU2NoZW1hJztcbmltcG9ydCB7IGZpbHRlckRlZmluZWRPYmplY3RWYWx1ZXMsIFVwbG9hZFRoaW5nRXJyb3IgfSBmcm9tICdAdXBsb2FkdGhpbmcvc2hhcmVkJztcbmltcG9ydCB7IFVwbG9hZFRoaW5nVG9rZW4gfSBmcm9tICcuL3NoYXJlZC1zY2hlbWFzLmpzJztcblxudmFyIHZlcnNpb24gPSBcIjcuNi4wXCI7XG5cbi8qKlxuICogTWVyZ2UgaW4gYGltcG9ydC5tZXRhLmVudmAgdG8gdGhlIGJ1aWx0LWluIGBwcm9jZXNzLmVudmAgcHJvdmlkZXJcbiAqIFByZWZpeCBrZXlzIHdpdGggYFVQTE9BRFRISU5HX2Agc28gd2UgY2FuIHJlZmVyZW5jZSBqdXN0IHRoZSBuYW1lLlxuICogQGV4YW1wbGVcbiAqIHByb2Nlc3MuZW52LlVQTE9BRFRISU5HX1RPS0VOID0gXCJmb29cIlxuICogQ29uZmlnLnN0cmluZyhcInRva2VuXCIpOyAvLyBDb25maWc8XCJmb29cIj5cbiAqLyBjb25zdCBlbnZQcm92aWRlciA9IENvbmZpZ1Byb3ZpZGVyLmZyb21FbnYoKS5waXBlKENvbmZpZ1Byb3ZpZGVyLm9yRWxzZSgoKT0+Q29uZmlnUHJvdmlkZXIuZnJvbU1hcChuZXcgTWFwKE9iamVjdC5lbnRyaWVzKGZpbHRlckRlZmluZWRPYmplY3RWYWx1ZXMoLy8gZnVjayB0aGlzIEkgZ2l2ZSB1cC4gaW1wb3J0Lm1ldGEgaXMgYSBtaXN0YWtlLCBzb21lb25lIGVsc2UgY2FuIGZpeCBpdFxuICAgIGltcG9ydC5tZXRhPy5lbnYgPz8ge30pKSksIHtcbiAgICAgICAgcGF0aERlbGltOiBcIl9cIlxuICAgIH0pKSwgQ29uZmlnUHJvdmlkZXIubmVzdGVkKFwidXBsb2FkdGhpbmdcIiksIENvbmZpZ1Byb3ZpZGVyLmNvbnN0YW50Q2FzZSk7XG4vKipcbiAqIENvbmZpZyBwcm92aWRlciB0aGF0IG1lcmdlcyB0aGUgb3B0aW9ucyBmcm9tIHRoZSBvYmplY3RcbiAqIGFuZCBlbnZpcm9ubWVudCB2YXJpYWJsZXMgcHJlZml4ZWQgd2l0aCBgVVBMT0FEVEhJTkdfYC5cbiAqIEByZW1hcmtzIE9wdGlvbnMgdGFrZSBwcmVjZWRlbmNlIG92ZXIgZW52aXJvbm1lbnQgdmFyaWFibGVzLlxuICovIGNvbnN0IGNvbmZpZ1Byb3ZpZGVyID0gKG9wdGlvbnMpPT5Db25maWdQcm92aWRlci5mcm9tSnNvbihvcHRpb25zID8/IHt9KS5waXBlKENvbmZpZ1Byb3ZpZGVyLm9yRWxzZSgoKT0+ZW52UHJvdmlkZXIpKTtcbmNvbnN0IElzRGV2ZWxvcG1lbnQgPSBDb25maWcuYm9vbGVhbihcImlzRGV2XCIpLnBpcGUoQ29uZmlnLm9yRWxzZSgoKT0+Q29uZmlnLnN1Y2NlZWQodHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCIgPyBwcm9jZXNzLmVudi5OT0RFX0VOViA6IHVuZGVmaW5lZCkucGlwZShDb25maWcubWFwKChfKT0+XyA9PT0gXCJkZXZlbG9wbWVudFwiKSkpLCBDb25maWcud2l0aERlZmF1bHQoZmFsc2UpKTtcbmNvbnN0IFVUVG9rZW4gPSBTLkNvbmZpZyhcInRva2VuXCIsIFVwbG9hZFRoaW5nVG9rZW4pLnBpcGUoRWZmZWN0LmNhdGNoVGFncyh7XG4gICAgQ29uZmlnRXJyb3I6IChlKT0+bmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICAgICAgY29kZTogZS5fb3AgPT09IFwiSW52YWxpZERhdGFcIiA/IFwiSU5WQUxJRF9TRVJWRVJfQ09ORklHXCIgOiBcIk1JU1NJTkdfRU5WXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBlLl9vcCA9PT0gXCJJbnZhbGlkRGF0YVwiID8gXCJJbnZhbGlkIHRva2VuLiBBIHRva2VuIGlzIGEgYmFzZTY0IGVuY29kZWQgSlNPTiBvYmplY3QgbWF0Y2hpbmcgeyBhcGlLZXk6IHN0cmluZywgYXBwSWQ6IHN0cmluZywgcmVnaW9uczogc3RyaW5nW10gfS5cIiA6IFwiTWlzc2luZyB0b2tlbi4gUGxlYXNlIHNldCB0aGUgYFVQTE9BRFRISU5HX1RPS0VOYCBlbnZpcm9ubWVudCB2YXJpYWJsZSBvciBwcm92aWRlIGEgdG9rZW4gbWFudWFsbHkgdGhyb3VnaCBjb25maWcuXCIsXG4gICAgICAgICAgICBjYXVzZTogZVxuICAgICAgICB9KVxufSkpO1xuY29uc3QgQXBpVXJsID0gQ29uZmlnLnN0cmluZyhcImFwaVVybFwiKS5waXBlKENvbmZpZy53aXRoRGVmYXVsdChcImh0dHBzOi8vYXBpLnVwbG9hZHRoaW5nLmNvbVwiKSwgQ29uZmlnLm1hcEF0dGVtcHQoKF8pPT5uZXcgVVJMKF8pKSwgQ29uZmlnLm1hcCgodXJsKT0+dXJsLmhyZWYucmVwbGFjZSgvXFwvJC8sIFwiXCIpKSk7XG5jb25zdCBJbmdlc3RVcmwgPSBFZmZlY3QuZ2VuKGZ1bmN0aW9uKigpIHtcbiAgICBjb25zdCB7IHJlZ2lvbnMsIGluZ2VzdEhvc3QgfSA9IHlpZWxkKiBVVFRva2VuO1xuICAgIGNvbnN0IHJlZ2lvbiA9IHJlZ2lvbnNbMF07IC8vIEN1cnJlbnRseSBvbmx5IHN1cHBvcnQgMSByZWdpb24gcGVyIGFwcFxuICAgIHJldHVybiB5aWVsZCogQ29uZmlnLnN0cmluZyhcImluZ2VzdFVybFwiKS5waXBlKENvbmZpZy53aXRoRGVmYXVsdChgaHR0cHM6Ly8ke3JlZ2lvbn0uJHtpbmdlc3RIb3N0fWApLCBDb25maWcubWFwQXR0ZW1wdCgoXyk9Pm5ldyBVUkwoXykpLCBDb25maWcubWFwKCh1cmwpPT51cmwuaHJlZi5yZXBsYWNlKC9cXC8kLywgXCJcIikpKTtcbn0pO1xuY29uc3QgVXRmc0hvc3QgPSBDb25maWcuc3RyaW5nKFwidXRmc0hvc3RcIikucGlwZShDb25maWcud2l0aERlZmF1bHQoXCJ1dGZzLmlvXCIpKTtcbmNvbnN0IFVmc0hvc3QgPSBDb25maWcuc3RyaW5nKFwidWZzSG9zdFwiKS5waXBlKENvbmZpZy53aXRoRGVmYXVsdChcInVmcy5zaFwiKSk7XG5cbmV4cG9ydCB7IEFwaVVybCwgSW5nZXN0VXJsLCBJc0RldmVsb3BtZW50LCB2ZXJzaW9uIGFzIFVQTE9BRFRISU5HX1ZFUlNJT04sIFVUVG9rZW4sIFVmc0hvc3QsIFV0ZnNIb3N0LCBjb25maWdQcm92aWRlciB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/_internal/config.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/_internal/deprecations.js":
/*!*****************************************************************!*\
  !*** ./node_modules/uploadthing/dist/_internal/deprecations.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   logDeprecationWarning: () => (/* binding */ logDeprecationWarning)\n/* harmony export */ });\nconst logDeprecationWarning = (message)=>{\n    // eslint-disable-next-line no-console\n    console.warn(`⚠️ [uploadthing][deprecated] ${message}`);\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvZGVwcmVjYXRpb25zLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0EsaURBQWlELFFBQVE7QUFDekQ7O0FBRWlDIiwic291cmNlcyI6WyIvaG9tZS9hbGV4YW5kcmUvRG9jdW1lbnRzL21hc3Rlcl8yL1JOQ1AvYXRobGV0ZS1heGlzL25vZGVfbW9kdWxlcy91cGxvYWR0aGluZy9kaXN0L19pbnRlcm5hbC9kZXByZWNhdGlvbnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbG9nRGVwcmVjYXRpb25XYXJuaW5nID0gKG1lc3NhZ2UpPT57XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICBjb25zb2xlLndhcm4oYOKaoO+4jyBbdXBsb2FkdGhpbmddW2RlcHJlY2F0ZWRdICR7bWVzc2FnZX1gKTtcbn07XG5cbmV4cG9ydCB7IGxvZ0RlcHJlY2F0aW9uV2FybmluZyB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/_internal/deprecations.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/_internal/error-formatter.js":
/*!********************************************************************!*\
  !*** ./node_modules/uploadthing/dist/_internal/error-formatter.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   defaultErrorFormatter: () => (/* binding */ defaultErrorFormatter),\n/* harmony export */   formatError: () => (/* binding */ formatError)\n/* harmony export */ });\nfunction defaultErrorFormatter(error) {\n    return {\n        message: error.message\n    };\n}\nfunction formatError(error, router) {\n    const firstSlug = Object.keys(router)[0];\n    const errorFormatter = firstSlug ? router[firstSlug]?.errorFormatter ?? defaultErrorFormatter : defaultErrorFormatter;\n    return errorFormatter(error);\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvZXJyb3ItZm9ybWF0dGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRThDIiwic291cmNlcyI6WyIvaG9tZS9hbGV4YW5kcmUvRG9jdW1lbnRzL21hc3Rlcl8yL1JOQ1AvYXRobGV0ZS1heGlzL25vZGVfbW9kdWxlcy91cGxvYWR0aGluZy9kaXN0L19pbnRlcm5hbC9lcnJvci1mb3JtYXR0ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gZGVmYXVsdEVycm9yRm9ybWF0dGVyKGVycm9yKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZVxuICAgIH07XG59XG5mdW5jdGlvbiBmb3JtYXRFcnJvcihlcnJvciwgcm91dGVyKSB7XG4gICAgY29uc3QgZmlyc3RTbHVnID0gT2JqZWN0LmtleXMocm91dGVyKVswXTtcbiAgICBjb25zdCBlcnJvckZvcm1hdHRlciA9IGZpcnN0U2x1ZyA/IHJvdXRlcltmaXJzdFNsdWddPy5lcnJvckZvcm1hdHRlciA/PyBkZWZhdWx0RXJyb3JGb3JtYXR0ZXIgOiBkZWZhdWx0RXJyb3JGb3JtYXR0ZXI7XG4gICAgcmV0dXJuIGVycm9yRm9ybWF0dGVyKGVycm9yKTtcbn1cblxuZXhwb3J0IHsgZGVmYXVsdEVycm9yRm9ybWF0dGVyLCBmb3JtYXRFcnJvciB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/_internal/error-formatter.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/_internal/handler.js":
/*!************************************************************!*\
  !*** ./node_modules/uploadthing/dist/_internal/handler.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AdapterArguments: () => (/* binding */ AdapterArguments),\n/* harmony export */   createRequestHandler: () => (/* binding */ createRequestHandler),\n/* harmony export */   makeAdapterHandler: () => (/* binding */ makeAdapterHandler)\n/* harmony export */ });\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpApp.js\");\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpServerResponse.js\");\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpServerRequest.js\");\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpRouter.js\");\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpClient.js\");\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpClientRequest.js\");\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpIncomingMessage.js\");\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpClientResponse.js\");\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpBody.js\");\n/* harmony import */ var effect_Config__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! effect/Config */ \"(rsc)/./node_modules/effect/dist/esm/Config.js\");\n/* harmony import */ var effect_Context__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! effect/Context */ \"(rsc)/./node_modules/effect/dist/esm/Context.js\");\n/* harmony import */ var effect_Effect__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! effect/Effect */ \"(rsc)/./node_modules/effect/dist/esm/Effect.js\");\n/* harmony import */ var effect_Match__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! effect/Match */ \"(rsc)/./node_modules/effect/dist/esm/Match.js\");\n/* harmony import */ var effect_Redacted__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! effect/Redacted */ \"(rsc)/./node_modules/effect/dist/esm/Redacted.js\");\n/* harmony import */ var effect_Schema__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! effect/Schema */ \"(rsc)/./node_modules/effect/dist/esm/Schema.js\");\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @uploadthing/shared */ \"(rsc)/./node_modules/@uploadthing/shared/dist/index.js\");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./config.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/config.js\");\n/* harmony import */ var _deprecations_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./deprecations.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/deprecations.js\");\n/* harmony import */ var _error_formatter_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./error-formatter.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/error-formatter.js\");\n/* harmony import */ var _jsonl_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./jsonl.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/jsonl.js\");\n/* harmony import */ var _logger_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./logger.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/logger.js\");\n/* harmony import */ var _parser_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./parser.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/parser.js\");\n/* harmony import */ var _route_config_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./route-config.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/route-config.js\");\n/* harmony import */ var _runtime_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./runtime.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/runtime.js\");\n/* harmony import */ var _shared_schemas_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./shared-schemas.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/shared-schemas.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./types.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/types.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar version = \"7.6.0\";\n\nclass AdapterArguments extends effect_Context__WEBPACK_IMPORTED_MODULE_0__.Tag(\"uploadthing/AdapterArguments\")() {\n}\n/**\n * Create a request handler adapter for any framework or server library.\n * Refer to the existing adapters for examples on how to use this function.\n * @public\n *\n * @param makeAdapterArgs - Function that takes the args from your framework and returns an Effect that resolves to the adapter args.\n * These args are passed to the `.middleware`, `.onUploadComplete`, and `.onUploadError` hooks.\n * @param toRequest - Function that takes the args from your framework and returns an Effect that resolves to a web Request object.\n * @param opts - The router config and other options that are normally passed to `createRequestHandler` of official adapters\n * @param beAdapter - [Optional] The adapter name of the adapter, used for telemetry purposes\n * @returns A function that takes the args from your framework and returns a promise that resolves to a Response object.\n */ const makeAdapterHandler = (makeAdapterArgs, toRequest, opts, beAdapter)=>{\n    const managed = (0,_runtime_js__WEBPACK_IMPORTED_MODULE_1__.makeRuntime)(opts.config?.fetch, opts.config);\n    const handle = effect_Effect__WEBPACK_IMPORTED_MODULE_2__.promise(()=>managed.runtime().then(_effect_platform__WEBPACK_IMPORTED_MODULE_3__.toWebHandlerRuntime));\n    const app = (...args)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.map(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.promise(()=>managed.runPromise(createRequestHandler(opts, beAdapter ?? \"custom\"))), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.provideServiceEffect(AdapterArguments, makeAdapterArgs(...args)));\n    return async (...args)=>{\n        const result = await handle.pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.ap(app(...args)), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.ap(toRequest(...args)), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.withLogSpan(\"requestHandler\"), managed.runPromise);\n        return result;\n    };\n};\nconst createRequestHandler = (opts, beAdapter)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.gen(function*() {\n        const isDevelopment = yield* _config_js__WEBPACK_IMPORTED_MODULE_4__.IsDevelopment;\n        const routerConfig = yield* (0,_route_config_js__WEBPACK_IMPORTED_MODULE_5__.extractRouterConfig)(opts.router);\n        const handleDaemon = (()=>{\n            if (opts.config?.handleDaemonPromise) {\n                return opts.config.handleDaemonPromise;\n            }\n            return isDevelopment ? \"void\" : \"await\";\n        })();\n        if (isDevelopment && handleDaemon === \"await\") {\n            return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n                code: \"INVALID_SERVER_CONFIG\",\n                message: 'handleDaemonPromise: \"await\" is forbidden in development.'\n            });\n        }\n        const GET = effect_Effect__WEBPACK_IMPORTED_MODULE_2__.gen(function*() {\n            return yield* _effect_platform__WEBPACK_IMPORTED_MODULE_7__.json(routerConfig);\n        });\n        const POST = effect_Effect__WEBPACK_IMPORTED_MODULE_2__.gen(function*() {\n            const { \"uploadthing-hook\": uploadthingHook, \"x-uploadthing-package\": fePackage, \"x-uploadthing-version\": clientVersion } = yield* _effect_platform__WEBPACK_IMPORTED_MODULE_8__.schemaHeaders(effect_Schema__WEBPACK_IMPORTED_MODULE_9__.Struct({\n                \"uploadthing-hook\": _shared_schemas_js__WEBPACK_IMPORTED_MODULE_10__.UploadThingHook.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_9__.optional),\n                \"x-uploadthing-package\": effect_Schema__WEBPACK_IMPORTED_MODULE_9__.String.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_9__.optionalWith({\n                    default: ()=>\"unknown\"\n                })),\n                \"x-uploadthing-version\": effect_Schema__WEBPACK_IMPORTED_MODULE_9__.String.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_9__.optionalWith({\n                    default: ()=>version\n                }))\n            }));\n            if (clientVersion !== version) {\n                const serverVersion = version;\n                yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logWarning(\"Client version mismatch. Things may not work as expected, please sync your versions to ensure compatibility.\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs({\n                    clientVersion,\n                    serverVersion\n                }));\n            }\n            const { slug, actionType } = yield* _effect_platform__WEBPACK_IMPORTED_MODULE_11__.schemaParams(effect_Schema__WEBPACK_IMPORTED_MODULE_9__.Struct({\n                actionType: _shared_schemas_js__WEBPACK_IMPORTED_MODULE_10__.ActionType.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_9__.optional),\n                slug: effect_Schema__WEBPACK_IMPORTED_MODULE_9__.String\n            }));\n            const uploadable = opts.router[slug];\n            if (!uploadable) {\n                const msg = `No file route found for slug ${slug}`;\n                yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logError(msg);\n                return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n                    code: \"NOT_FOUND\",\n                    message: msg\n                });\n            }\n            const { body, fiber } = yield* effect_Match__WEBPACK_IMPORTED_MODULE_12__.value({\n                actionType,\n                uploadthingHook\n            }).pipe(effect_Match__WEBPACK_IMPORTED_MODULE_12__.when({\n                actionType: \"upload\",\n                uploadthingHook: undefined\n            }, ()=>handleUploadAction({\n                    uploadable,\n                    fePackage,\n                    beAdapter,\n                    slug\n                })), effect_Match__WEBPACK_IMPORTED_MODULE_12__.when({\n                actionType: undefined,\n                uploadthingHook: \"callback\"\n            }, ()=>handleCallbackRequest({\n                    uploadable,\n                    fePackage,\n                    beAdapter\n                })), effect_Match__WEBPACK_IMPORTED_MODULE_12__.when({\n                actionType: undefined,\n                uploadthingHook: \"error\"\n            }, ()=>handleErrorRequest({\n                    uploadable\n                })), effect_Match__WEBPACK_IMPORTED_MODULE_12__.orElse(()=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.succeed({\n                    body: null,\n                    fiber: null\n                })));\n            if (fiber) {\n                yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(\"Running fiber as daemon\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(\"handleDaemon\", handleDaemon));\n                if (handleDaemon === \"void\") ; else if (handleDaemon === \"await\") {\n                    yield* fiber.await;\n                } else if (typeof handleDaemon === \"function\") {\n                    handleDaemon(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.runPromise(fiber.await));\n                }\n            }\n            yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(\"Sending response\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(\"body\", body));\n            return yield* _effect_platform__WEBPACK_IMPORTED_MODULE_7__.json(body);\n        }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.catchTags({\n            ParseError: (e)=>_effect_platform__WEBPACK_IMPORTED_MODULE_7__.json((0,_error_formatter_js__WEBPACK_IMPORTED_MODULE_13__.formatError)(new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n                    code: \"BAD_REQUEST\",\n                    message: \"Invalid input\",\n                    cause: e.message\n                }), opts.router), {\n                    status: 400\n                }),\n            UploadThingError: (e)=>// eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n                _effect_platform__WEBPACK_IMPORTED_MODULE_7__.json((0,_error_formatter_js__WEBPACK_IMPORTED_MODULE_13__.formatError)(e, opts.router), {\n                    status: (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.getStatusCodeFromError)(e)\n                })\n        }));\n        const appendResponseHeaders = effect_Effect__WEBPACK_IMPORTED_MODULE_2__.map(_effect_platform__WEBPACK_IMPORTED_MODULE_7__.setHeader(\"x-uploadthing-version\", version));\n        return _effect_platform__WEBPACK_IMPORTED_MODULE_11__.empty.pipe(_effect_platform__WEBPACK_IMPORTED_MODULE_11__.get(\"*\", GET), _effect_platform__WEBPACK_IMPORTED_MODULE_11__.post(\"*\", POST), _effect_platform__WEBPACK_IMPORTED_MODULE_11__.use(appendResponseHeaders));\n    }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.withLogSpan(\"createRequestHandler\"));\nconst handleErrorRequest = (opts)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.gen(function*() {\n        const { uploadable } = opts;\n        const request = yield* _effect_platform__WEBPACK_IMPORTED_MODULE_8__.HttpServerRequest;\n        const { apiKey } = yield* _config_js__WEBPACK_IMPORTED_MODULE_4__.UTToken;\n        const verified = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.verifySignature)((yield* request.text), request.headers[\"x-uploadthing-signature\"] ?? null, apiKey);\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(`Signature verified: ${verified}`);\n        if (!verified) {\n            yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logError(\"Invalid signature\");\n            return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: \"Invalid signature\"\n            });\n        }\n        const requestInput = yield* _effect_platform__WEBPACK_IMPORTED_MODULE_8__.schemaBodyJson(effect_Schema__WEBPACK_IMPORTED_MODULE_9__.Struct({\n            fileKey: effect_Schema__WEBPACK_IMPORTED_MODULE_9__.String,\n            error: effect_Schema__WEBPACK_IMPORTED_MODULE_9__.String\n        }));\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(\"Handling error callback request with input:\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(\"json\", requestInput));\n        const adapterArgs = yield* AdapterArguments;\n        const fiber = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.tryPromise({\n            try: async ()=>uploadable.onUploadError({\n                    ...adapterArgs,\n                    error: new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n                        code: \"UPLOAD_FAILED\",\n                        message: `Upload failed for ${requestInput.fileKey}: ${requestInput.error}`\n                    }),\n                    fileKey: requestInput.fileKey\n                }),\n            catch: (error)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n                    code: \"INTERNAL_SERVER_ERROR\",\n                    message: \"Failed to run onUploadError\",\n                    cause: error\n                })\n        }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.tapError((error)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logError(\"Failed to run onUploadError. You probably shouldn't be throwing errors here.\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(\"error\", error)))).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.ignoreLogged, effect_Effect__WEBPACK_IMPORTED_MODULE_2__.forkDaemon);\n        return {\n            body: null,\n            fiber\n        };\n    }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.withLogSpan(\"handleErrorRequest\"));\nconst handleCallbackRequest = (opts)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.gen(function*() {\n        const { uploadable, fePackage, beAdapter } = opts;\n        const request = yield* _effect_platform__WEBPACK_IMPORTED_MODULE_8__.HttpServerRequest;\n        const { apiKey } = yield* _config_js__WEBPACK_IMPORTED_MODULE_4__.UTToken;\n        const verified = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.verifySignature)((yield* request.text), request.headers[\"x-uploadthing-signature\"] ?? null, apiKey);\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(`Signature verified: ${verified}`);\n        if (!verified) {\n            yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logError(\"Invalid signature\");\n            return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: \"Invalid signature\"\n            });\n        }\n        const requestInput = yield* _effect_platform__WEBPACK_IMPORTED_MODULE_8__.schemaBodyJson(effect_Schema__WEBPACK_IMPORTED_MODULE_9__.Struct({\n            status: effect_Schema__WEBPACK_IMPORTED_MODULE_9__.String,\n            file: _shared_schemas_js__WEBPACK_IMPORTED_MODULE_10__.UploadedFileData,\n            metadata: effect_Schema__WEBPACK_IMPORTED_MODULE_9__.Record({\n                key: effect_Schema__WEBPACK_IMPORTED_MODULE_9__.String,\n                value: effect_Schema__WEBPACK_IMPORTED_MODULE_9__.Unknown\n            })\n        }));\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(\"Handling callback request with input:\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(\"json\", requestInput));\n        /**\n     * Run `.onUploadComplete` as a daemon to prevent the\n     * request from UT to potentially timeout.\n     */ const fiber = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.gen(function*() {\n            const adapterArgs = yield* AdapterArguments;\n            const serverData = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.tryPromise({\n                try: async ()=>uploadable.onUploadComplete({\n                        ...adapterArgs,\n                        file: {\n                            ...requestInput.file,\n                            get url () {\n                                (0,_deprecations_js__WEBPACK_IMPORTED_MODULE_14__.logDeprecationWarning)(\"`file.url` is deprecated and will be removed in uploadthing v9. Use `file.ufsUrl` instead.\");\n                                return requestInput.file.url;\n                            },\n                            get appUrl () {\n                                (0,_deprecations_js__WEBPACK_IMPORTED_MODULE_14__.logDeprecationWarning)(\"`file.appUrl` is deprecated and will be removed in uploadthing v9. Use `file.ufsUrl` instead.\");\n                                return requestInput.file.appUrl;\n                            }\n                        },\n                        metadata: requestInput.metadata\n                    }),\n                catch: (error)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n                        code: \"INTERNAL_SERVER_ERROR\",\n                        message: \"Failed to run onUploadComplete. You probably shouldn't be throwing errors here.\",\n                        cause: error\n                    })\n            });\n            const payload = {\n                fileKey: requestInput.file.key,\n                callbackData: serverData ?? null\n            };\n            yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(\"'onUploadComplete' callback finished. Sending response to UploadThing:\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(\"callbackData\", payload));\n            const baseUrl = yield* _config_js__WEBPACK_IMPORTED_MODULE_4__.IngestUrl;\n            const httpClient = (yield* _effect_platform__WEBPACK_IMPORTED_MODULE_15__.HttpClient).pipe(_effect_platform__WEBPACK_IMPORTED_MODULE_15__.filterStatusOk);\n            yield* _effect_platform__WEBPACK_IMPORTED_MODULE_16__.post(`/callback-result`).pipe(_effect_platform__WEBPACK_IMPORTED_MODULE_16__.prependUrl(baseUrl), _effect_platform__WEBPACK_IMPORTED_MODULE_16__.setHeaders({\n                \"x-uploadthing-api-key\": effect_Redacted__WEBPACK_IMPORTED_MODULE_17__.value(apiKey),\n                \"x-uploadthing-version\": version,\n                \"x-uploadthing-be-adapter\": beAdapter,\n                \"x-uploadthing-fe-package\": fePackage\n            }), _effect_platform__WEBPACK_IMPORTED_MODULE_16__.bodyJson(payload), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.flatMap(httpClient.execute), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.tapError((0,_logger_js__WEBPACK_IMPORTED_MODULE_18__.logHttpClientError)(\"Failed to register callback result\")), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.flatMap(_effect_platform__WEBPACK_IMPORTED_MODULE_19__.schemaBodyJson(_shared_schemas_js__WEBPACK_IMPORTED_MODULE_10__.CallbackResultResponse)), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.tap(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.log(\"Sent callback result to UploadThing\")), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.scoped);\n        }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.ignoreLogged, effect_Effect__WEBPACK_IMPORTED_MODULE_2__.forkDaemon);\n        return {\n            body: null,\n            fiber\n        };\n    }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.withLogSpan(\"handleCallbackRequest\"));\nconst runRouteMiddleware = (opts)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.gen(function*() {\n        const { json: { files, input }, uploadable } = opts;\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(\"Running middleware\");\n        const adapterArgs = yield* AdapterArguments;\n        const metadata = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.tryPromise({\n            try: async ()=>uploadable.middleware({\n                    ...adapterArgs,\n                    input,\n                    files\n                }),\n            catch: (error)=>error instanceof _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError ? error : new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n                    code: \"INTERNAL_SERVER_ERROR\",\n                    message: \"Failed to run middleware\",\n                    cause: error\n                })\n        });\n        if (metadata[_types_js__WEBPACK_IMPORTED_MODULE_20__.UTFiles] && metadata[_types_js__WEBPACK_IMPORTED_MODULE_20__.UTFiles].length !== files.length) {\n            const msg = `Expected files override to have the same length as original files, got ${metadata[_types_js__WEBPACK_IMPORTED_MODULE_20__.UTFiles].length} but expected ${files.length}`;\n            yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logError(msg);\n            return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: \"Files override must have the same length as files\",\n                cause: msg\n            });\n        }\n        // Attach customIds from middleware to the files\n        const filesWithCustomIds = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.forEach(files, (file, idx)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.gen(function*() {\n                const theirs = metadata[_types_js__WEBPACK_IMPORTED_MODULE_20__.UTFiles]?.[idx];\n                if (theirs && theirs.size !== file.size) {\n                    yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logWarning(\"File size mismatch. Reverting to original size\");\n                }\n                return {\n                    name: theirs?.name ?? file.name,\n                    size: file.size,\n                    type: file.type,\n                    customId: theirs?.customId,\n                    lastModified: theirs?.lastModified ?? Date.now()\n                };\n            }));\n        return {\n            metadata,\n            filesWithCustomIds\n        };\n    }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.withLogSpan(\"runRouteMiddleware\"));\nconst handleUploadAction = (opts)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.gen(function*() {\n        const httpClient = (yield* _effect_platform__WEBPACK_IMPORTED_MODULE_15__.HttpClient).pipe(_effect_platform__WEBPACK_IMPORTED_MODULE_15__.filterStatusOk);\n        const { uploadable, fePackage, beAdapter, slug } = opts;\n        const json = yield* _effect_platform__WEBPACK_IMPORTED_MODULE_8__.schemaBodyJson(_shared_schemas_js__WEBPACK_IMPORTED_MODULE_10__.UploadActionPayload);\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(\"Handling upload request\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(\"json\", json));\n        // validate the input\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(\"Parsing user input\");\n        const parsedInput = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.tryPromise({\n            try: ()=>(0,_parser_js__WEBPACK_IMPORTED_MODULE_21__.getParseFn)(uploadable.inputParser)(json.input),\n            catch: (error)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n                    code: \"BAD_REQUEST\",\n                    message: \"Invalid input\",\n                    cause: error\n                })\n        });\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(\"Input parsed successfully\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(\"input\", parsedInput));\n        const { metadata, filesWithCustomIds } = yield* runRouteMiddleware({\n            json: {\n                input: parsedInput,\n                files: json.files\n            },\n            uploadable\n        });\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(\"Parsing route config\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(\"routerConfig\", uploadable.routerConfig));\n        const parsedConfig = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.fillInputRouteConfig)(uploadable.routerConfig).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.catchTag(\"InvalidRouteConfig\", (err)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: \"Invalid route config\",\n                cause: err\n            })));\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(\"Route config parsed successfully\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(\"routeConfig\", parsedConfig));\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(\"Validating files meet the config requirements\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(\"files\", json.files));\n        yield* (0,_route_config_js__WEBPACK_IMPORTED_MODULE_5__.assertFilesMeetConfig)(json.files, parsedConfig).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.mapError((e)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: `Invalid config: ${e._tag}`,\n                cause: \"reason\" in e ? e.reason : e.message\n            })));\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(\"Files validated.\");\n        const fileUploadRequests = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.forEach(filesWithCustomIds, (file)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.map((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.matchFileType)(file, (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.objectKeys)(parsedConfig)), (type)=>({\n                    name: file.name,\n                    size: file.size,\n                    type: file.type || type,\n                    lastModified: file.lastModified,\n                    customId: file.customId,\n                    contentDisposition: parsedConfig[type]?.contentDisposition ?? \"inline\",\n                    acl: parsedConfig[type]?.acl\n                }))).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.catchTags({\n            /** Shouldn't happen since config is validated above so just dying is fine I think */ InvalidFileType: (e)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.die(e),\n            UnknownFileType: (e)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.die(e)\n        }));\n        const routeOptions = uploadable.routeOptions;\n        const { apiKey, appId } = yield* _config_js__WEBPACK_IMPORTED_MODULE_4__.UTToken;\n        const ingestUrl = yield* _config_js__WEBPACK_IMPORTED_MODULE_4__.IngestUrl;\n        const isDev = yield* _config_js__WEBPACK_IMPORTED_MODULE_4__.IsDevelopment;\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(\"Generating presigned URLs\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(\"fileUploadRequests\", fileUploadRequests), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(\"ingestUrl\", ingestUrl));\n        const presignedUrls = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.forEach(fileUploadRequests, (file)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.gen(function*() {\n                const key = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.generateKey)(file, appId, routeOptions.getFileHashParts);\n                const url = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.generateSignedURL)(`${ingestUrl}/${key}`, apiKey, {\n                    ttlInSeconds: routeOptions.presignedURLTTL,\n                    data: {\n                        \"x-ut-identifier\": appId,\n                        \"x-ut-file-name\": file.name,\n                        \"x-ut-file-size\": file.size,\n                        \"x-ut-file-type\": file.type,\n                        \"x-ut-slug\": slug,\n                        \"x-ut-custom-id\": file.customId,\n                        \"x-ut-content-disposition\": file.contentDisposition,\n                        \"x-ut-acl\": file.acl\n                    }\n                });\n                return {\n                    url,\n                    key\n                };\n            }), {\n            concurrency: \"unbounded\"\n        });\n        const serverReq = yield* _effect_platform__WEBPACK_IMPORTED_MODULE_8__.HttpServerRequest;\n        const requestUrl = yield* _effect_platform__WEBPACK_IMPORTED_MODULE_8__.toURL(serverReq);\n        const devHookRequest = yield* effect_Config__WEBPACK_IMPORTED_MODULE_22__.string(\"callbackUrl\").pipe(effect_Config__WEBPACK_IMPORTED_MODULE_22__.withDefault(requestUrl.origin + requestUrl.pathname), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.map((url)=>_effect_platform__WEBPACK_IMPORTED_MODULE_16__.post(url).pipe(_effect_platform__WEBPACK_IMPORTED_MODULE_16__.appendUrlParam(\"slug\", slug))));\n        const metadataRequest = _effect_platform__WEBPACK_IMPORTED_MODULE_16__.post(\"/route-metadata\").pipe(_effect_platform__WEBPACK_IMPORTED_MODULE_16__.prependUrl(ingestUrl), _effect_platform__WEBPACK_IMPORTED_MODULE_16__.setHeaders({\n            \"x-uploadthing-api-key\": effect_Redacted__WEBPACK_IMPORTED_MODULE_17__.value(apiKey),\n            \"x-uploadthing-version\": version,\n            \"x-uploadthing-be-adapter\": beAdapter,\n            \"x-uploadthing-fe-package\": fePackage\n        }), _effect_platform__WEBPACK_IMPORTED_MODULE_16__.bodyJson({\n            fileKeys: presignedUrls.map(({ key })=>key),\n            metadata: metadata,\n            isDev,\n            callbackUrl: devHookRequest.url,\n            callbackSlug: slug,\n            awaitServerData: routeOptions.awaitServerData ?? true\n        }), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.flatMap(httpClient.execute));\n        const handleDevStreamError = effect_Effect__WEBPACK_IMPORTED_MODULE_2__.fn(\"handleDevStreamError\")(function*(err, chunk) {\n            const schema = effect_Schema__WEBPACK_IMPORTED_MODULE_9__.parseJson(effect_Schema__WEBPACK_IMPORTED_MODULE_9__.Struct({\n                file: _shared_schemas_js__WEBPACK_IMPORTED_MODULE_10__.UploadedFileData\n            }));\n            const parsedChunk = yield* effect_Schema__WEBPACK_IMPORTED_MODULE_9__.decodeUnknown(schema)(chunk);\n            const key = parsedChunk.file.key;\n            yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logError(\"Failed to forward callback request from dev stream\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs({\n                fileKey: key,\n                error: err.message\n            }));\n            const httpResponse = yield* _effect_platform__WEBPACK_IMPORTED_MODULE_16__.post(\"/callback-result\").pipe(_effect_platform__WEBPACK_IMPORTED_MODULE_16__.prependUrl(ingestUrl), _effect_platform__WEBPACK_IMPORTED_MODULE_16__.setHeaders({\n                \"x-uploadthing-api-key\": effect_Redacted__WEBPACK_IMPORTED_MODULE_17__.value(apiKey),\n                \"x-uploadthing-version\": version,\n                \"x-uploadthing-be-adapter\": beAdapter,\n                \"x-uploadthing-fe-package\": fePackage\n            }), _effect_platform__WEBPACK_IMPORTED_MODULE_16__.bodyJson({\n                fileKey: key,\n                error: `Failed to forward callback request from dev stream: ${err.message}`\n            }), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.flatMap(httpClient.execute));\n            yield* (0,_logger_js__WEBPACK_IMPORTED_MODULE_18__.logHttpClientResponse)(\"Reported callback error to UploadThing\")(httpResponse);\n        });\n        // Send metadata to UT server (non blocking as a daemon)\n        // In dev, keep the stream open and simulate the callback requests as\n        // files complete uploading\n        const fiber = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__[\"if\"](isDev, {\n            onTrue: ()=>metadataRequest.pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.tapBoth({\n                    onSuccess: (0,_logger_js__WEBPACK_IMPORTED_MODULE_18__.logHttpClientResponse)(\"Registered metadata\", {\n                        mixin: \"None\"\n                    }),\n                    onFailure: (0,_logger_js__WEBPACK_IMPORTED_MODULE_18__.logHttpClientError)(\"Failed to register metadata\")\n                }), _effect_platform__WEBPACK_IMPORTED_MODULE_23__.stream, (0,_jsonl_js__WEBPACK_IMPORTED_MODULE_24__.handleJsonLineStream)(_shared_schemas_js__WEBPACK_IMPORTED_MODULE_10__.MetadataFetchStreamPart, (chunk)=>devHookRequest.pipe(_effect_platform__WEBPACK_IMPORTED_MODULE_16__.setHeaders({\n                        \"uploadthing-hook\": chunk.hook,\n                        \"x-uploadthing-signature\": chunk.signature\n                    }), _effect_platform__WEBPACK_IMPORTED_MODULE_16__.setBody(_effect_platform__WEBPACK_IMPORTED_MODULE_25__.text(chunk.payload, \"application/json\")), httpClient.execute, effect_Effect__WEBPACK_IMPORTED_MODULE_2__.tap((0,_logger_js__WEBPACK_IMPORTED_MODULE_18__.logHttpClientResponse)(\"Successfully forwarded callback request from dev stream\")), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.catchTag(\"ResponseError\", (err)=>handleDevStreamError(err, chunk.payload)), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(chunk), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.asVoid, effect_Effect__WEBPACK_IMPORTED_MODULE_2__.ignoreLogged, effect_Effect__WEBPACK_IMPORTED_MODULE_2__.scoped))),\n            onFalse: ()=>metadataRequest.pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.tapBoth({\n                    onSuccess: (0,_logger_js__WEBPACK_IMPORTED_MODULE_18__.logHttpClientResponse)(\"Registered metadata\"),\n                    onFailure: (0,_logger_js__WEBPACK_IMPORTED_MODULE_18__.logHttpClientError)(\"Failed to register metadata\")\n                }), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.flatMap(_effect_platform__WEBPACK_IMPORTED_MODULE_19__.schemaBodyJson(_shared_schemas_js__WEBPACK_IMPORTED_MODULE_10__.MetadataFetchResponse)), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.scoped)\n        }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.forkDaemon);\n        const presigneds = presignedUrls.map((p, i)=>({\n                url: p.url,\n                key: p.key,\n                name: fileUploadRequests[i].name,\n                customId: fileUploadRequests[i].customId ?? null\n            }));\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logInfo(\"Sending presigned URLs to client\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(\"presignedUrls\", presigneds));\n        return {\n            body: presigneds,\n            fiber\n        };\n    }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.withLogSpan(\"handleUploadAction\"));\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvaGFuZGxlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUEySjtBQUNuSDtBQUNFO0FBQ0Y7QUFDRjtBQUNNO0FBQ0o7QUFDeUk7QUFDakg7QUFDTjtBQUNQO0FBQ0Q7QUFDc0I7QUFDL0I7QUFDc0M7QUFDcEM7QUFDc0k7QUFDNUk7O0FBRXJDOztBQUVBLCtCQUErQiwrQ0FBVztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQix3REFBVztBQUMvQixtQkFBbUIsa0RBQWMsNEJBQTRCLGlFQUEyQjtBQUN4RiwyQkFBMkIsOENBQVUsQ0FBQyxrREFBYyw2RUFBNkUsK0RBQTJCO0FBQzVKO0FBQ0EseUNBQXlDLDZDQUFTLGdCQUFnQiw2Q0FBUyxzQkFBc0Isc0RBQWtCO0FBQ25IO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCw4Q0FBVTtBQUMxRCxxQ0FBcUMscURBQWE7QUFDbEQsb0NBQW9DLHFFQUFtQjtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsOEJBQThCLGlFQUFnQjtBQUM5QztBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0Esb0JBQW9CLDhDQUFVO0FBQzlCLDBCQUEwQixrREFBdUI7QUFDakQsU0FBUztBQUNULHFCQUFxQiw4Q0FBVTtBQUMvQixvQkFBb0Isa0hBQWtILFNBQVMsMkRBQStCLENBQUMsaURBQWE7QUFDNUwsb0NBQW9DLGdFQUFlLE1BQU0sbURBQWU7QUFDeEUseUNBQXlDLGlEQUFhLE1BQU0sdURBQW1CO0FBQy9FO0FBQ0EsaUJBQWlCO0FBQ2pCLHlDQUF5QyxpREFBYSxNQUFNLHVEQUFtQjtBQUMvRTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBLHVCQUF1QixxREFBaUIs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UC9hdGhsZXRlLWF4aXMvbm9kZV9tb2R1bGVzL3VwbG9hZHRoaW5nL2Rpc3QvX2ludGVybmFsL2hhbmRsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSHR0cEFwcCwgSHR0cFNlcnZlclJlc3BvbnNlLCBIdHRwU2VydmVyUmVxdWVzdCwgSHR0cFJvdXRlciwgSHR0cENsaWVudCwgSHR0cENsaWVudFJlcXVlc3QsIEh0dHBDbGllbnRSZXNwb25zZSwgSHR0cEJvZHkgfSBmcm9tICdAZWZmZWN0L3BsYXRmb3JtJztcbmltcG9ydCAqIGFzIENvbmZpZyBmcm9tICdlZmZlY3QvQ29uZmlnJztcbmltcG9ydCAqIGFzIENvbnRleHQgZnJvbSAnZWZmZWN0L0NvbnRleHQnO1xuaW1wb3J0ICogYXMgRWZmZWN0IGZyb20gJ2VmZmVjdC9FZmZlY3QnO1xuaW1wb3J0ICogYXMgTWF0Y2ggZnJvbSAnZWZmZWN0L01hdGNoJztcbmltcG9ydCAqIGFzIFJlZGFjdGVkIGZyb20gJ2VmZmVjdC9SZWRhY3RlZCc7XG5pbXBvcnQgKiBhcyBTY2hlbWEgZnJvbSAnZWZmZWN0L1NjaGVtYSc7XG5pbXBvcnQgeyBVcGxvYWRUaGluZ0Vycm9yLCBnZXRTdGF0dXNDb2RlRnJvbUVycm9yLCB2ZXJpZnlTaWduYXR1cmUsIGZpbGxJbnB1dFJvdXRlQ29uZmlnLCBtYXRjaEZpbGVUeXBlLCBvYmplY3RLZXlzLCBnZW5lcmF0ZUtleSwgZ2VuZXJhdGVTaWduZWRVUkwgfSBmcm9tICdAdXBsb2FkdGhpbmcvc2hhcmVkJztcbmltcG9ydCB7IElzRGV2ZWxvcG1lbnQsIFVUVG9rZW4sIEluZ2VzdFVybCB9IGZyb20gJy4vY29uZmlnLmpzJztcbmltcG9ydCB7IGxvZ0RlcHJlY2F0aW9uV2FybmluZyB9IGZyb20gJy4vZGVwcmVjYXRpb25zLmpzJztcbmltcG9ydCB7IGZvcm1hdEVycm9yIH0gZnJvbSAnLi9lcnJvci1mb3JtYXR0ZXIuanMnO1xuaW1wb3J0IHsgaGFuZGxlSnNvbkxpbmVTdHJlYW0gfSBmcm9tICcuL2pzb25sLmpzJztcbmltcG9ydCB7IGxvZ0h0dHBDbGllbnRFcnJvciwgbG9nSHR0cENsaWVudFJlc3BvbnNlIH0gZnJvbSAnLi9sb2dnZXIuanMnO1xuaW1wb3J0IHsgZ2V0UGFyc2VGbiB9IGZyb20gJy4vcGFyc2VyLmpzJztcbmltcG9ydCB7IGV4dHJhY3RSb3V0ZXJDb25maWcsIGFzc2VydEZpbGVzTWVldENvbmZpZyB9IGZyb20gJy4vcm91dGUtY29uZmlnLmpzJztcbmltcG9ydCB7IG1ha2VSdW50aW1lIH0gZnJvbSAnLi9ydW50aW1lLmpzJztcbmltcG9ydCB7IFVwbG9hZFRoaW5nSG9vaywgQWN0aW9uVHlwZSwgVXBsb2FkZWRGaWxlRGF0YSwgQ2FsbGJhY2tSZXN1bHRSZXNwb25zZSwgVXBsb2FkQWN0aW9uUGF5bG9hZCwgTWV0YWRhdGFGZXRjaFN0cmVhbVBhcnQsIE1ldGFkYXRhRmV0Y2hSZXNwb25zZSB9IGZyb20gJy4vc2hhcmVkLXNjaGVtYXMuanMnO1xuaW1wb3J0IHsgVVRGaWxlcyB9IGZyb20gJy4vdHlwZXMuanMnO1xuXG52YXIgdmVyc2lvbiA9IFwiNy42LjBcIjtcblxuY2xhc3MgQWRhcHRlckFyZ3VtZW50cyBleHRlbmRzIENvbnRleHQuVGFnKFwidXBsb2FkdGhpbmcvQWRhcHRlckFyZ3VtZW50c1wiKSgpIHtcbn1cbi8qKlxuICogQ3JlYXRlIGEgcmVxdWVzdCBoYW5kbGVyIGFkYXB0ZXIgZm9yIGFueSBmcmFtZXdvcmsgb3Igc2VydmVyIGxpYnJhcnkuXG4gKiBSZWZlciB0byB0aGUgZXhpc3RpbmcgYWRhcHRlcnMgZm9yIGV4YW1wbGVzIG9uIGhvdyB0byB1c2UgdGhpcyBmdW5jdGlvbi5cbiAqIEBwdWJsaWNcbiAqXG4gKiBAcGFyYW0gbWFrZUFkYXB0ZXJBcmdzIC0gRnVuY3Rpb24gdGhhdCB0YWtlcyB0aGUgYXJncyBmcm9tIHlvdXIgZnJhbWV3b3JrIGFuZCByZXR1cm5zIGFuIEVmZmVjdCB0aGF0IHJlc29sdmVzIHRvIHRoZSBhZGFwdGVyIGFyZ3MuXG4gKiBUaGVzZSBhcmdzIGFyZSBwYXNzZWQgdG8gdGhlIGAubWlkZGxld2FyZWAsIGAub25VcGxvYWRDb21wbGV0ZWAsIGFuZCBgLm9uVXBsb2FkRXJyb3JgIGhvb2tzLlxuICogQHBhcmFtIHRvUmVxdWVzdCAtIEZ1bmN0aW9uIHRoYXQgdGFrZXMgdGhlIGFyZ3MgZnJvbSB5b3VyIGZyYW1ld29yayBhbmQgcmV0dXJucyBhbiBFZmZlY3QgdGhhdCByZXNvbHZlcyB0byBhIHdlYiBSZXF1ZXN0IG9iamVjdC5cbiAqIEBwYXJhbSBvcHRzIC0gVGhlIHJvdXRlciBjb25maWcgYW5kIG90aGVyIG9wdGlvbnMgdGhhdCBhcmUgbm9ybWFsbHkgcGFzc2VkIHRvIGBjcmVhdGVSZXF1ZXN0SGFuZGxlcmAgb2Ygb2ZmaWNpYWwgYWRhcHRlcnNcbiAqIEBwYXJhbSBiZUFkYXB0ZXIgLSBbT3B0aW9uYWxdIFRoZSBhZGFwdGVyIG5hbWUgb2YgdGhlIGFkYXB0ZXIsIHVzZWQgZm9yIHRlbGVtZXRyeSBwdXJwb3Nlc1xuICogQHJldHVybnMgQSBmdW5jdGlvbiB0aGF0IHRha2VzIHRoZSBhcmdzIGZyb20geW91ciBmcmFtZXdvcmsgYW5kIHJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYSBSZXNwb25zZSBvYmplY3QuXG4gKi8gY29uc3QgbWFrZUFkYXB0ZXJIYW5kbGVyID0gKG1ha2VBZGFwdGVyQXJncywgdG9SZXF1ZXN0LCBvcHRzLCBiZUFkYXB0ZXIpPT57XG4gICAgY29uc3QgbWFuYWdlZCA9IG1ha2VSdW50aW1lKG9wdHMuY29uZmlnPy5mZXRjaCwgb3B0cy5jb25maWcpO1xuICAgIGNvbnN0IGhhbmRsZSA9IEVmZmVjdC5wcm9taXNlKCgpPT5tYW5hZ2VkLnJ1bnRpbWUoKS50aGVuKEh0dHBBcHAudG9XZWJIYW5kbGVyUnVudGltZSkpO1xuICAgIGNvbnN0IGFwcCA9ICguLi5hcmdzKT0+RWZmZWN0Lm1hcChFZmZlY3QucHJvbWlzZSgoKT0+bWFuYWdlZC5ydW5Qcm9taXNlKGNyZWF0ZVJlcXVlc3RIYW5kbGVyKG9wdHMsIGJlQWRhcHRlciA/PyBcImN1c3RvbVwiKSkpLCBFZmZlY3QucHJvdmlkZVNlcnZpY2VFZmZlY3QoQWRhcHRlckFyZ3VtZW50cywgbWFrZUFkYXB0ZXJBcmdzKC4uLmFyZ3MpKSk7XG4gICAgcmV0dXJuIGFzeW5jICguLi5hcmdzKT0+e1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoYW5kbGUucGlwZShFZmZlY3QuYXAoYXBwKC4uLmFyZ3MpKSwgRWZmZWN0LmFwKHRvUmVxdWVzdCguLi5hcmdzKSksIEVmZmVjdC53aXRoTG9nU3BhbihcInJlcXVlc3RIYW5kbGVyXCIpLCBtYW5hZ2VkLnJ1blByb21pc2UpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG59O1xuY29uc3QgY3JlYXRlUmVxdWVzdEhhbmRsZXIgPSAob3B0cywgYmVBZGFwdGVyKT0+RWZmZWN0LmdlbihmdW5jdGlvbiooKSB7XG4gICAgICAgIGNvbnN0IGlzRGV2ZWxvcG1lbnQgPSB5aWVsZCogSXNEZXZlbG9wbWVudDtcbiAgICAgICAgY29uc3Qgcm91dGVyQ29uZmlnID0geWllbGQqIGV4dHJhY3RSb3V0ZXJDb25maWcob3B0cy5yb3V0ZXIpO1xuICAgICAgICBjb25zdCBoYW5kbGVEYWVtb24gPSAoKCk9PntcbiAgICAgICAgICAgIGlmIChvcHRzLmNvbmZpZz8uaGFuZGxlRGFlbW9uUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBvcHRzLmNvbmZpZy5oYW5kbGVEYWVtb25Qcm9taXNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGlzRGV2ZWxvcG1lbnQgPyBcInZvaWRcIiA6IFwiYXdhaXRcIjtcbiAgICAgICAgfSkoKTtcbiAgICAgICAgaWYgKGlzRGV2ZWxvcG1lbnQgJiYgaGFuZGxlRGFlbW9uID09PSBcImF3YWl0XCIpIHtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCogbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICAgICAgICAgIGNvZGU6IFwiSU5WQUxJRF9TRVJWRVJfQ09ORklHXCIsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ2hhbmRsZURhZW1vblByb21pc2U6IFwiYXdhaXRcIiBpcyBmb3JiaWRkZW4gaW4gZGV2ZWxvcG1lbnQuJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgR0VUID0gRWZmZWN0LmdlbihmdW5jdGlvbiooKSB7XG4gICAgICAgICAgICByZXR1cm4geWllbGQqIEh0dHBTZXJ2ZXJSZXNwb25zZS5qc29uKHJvdXRlckNvbmZpZyk7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBQT1NUID0gRWZmZWN0LmdlbihmdW5jdGlvbiooKSB7XG4gICAgICAgICAgICBjb25zdCB7IFwidXBsb2FkdGhpbmctaG9va1wiOiB1cGxvYWR0aGluZ0hvb2ssIFwieC11cGxvYWR0aGluZy1wYWNrYWdlXCI6IGZlUGFja2FnZSwgXCJ4LXVwbG9hZHRoaW5nLXZlcnNpb25cIjogY2xpZW50VmVyc2lvbiB9ID0geWllbGQqIEh0dHBTZXJ2ZXJSZXF1ZXN0LnNjaGVtYUhlYWRlcnMoU2NoZW1hLlN0cnVjdCh7XG4gICAgICAgICAgICAgICAgXCJ1cGxvYWR0aGluZy1ob29rXCI6IFVwbG9hZFRoaW5nSG9vay5waXBlKFNjaGVtYS5vcHRpb25hbCksXG4gICAgICAgICAgICAgICAgXCJ4LXVwbG9hZHRoaW5nLXBhY2thZ2VcIjogU2NoZW1hLlN0cmluZy5waXBlKFNjaGVtYS5vcHRpb25hbFdpdGgoe1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiAoKT0+XCJ1bmtub3duXCJcbiAgICAgICAgICAgICAgICB9KSksXG4gICAgICAgICAgICAgICAgXCJ4LXVwbG9hZHRoaW5nLXZlcnNpb25cIjogU2NoZW1hLlN0cmluZy5waXBlKFNjaGVtYS5vcHRpb25hbFdpdGgoe1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiAoKT0+dmVyc2lvblxuICAgICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgaWYgKGNsaWVudFZlcnNpb24gIT09IHZlcnNpb24pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzZXJ2ZXJWZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgICAgICAgICAgICB5aWVsZCogRWZmZWN0LmxvZ1dhcm5pbmcoXCJDbGllbnQgdmVyc2lvbiBtaXNtYXRjaC4gVGhpbmdzIG1heSBub3Qgd29yayBhcyBleHBlY3RlZCwgcGxlYXNlIHN5bmMgeW91ciB2ZXJzaW9ucyB0byBlbnN1cmUgY29tcGF0aWJpbGl0eS5cIikucGlwZShFZmZlY3QuYW5ub3RhdGVMb2dzKHtcbiAgICAgICAgICAgICAgICAgICAgY2xpZW50VmVyc2lvbixcbiAgICAgICAgICAgICAgICAgICAgc2VydmVyVmVyc2lvblxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHsgc2x1ZywgYWN0aW9uVHlwZSB9ID0geWllbGQqIEh0dHBSb3V0ZXIuc2NoZW1hUGFyYW1zKFNjaGVtYS5TdHJ1Y3Qoe1xuICAgICAgICAgICAgICAgIGFjdGlvblR5cGU6IEFjdGlvblR5cGUucGlwZShTY2hlbWEub3B0aW9uYWwpLFxuICAgICAgICAgICAgICAgIHNsdWc6IFNjaGVtYS5TdHJpbmdcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGNvbnN0IHVwbG9hZGFibGUgPSBvcHRzLnJvdXRlcltzbHVnXTtcbiAgICAgICAgICAgIGlmICghdXBsb2FkYWJsZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1zZyA9IGBObyBmaWxlIHJvdXRlIGZvdW5kIGZvciBzbHVnICR7c2x1Z31gO1xuICAgICAgICAgICAgICAgIHlpZWxkKiBFZmZlY3QubG9nRXJyb3IobXNnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4geWllbGQqIG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogXCJOT1RfRk9VTkRcIixcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogbXNnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB7IGJvZHksIGZpYmVyIH0gPSB5aWVsZCogTWF0Y2gudmFsdWUoe1xuICAgICAgICAgICAgICAgIGFjdGlvblR5cGUsXG4gICAgICAgICAgICAgICAgdXBsb2FkdGhpbmdIb29rXG4gICAgICAgICAgICB9KS5waXBlKE1hdGNoLndoZW4oe1xuICAgICAgICAgICAgICAgIGFjdGlvblR5cGU6IFwidXBsb2FkXCIsXG4gICAgICAgICAgICAgICAgdXBsb2FkdGhpbmdIb29rOiB1bmRlZmluZWRcbiAgICAgICAgICAgIH0sICgpPT5oYW5kbGVVcGxvYWRBY3Rpb24oe1xuICAgICAgICAgICAgICAgICAgICB1cGxvYWRhYmxlLFxuICAgICAgICAgICAgICAgICAgICBmZVBhY2thZ2UsXG4gICAgICAgICAgICAgICAgICAgIGJlQWRhcHRlcixcbiAgICAgICAgICAgICAgICAgICAgc2x1Z1xuICAgICAgICAgICAgICAgIH0pKSwgTWF0Y2gud2hlbih7XG4gICAgICAgICAgICAgICAgYWN0aW9uVHlwZTogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIHVwbG9hZHRoaW5nSG9vazogXCJjYWxsYmFja1wiXG4gICAgICAgICAgICB9LCAoKT0+aGFuZGxlQ2FsbGJhY2tSZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICAgICAgdXBsb2FkYWJsZSxcbiAgICAgICAgICAgICAgICAgICAgZmVQYWNrYWdlLFxuICAgICAgICAgICAgICAgICAgICBiZUFkYXB0ZXJcbiAgICAgICAgICAgICAgICB9KSksIE1hdGNoLndoZW4oe1xuICAgICAgICAgICAgICAgIGFjdGlvblR5cGU6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICB1cGxvYWR0aGluZ0hvb2s6IFwiZXJyb3JcIlxuICAgICAgICAgICAgfSwgKCk9PmhhbmRsZUVycm9yUmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgICAgIHVwbG9hZGFibGVcbiAgICAgICAgICAgICAgICB9KSksIE1hdGNoLm9yRWxzZSgoKT0+RWZmZWN0LnN1Y2NlZWQoe1xuICAgICAgICAgICAgICAgICAgICBib2R5OiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBmaWJlcjogbnVsbFxuICAgICAgICAgICAgICAgIH0pKSk7XG4gICAgICAgICAgICBpZiAoZmliZXIpIHtcbiAgICAgICAgICAgICAgICB5aWVsZCogRWZmZWN0LmxvZ0RlYnVnKFwiUnVubmluZyBmaWJlciBhcyBkYWVtb25cIikucGlwZShFZmZlY3QuYW5ub3RhdGVMb2dzKFwiaGFuZGxlRGFlbW9uXCIsIGhhbmRsZURhZW1vbikpO1xuICAgICAgICAgICAgICAgIGlmIChoYW5kbGVEYWVtb24gPT09IFwidm9pZFwiKSA7IGVsc2UgaWYgKGhhbmRsZURhZW1vbiA9PT0gXCJhd2FpdFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHlpZWxkKiBmaWJlci5hd2FpdDtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBoYW5kbGVEYWVtb24gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICBoYW5kbGVEYWVtb24oRWZmZWN0LnJ1blByb21pc2UoZmliZXIuYXdhaXQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB5aWVsZCogRWZmZWN0LmxvZ0RlYnVnKFwiU2VuZGluZyByZXNwb25zZVwiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJib2R5XCIsIGJvZHkpKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCogSHR0cFNlcnZlclJlc3BvbnNlLmpzb24oYm9keSk7XG4gICAgICAgIH0pLnBpcGUoRWZmZWN0LmNhdGNoVGFncyh7XG4gICAgICAgICAgICBQYXJzZUVycm9yOiAoZSk9Pkh0dHBTZXJ2ZXJSZXNwb25zZS5qc29uKGZvcm1hdEVycm9yKG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogXCJCQURfUkVRVUVTVFwiLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkludmFsaWQgaW5wdXRcIixcbiAgICAgICAgICAgICAgICAgICAgY2F1c2U6IGUubWVzc2FnZVxuICAgICAgICAgICAgICAgIH0pLCBvcHRzLnJvdXRlciksIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiA0MDBcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIFVwbG9hZFRoaW5nRXJyb3I6IChlKT0+Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXJndW1lbnRcbiAgICAgICAgICAgICAgICBIdHRwU2VydmVyUmVzcG9uc2UuanNvbihmb3JtYXRFcnJvcihlLCBvcHRzLnJvdXRlciksIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBnZXRTdGF0dXNDb2RlRnJvbUVycm9yKGUpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgfSkpO1xuICAgICAgICBjb25zdCBhcHBlbmRSZXNwb25zZUhlYWRlcnMgPSBFZmZlY3QubWFwKEh0dHBTZXJ2ZXJSZXNwb25zZS5zZXRIZWFkZXIoXCJ4LXVwbG9hZHRoaW5nLXZlcnNpb25cIiwgdmVyc2lvbikpO1xuICAgICAgICByZXR1cm4gSHR0cFJvdXRlci5lbXB0eS5waXBlKEh0dHBSb3V0ZXIuZ2V0KFwiKlwiLCBHRVQpLCBIdHRwUm91dGVyLnBvc3QoXCIqXCIsIFBPU1QpLCBIdHRwUm91dGVyLnVzZShhcHBlbmRSZXNwb25zZUhlYWRlcnMpKTtcbiAgICB9KS5waXBlKEVmZmVjdC53aXRoTG9nU3BhbihcImNyZWF0ZVJlcXVlc3RIYW5kbGVyXCIpKTtcbmNvbnN0IGhhbmRsZUVycm9yUmVxdWVzdCA9IChvcHRzKT0+RWZmZWN0LmdlbihmdW5jdGlvbiooKSB7XG4gICAgICAgIGNvbnN0IHsgdXBsb2FkYWJsZSB9ID0gb3B0cztcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHlpZWxkKiBIdHRwU2VydmVyUmVxdWVzdC5IdHRwU2VydmVyUmVxdWVzdDtcbiAgICAgICAgY29uc3QgeyBhcGlLZXkgfSA9IHlpZWxkKiBVVFRva2VuO1xuICAgICAgICBjb25zdCB2ZXJpZmllZCA9IHlpZWxkKiB2ZXJpZnlTaWduYXR1cmUoKHlpZWxkKiByZXF1ZXN0LnRleHQpLCByZXF1ZXN0LmhlYWRlcnNbXCJ4LXVwbG9hZHRoaW5nLXNpZ25hdHVyZVwiXSA/PyBudWxsLCBhcGlLZXkpO1xuICAgICAgICB5aWVsZCogRWZmZWN0LmxvZ0RlYnVnKGBTaWduYXR1cmUgdmVyaWZpZWQ6ICR7dmVyaWZpZWR9YCk7XG4gICAgICAgIGlmICghdmVyaWZpZWQpIHtcbiAgICAgICAgICAgIHlpZWxkKiBFZmZlY3QubG9nRXJyb3IoXCJJbnZhbGlkIHNpZ25hdHVyZVwiKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCogbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICAgICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkludmFsaWQgc2lnbmF0dXJlXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlcXVlc3RJbnB1dCA9IHlpZWxkKiBIdHRwU2VydmVyUmVxdWVzdC5zY2hlbWFCb2R5SnNvbihTY2hlbWEuU3RydWN0KHtcbiAgICAgICAgICAgIGZpbGVLZXk6IFNjaGVtYS5TdHJpbmcsXG4gICAgICAgICAgICBlcnJvcjogU2NoZW1hLlN0cmluZ1xuICAgICAgICB9KSk7XG4gICAgICAgIHlpZWxkKiBFZmZlY3QubG9nRGVidWcoXCJIYW5kbGluZyBlcnJvciBjYWxsYmFjayByZXF1ZXN0IHdpdGggaW5wdXQ6XCIpLnBpcGUoRWZmZWN0LmFubm90YXRlTG9ncyhcImpzb25cIiwgcmVxdWVzdElucHV0KSk7XG4gICAgICAgIGNvbnN0IGFkYXB0ZXJBcmdzID0geWllbGQqIEFkYXB0ZXJBcmd1bWVudHM7XG4gICAgICAgIGNvbnN0IGZpYmVyID0geWllbGQqIEVmZmVjdC50cnlQcm9taXNlKHtcbiAgICAgICAgICAgIHRyeTogYXN5bmMgKCk9PnVwbG9hZGFibGUub25VcGxvYWRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIC4uLmFkYXB0ZXJBcmdzLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogXCJVUExPQURfRkFJTEVEXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBgVXBsb2FkIGZhaWxlZCBmb3IgJHtyZXF1ZXN0SW5wdXQuZmlsZUtleX06ICR7cmVxdWVzdElucHV0LmVycm9yfWBcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIGZpbGVLZXk6IHJlcXVlc3RJbnB1dC5maWxlS2V5XG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBjYXRjaDogKGVycm9yKT0+bmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBydW4gb25VcGxvYWRFcnJvclwiLFxuICAgICAgICAgICAgICAgICAgICBjYXVzZTogZXJyb3JcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICB9KS5waXBlKEVmZmVjdC50YXBFcnJvcigoZXJyb3IpPT5FZmZlY3QubG9nRXJyb3IoXCJGYWlsZWQgdG8gcnVuIG9uVXBsb2FkRXJyb3IuIFlvdSBwcm9iYWJseSBzaG91bGRuJ3QgYmUgdGhyb3dpbmcgZXJyb3JzIGhlcmUuXCIpLnBpcGUoRWZmZWN0LmFubm90YXRlTG9ncyhcImVycm9yXCIsIGVycm9yKSkpKS5waXBlKEVmZmVjdC5pZ25vcmVMb2dnZWQsIEVmZmVjdC5mb3JrRGFlbW9uKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGJvZHk6IG51bGwsXG4gICAgICAgICAgICBmaWJlclxuICAgICAgICB9O1xuICAgIH0pLnBpcGUoRWZmZWN0LndpdGhMb2dTcGFuKFwiaGFuZGxlRXJyb3JSZXF1ZXN0XCIpKTtcbmNvbnN0IGhhbmRsZUNhbGxiYWNrUmVxdWVzdCA9IChvcHRzKT0+RWZmZWN0LmdlbihmdW5jdGlvbiooKSB7XG4gICAgICAgIGNvbnN0IHsgdXBsb2FkYWJsZSwgZmVQYWNrYWdlLCBiZUFkYXB0ZXIgfSA9IG9wdHM7XG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB5aWVsZCogSHR0cFNlcnZlclJlcXVlc3QuSHR0cFNlcnZlclJlcXVlc3Q7XG4gICAgICAgIGNvbnN0IHsgYXBpS2V5IH0gPSB5aWVsZCogVVRUb2tlbjtcbiAgICAgICAgY29uc3QgdmVyaWZpZWQgPSB5aWVsZCogdmVyaWZ5U2lnbmF0dXJlKCh5aWVsZCogcmVxdWVzdC50ZXh0KSwgcmVxdWVzdC5oZWFkZXJzW1wieC11cGxvYWR0aGluZy1zaWduYXR1cmVcIl0gPz8gbnVsbCwgYXBpS2V5KTtcbiAgICAgICAgeWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhgU2lnbmF0dXJlIHZlcmlmaWVkOiAke3ZlcmlmaWVkfWApO1xuICAgICAgICBpZiAoIXZlcmlmaWVkKSB7XG4gICAgICAgICAgICB5aWVsZCogRWZmZWN0LmxvZ0Vycm9yKFwiSW52YWxpZCBzaWduYXR1cmVcIik7XG4gICAgICAgICAgICByZXR1cm4geWllbGQqIG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJJbnZhbGlkIHNpZ25hdHVyZVwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXF1ZXN0SW5wdXQgPSB5aWVsZCogSHR0cFNlcnZlclJlcXVlc3Quc2NoZW1hQm9keUpzb24oU2NoZW1hLlN0cnVjdCh7XG4gICAgICAgICAgICBzdGF0dXM6IFNjaGVtYS5TdHJpbmcsXG4gICAgICAgICAgICBmaWxlOiBVcGxvYWRlZEZpbGVEYXRhLFxuICAgICAgICAgICAgbWV0YWRhdGE6IFNjaGVtYS5SZWNvcmQoe1xuICAgICAgICAgICAgICAgIGtleTogU2NoZW1hLlN0cmluZyxcbiAgICAgICAgICAgICAgICB2YWx1ZTogU2NoZW1hLlVua25vd25cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pKTtcbiAgICAgICAgeWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhcIkhhbmRsaW5nIGNhbGxiYWNrIHJlcXVlc3Qgd2l0aCBpbnB1dDpcIikucGlwZShFZmZlY3QuYW5ub3RhdGVMb2dzKFwianNvblwiLCByZXF1ZXN0SW5wdXQpKTtcbiAgICAgICAgLyoqXG4gICAgICogUnVuIGAub25VcGxvYWRDb21wbGV0ZWAgYXMgYSBkYWVtb24gdG8gcHJldmVudCB0aGVcbiAgICAgKiByZXF1ZXN0IGZyb20gVVQgdG8gcG90ZW50aWFsbHkgdGltZW91dC5cbiAgICAgKi8gY29uc3QgZmliZXIgPSB5aWVsZCogRWZmZWN0LmdlbihmdW5jdGlvbiooKSB7XG4gICAgICAgICAgICBjb25zdCBhZGFwdGVyQXJncyA9IHlpZWxkKiBBZGFwdGVyQXJndW1lbnRzO1xuICAgICAgICAgICAgY29uc3Qgc2VydmVyRGF0YSA9IHlpZWxkKiBFZmZlY3QudHJ5UHJvbWlzZSh7XG4gICAgICAgICAgICAgICAgdHJ5OiBhc3luYyAoKT0+dXBsb2FkYWJsZS5vblVwbG9hZENvbXBsZXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmFkYXB0ZXJBcmdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnJlcXVlc3RJbnB1dC5maWxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldCB1cmwgKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dEZXByZWNhdGlvbldhcm5pbmcoXCJgZmlsZS51cmxgIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiB1cGxvYWR0aGluZyB2OS4gVXNlIGBmaWxlLnVmc1VybGAgaW5zdGVhZC5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXF1ZXN0SW5wdXQuZmlsZS51cmw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXQgYXBwVXJsICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nRGVwcmVjYXRpb25XYXJuaW5nKFwiYGZpbGUuYXBwVXJsYCBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdXBsb2FkdGhpbmcgdjkuIFVzZSBgZmlsZS51ZnNVcmxgIGluc3RlYWQuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVxdWVzdElucHV0LmZpbGUuYXBwVXJsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YTogcmVxdWVzdElucHV0Lm1ldGFkYXRhXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGNhdGNoOiAoZXJyb3IpPT5uZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gcnVuIG9uVXBsb2FkQ29tcGxldGUuIFlvdSBwcm9iYWJseSBzaG91bGRuJ3QgYmUgdGhyb3dpbmcgZXJyb3JzIGhlcmUuXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXVzZTogZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgcGF5bG9hZCA9IHtcbiAgICAgICAgICAgICAgICBmaWxlS2V5OiByZXF1ZXN0SW5wdXQuZmlsZS5rZXksXG4gICAgICAgICAgICAgICAgY2FsbGJhY2tEYXRhOiBzZXJ2ZXJEYXRhID8/IG51bGxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB5aWVsZCogRWZmZWN0LmxvZ0RlYnVnKFwiJ29uVXBsb2FkQ29tcGxldGUnIGNhbGxiYWNrIGZpbmlzaGVkLiBTZW5kaW5nIHJlc3BvbnNlIHRvIFVwbG9hZFRoaW5nOlwiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJjYWxsYmFja0RhdGFcIiwgcGF5bG9hZCkpO1xuICAgICAgICAgICAgY29uc3QgYmFzZVVybCA9IHlpZWxkKiBJbmdlc3RVcmw7XG4gICAgICAgICAgICBjb25zdCBodHRwQ2xpZW50ID0gKHlpZWxkKiBIdHRwQ2xpZW50Lkh0dHBDbGllbnQpLnBpcGUoSHR0cENsaWVudC5maWx0ZXJTdGF0dXNPayk7XG4gICAgICAgICAgICB5aWVsZCogSHR0cENsaWVudFJlcXVlc3QucG9zdChgL2NhbGxiYWNrLXJlc3VsdGApLnBpcGUoSHR0cENsaWVudFJlcXVlc3QucHJlcGVuZFVybChiYXNlVXJsKSwgSHR0cENsaWVudFJlcXVlc3Quc2V0SGVhZGVycyh7XG4gICAgICAgICAgICAgICAgXCJ4LXVwbG9hZHRoaW5nLWFwaS1rZXlcIjogUmVkYWN0ZWQudmFsdWUoYXBpS2V5KSxcbiAgICAgICAgICAgICAgICBcIngtdXBsb2FkdGhpbmctdmVyc2lvblwiOiB2ZXJzaW9uLFxuICAgICAgICAgICAgICAgIFwieC11cGxvYWR0aGluZy1iZS1hZGFwdGVyXCI6IGJlQWRhcHRlcixcbiAgICAgICAgICAgICAgICBcIngtdXBsb2FkdGhpbmctZmUtcGFja2FnZVwiOiBmZVBhY2thZ2VcbiAgICAgICAgICAgIH0pLCBIdHRwQ2xpZW50UmVxdWVzdC5ib2R5SnNvbihwYXlsb2FkKSwgRWZmZWN0LmZsYXRNYXAoaHR0cENsaWVudC5leGVjdXRlKSwgRWZmZWN0LnRhcEVycm9yKGxvZ0h0dHBDbGllbnRFcnJvcihcIkZhaWxlZCB0byByZWdpc3RlciBjYWxsYmFjayByZXN1bHRcIikpLCBFZmZlY3QuZmxhdE1hcChIdHRwQ2xpZW50UmVzcG9uc2Uuc2NoZW1hQm9keUpzb24oQ2FsbGJhY2tSZXN1bHRSZXNwb25zZSkpLCBFZmZlY3QudGFwKEVmZmVjdC5sb2coXCJTZW50IGNhbGxiYWNrIHJlc3VsdCB0byBVcGxvYWRUaGluZ1wiKSksIEVmZmVjdC5zY29wZWQpO1xuICAgICAgICB9KS5waXBlKEVmZmVjdC5pZ25vcmVMb2dnZWQsIEVmZmVjdC5mb3JrRGFlbW9uKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGJvZHk6IG51bGwsXG4gICAgICAgICAgICBmaWJlclxuICAgICAgICB9O1xuICAgIH0pLnBpcGUoRWZmZWN0LndpdGhMb2dTcGFuKFwiaGFuZGxlQ2FsbGJhY2tSZXF1ZXN0XCIpKTtcbmNvbnN0IHJ1blJvdXRlTWlkZGxld2FyZSA9IChvcHRzKT0+RWZmZWN0LmdlbihmdW5jdGlvbiooKSB7XG4gICAgICAgIGNvbnN0IHsganNvbjogeyBmaWxlcywgaW5wdXQgfSwgdXBsb2FkYWJsZSB9ID0gb3B0cztcbiAgICAgICAgeWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhcIlJ1bm5pbmcgbWlkZGxld2FyZVwiKTtcbiAgICAgICAgY29uc3QgYWRhcHRlckFyZ3MgPSB5aWVsZCogQWRhcHRlckFyZ3VtZW50cztcbiAgICAgICAgY29uc3QgbWV0YWRhdGEgPSB5aWVsZCogRWZmZWN0LnRyeVByb21pc2Uoe1xuICAgICAgICAgICAgdHJ5OiBhc3luYyAoKT0+dXBsb2FkYWJsZS5taWRkbGV3YXJlKHtcbiAgICAgICAgICAgICAgICAgICAgLi4uYWRhcHRlckFyZ3MsXG4gICAgICAgICAgICAgICAgICAgIGlucHV0LFxuICAgICAgICAgICAgICAgICAgICBmaWxlc1xuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgY2F0Y2g6IChlcnJvcik9PmVycm9yIGluc3RhbmNlb2YgVXBsb2FkVGhpbmdFcnJvciA/IGVycm9yIDogbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBydW4gbWlkZGxld2FyZVwiLFxuICAgICAgICAgICAgICAgICAgICBjYXVzZTogZXJyb3JcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKG1ldGFkYXRhW1VURmlsZXNdICYmIG1ldGFkYXRhW1VURmlsZXNdLmxlbmd0aCAhPT0gZmlsZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCBtc2cgPSBgRXhwZWN0ZWQgZmlsZXMgb3ZlcnJpZGUgdG8gaGF2ZSB0aGUgc2FtZSBsZW5ndGggYXMgb3JpZ2luYWwgZmlsZXMsIGdvdCAke21ldGFkYXRhW1VURmlsZXNdLmxlbmd0aH0gYnV0IGV4cGVjdGVkICR7ZmlsZXMubGVuZ3RofWA7XG4gICAgICAgICAgICB5aWVsZCogRWZmZWN0LmxvZ0Vycm9yKG1zZyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQqIG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJGaWxlcyBvdmVycmlkZSBtdXN0IGhhdmUgdGhlIHNhbWUgbGVuZ3RoIGFzIGZpbGVzXCIsXG4gICAgICAgICAgICAgICAgY2F1c2U6IG1zZ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQXR0YWNoIGN1c3RvbUlkcyBmcm9tIG1pZGRsZXdhcmUgdG8gdGhlIGZpbGVzXG4gICAgICAgIGNvbnN0IGZpbGVzV2l0aEN1c3RvbUlkcyA9IHlpZWxkKiBFZmZlY3QuZm9yRWFjaChmaWxlcywgKGZpbGUsIGlkeCk9PkVmZmVjdC5nZW4oZnVuY3Rpb24qKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRoZWlycyA9IG1ldGFkYXRhW1VURmlsZXNdPy5baWR4XTtcbiAgICAgICAgICAgICAgICBpZiAodGhlaXJzICYmIHRoZWlycy5zaXplICE9PSBmaWxlLnNpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQqIEVmZmVjdC5sb2dXYXJuaW5nKFwiRmlsZSBzaXplIG1pc21hdGNoLiBSZXZlcnRpbmcgdG8gb3JpZ2luYWwgc2l6ZVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogdGhlaXJzPy5uYW1lID8/IGZpbGUubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgc2l6ZTogZmlsZS5zaXplLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBmaWxlLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgIGN1c3RvbUlkOiB0aGVpcnM/LmN1c3RvbUlkLFxuICAgICAgICAgICAgICAgICAgICBsYXN0TW9kaWZpZWQ6IHRoZWlycz8ubGFzdE1vZGlmaWVkID8/IERhdGUubm93KClcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWV0YWRhdGEsXG4gICAgICAgICAgICBmaWxlc1dpdGhDdXN0b21JZHNcbiAgICAgICAgfTtcbiAgICB9KS5waXBlKEVmZmVjdC53aXRoTG9nU3BhbihcInJ1blJvdXRlTWlkZGxld2FyZVwiKSk7XG5jb25zdCBoYW5kbGVVcGxvYWRBY3Rpb24gPSAob3B0cyk9PkVmZmVjdC5nZW4oZnVuY3Rpb24qKCkge1xuICAgICAgICBjb25zdCBodHRwQ2xpZW50ID0gKHlpZWxkKiBIdHRwQ2xpZW50Lkh0dHBDbGllbnQpLnBpcGUoSHR0cENsaWVudC5maWx0ZXJTdGF0dXNPayk7XG4gICAgICAgIGNvbnN0IHsgdXBsb2FkYWJsZSwgZmVQYWNrYWdlLCBiZUFkYXB0ZXIsIHNsdWcgfSA9IG9wdHM7XG4gICAgICAgIGNvbnN0IGpzb24gPSB5aWVsZCogSHR0cFNlcnZlclJlcXVlc3Quc2NoZW1hQm9keUpzb24oVXBsb2FkQWN0aW9uUGF5bG9hZCk7XG4gICAgICAgIHlpZWxkKiBFZmZlY3QubG9nRGVidWcoXCJIYW5kbGluZyB1cGxvYWQgcmVxdWVzdFwiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJqc29uXCIsIGpzb24pKTtcbiAgICAgICAgLy8gdmFsaWRhdGUgdGhlIGlucHV0XG4gICAgICAgIHlpZWxkKiBFZmZlY3QubG9nRGVidWcoXCJQYXJzaW5nIHVzZXIgaW5wdXRcIik7XG4gICAgICAgIGNvbnN0IHBhcnNlZElucHV0ID0geWllbGQqIEVmZmVjdC50cnlQcm9taXNlKHtcbiAgICAgICAgICAgIHRyeTogKCk9PmdldFBhcnNlRm4odXBsb2FkYWJsZS5pbnB1dFBhcnNlcikoanNvbi5pbnB1dCksXG4gICAgICAgICAgICBjYXRjaDogKGVycm9yKT0+bmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiSW52YWxpZCBpbnB1dFwiLFxuICAgICAgICAgICAgICAgICAgICBjYXVzZTogZXJyb3JcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICB9KTtcbiAgICAgICAgeWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhcIklucHV0IHBhcnNlZCBzdWNjZXNzZnVsbHlcIikucGlwZShFZmZlY3QuYW5ub3RhdGVMb2dzKFwiaW5wdXRcIiwgcGFyc2VkSW5wdXQpKTtcbiAgICAgICAgY29uc3QgeyBtZXRhZGF0YSwgZmlsZXNXaXRoQ3VzdG9tSWRzIH0gPSB5aWVsZCogcnVuUm91dGVNaWRkbGV3YXJlKHtcbiAgICAgICAgICAgIGpzb246IHtcbiAgICAgICAgICAgICAgICBpbnB1dDogcGFyc2VkSW5wdXQsXG4gICAgICAgICAgICAgICAgZmlsZXM6IGpzb24uZmlsZXNcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB1cGxvYWRhYmxlXG4gICAgICAgIH0pO1xuICAgICAgICB5aWVsZCogRWZmZWN0LmxvZ0RlYnVnKFwiUGFyc2luZyByb3V0ZSBjb25maWdcIikucGlwZShFZmZlY3QuYW5ub3RhdGVMb2dzKFwicm91dGVyQ29uZmlnXCIsIHVwbG9hZGFibGUucm91dGVyQ29uZmlnKSk7XG4gICAgICAgIGNvbnN0IHBhcnNlZENvbmZpZyA9IHlpZWxkKiBmaWxsSW5wdXRSb3V0ZUNvbmZpZyh1cGxvYWRhYmxlLnJvdXRlckNvbmZpZykucGlwZShFZmZlY3QuY2F0Y2hUYWcoXCJJbnZhbGlkUm91dGVDb25maWdcIiwgKGVycik9Pm5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJJbnZhbGlkIHJvdXRlIGNvbmZpZ1wiLFxuICAgICAgICAgICAgICAgIGNhdXNlOiBlcnJcbiAgICAgICAgICAgIH0pKSk7XG4gICAgICAgIHlpZWxkKiBFZmZlY3QubG9nRGVidWcoXCJSb3V0ZSBjb25maWcgcGFyc2VkIHN1Y2Nlc3NmdWxseVwiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJyb3V0ZUNvbmZpZ1wiLCBwYXJzZWRDb25maWcpKTtcbiAgICAgICAgeWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhcIlZhbGlkYXRpbmcgZmlsZXMgbWVldCB0aGUgY29uZmlnIHJlcXVpcmVtZW50c1wiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJmaWxlc1wiLCBqc29uLmZpbGVzKSk7XG4gICAgICAgIHlpZWxkKiBhc3NlcnRGaWxlc01lZXRDb25maWcoanNvbi5maWxlcywgcGFyc2VkQ29uZmlnKS5waXBlKEVmZmVjdC5tYXBFcnJvcigoZSk9Pm5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogYEludmFsaWQgY29uZmlnOiAke2UuX3RhZ31gLFxuICAgICAgICAgICAgICAgIGNhdXNlOiBcInJlYXNvblwiIGluIGUgPyBlLnJlYXNvbiA6IGUubWVzc2FnZVxuICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgeWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhcIkZpbGVzIHZhbGlkYXRlZC5cIik7XG4gICAgICAgIGNvbnN0IGZpbGVVcGxvYWRSZXF1ZXN0cyA9IHlpZWxkKiBFZmZlY3QuZm9yRWFjaChmaWxlc1dpdGhDdXN0b21JZHMsIChmaWxlKT0+RWZmZWN0Lm1hcChtYXRjaEZpbGVUeXBlKGZpbGUsIG9iamVjdEtleXMocGFyc2VkQ29uZmlnKSksICh0eXBlKT0+KHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogZmlsZS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBzaXplOiBmaWxlLnNpemUsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGZpbGUudHlwZSB8fCB0eXBlLFxuICAgICAgICAgICAgICAgICAgICBsYXN0TW9kaWZpZWQ6IGZpbGUubGFzdE1vZGlmaWVkLFxuICAgICAgICAgICAgICAgICAgICBjdXN0b21JZDogZmlsZS5jdXN0b21JZCxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudERpc3Bvc2l0aW9uOiBwYXJzZWRDb25maWdbdHlwZV0/LmNvbnRlbnREaXNwb3NpdGlvbiA/PyBcImlubGluZVwiLFxuICAgICAgICAgICAgICAgICAgICBhY2w6IHBhcnNlZENvbmZpZ1t0eXBlXT8uYWNsXG4gICAgICAgICAgICAgICAgfSkpKS5waXBlKEVmZmVjdC5jYXRjaFRhZ3Moe1xuICAgICAgICAgICAgLyoqIFNob3VsZG4ndCBoYXBwZW4gc2luY2UgY29uZmlnIGlzIHZhbGlkYXRlZCBhYm92ZSBzbyBqdXN0IGR5aW5nIGlzIGZpbmUgSSB0aGluayAqLyBJbnZhbGlkRmlsZVR5cGU6IChlKT0+RWZmZWN0LmRpZShlKSxcbiAgICAgICAgICAgIFVua25vd25GaWxlVHlwZTogKGUpPT5FZmZlY3QuZGllKGUpXG4gICAgICAgIH0pKTtcbiAgICAgICAgY29uc3Qgcm91dGVPcHRpb25zID0gdXBsb2FkYWJsZS5yb3V0ZU9wdGlvbnM7XG4gICAgICAgIGNvbnN0IHsgYXBpS2V5LCBhcHBJZCB9ID0geWllbGQqIFVUVG9rZW47XG4gICAgICAgIGNvbnN0IGluZ2VzdFVybCA9IHlpZWxkKiBJbmdlc3RVcmw7XG4gICAgICAgIGNvbnN0IGlzRGV2ID0geWllbGQqIElzRGV2ZWxvcG1lbnQ7XG4gICAgICAgIHlpZWxkKiBFZmZlY3QubG9nRGVidWcoXCJHZW5lcmF0aW5nIHByZXNpZ25lZCBVUkxzXCIpLnBpcGUoRWZmZWN0LmFubm90YXRlTG9ncyhcImZpbGVVcGxvYWRSZXF1ZXN0c1wiLCBmaWxlVXBsb2FkUmVxdWVzdHMpLCBFZmZlY3QuYW5ub3RhdGVMb2dzKFwiaW5nZXN0VXJsXCIsIGluZ2VzdFVybCkpO1xuICAgICAgICBjb25zdCBwcmVzaWduZWRVcmxzID0geWllbGQqIEVmZmVjdC5mb3JFYWNoKGZpbGVVcGxvYWRSZXF1ZXN0cywgKGZpbGUpPT5FZmZlY3QuZ2VuKGZ1bmN0aW9uKigpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSB5aWVsZCogZ2VuZXJhdGVLZXkoZmlsZSwgYXBwSWQsIHJvdXRlT3B0aW9ucy5nZXRGaWxlSGFzaFBhcnRzKTtcbiAgICAgICAgICAgICAgICBjb25zdCB1cmwgPSB5aWVsZCogZ2VuZXJhdGVTaWduZWRVUkwoYCR7aW5nZXN0VXJsfS8ke2tleX1gLCBhcGlLZXksIHtcbiAgICAgICAgICAgICAgICAgICAgdHRsSW5TZWNvbmRzOiByb3V0ZU9wdGlvbnMucHJlc2lnbmVkVVJMVFRMLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcIngtdXQtaWRlbnRpZmllclwiOiBhcHBJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwieC11dC1maWxlLW5hbWVcIjogZmlsZS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ4LXV0LWZpbGUtc2l6ZVwiOiBmaWxlLnNpemUsXG4gICAgICAgICAgICAgICAgICAgICAgICBcIngtdXQtZmlsZS10eXBlXCI6IGZpbGUudHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwieC11dC1zbHVnXCI6IHNsdWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBcIngtdXQtY3VzdG9tLWlkXCI6IGZpbGUuY3VzdG9tSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBcIngtdXQtY29udGVudC1kaXNwb3NpdGlvblwiOiBmaWxlLmNvbnRlbnREaXNwb3NpdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwieC11dC1hY2xcIjogZmlsZS5hY2xcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHVybCxcbiAgICAgICAgICAgICAgICAgICAga2V5XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pLCB7XG4gICAgICAgICAgICBjb25jdXJyZW5jeTogXCJ1bmJvdW5kZWRcIlxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3Qgc2VydmVyUmVxID0geWllbGQqIEh0dHBTZXJ2ZXJSZXF1ZXN0Lkh0dHBTZXJ2ZXJSZXF1ZXN0O1xuICAgICAgICBjb25zdCByZXF1ZXN0VXJsID0geWllbGQqIEh0dHBTZXJ2ZXJSZXF1ZXN0LnRvVVJMKHNlcnZlclJlcSk7XG4gICAgICAgIGNvbnN0IGRldkhvb2tSZXF1ZXN0ID0geWllbGQqIENvbmZpZy5zdHJpbmcoXCJjYWxsYmFja1VybFwiKS5waXBlKENvbmZpZy53aXRoRGVmYXVsdChyZXF1ZXN0VXJsLm9yaWdpbiArIHJlcXVlc3RVcmwucGF0aG5hbWUpLCBFZmZlY3QubWFwKCh1cmwpPT5IdHRwQ2xpZW50UmVxdWVzdC5wb3N0KHVybCkucGlwZShIdHRwQ2xpZW50UmVxdWVzdC5hcHBlbmRVcmxQYXJhbShcInNsdWdcIiwgc2x1ZykpKSk7XG4gICAgICAgIGNvbnN0IG1ldGFkYXRhUmVxdWVzdCA9IEh0dHBDbGllbnRSZXF1ZXN0LnBvc3QoXCIvcm91dGUtbWV0YWRhdGFcIikucGlwZShIdHRwQ2xpZW50UmVxdWVzdC5wcmVwZW5kVXJsKGluZ2VzdFVybCksIEh0dHBDbGllbnRSZXF1ZXN0LnNldEhlYWRlcnMoe1xuICAgICAgICAgICAgXCJ4LXVwbG9hZHRoaW5nLWFwaS1rZXlcIjogUmVkYWN0ZWQudmFsdWUoYXBpS2V5KSxcbiAgICAgICAgICAgIFwieC11cGxvYWR0aGluZy12ZXJzaW9uXCI6IHZlcnNpb24sXG4gICAgICAgICAgICBcIngtdXBsb2FkdGhpbmctYmUtYWRhcHRlclwiOiBiZUFkYXB0ZXIsXG4gICAgICAgICAgICBcIngtdXBsb2FkdGhpbmctZmUtcGFja2FnZVwiOiBmZVBhY2thZ2VcbiAgICAgICAgfSksIEh0dHBDbGllbnRSZXF1ZXN0LmJvZHlKc29uKHtcbiAgICAgICAgICAgIGZpbGVLZXlzOiBwcmVzaWduZWRVcmxzLm1hcCgoeyBrZXkgfSk9PmtleSksXG4gICAgICAgICAgICBtZXRhZGF0YTogbWV0YWRhdGEsXG4gICAgICAgICAgICBpc0RldixcbiAgICAgICAgICAgIGNhbGxiYWNrVXJsOiBkZXZIb29rUmVxdWVzdC51cmwsXG4gICAgICAgICAgICBjYWxsYmFja1NsdWc6IHNsdWcsXG4gICAgICAgICAgICBhd2FpdFNlcnZlckRhdGE6IHJvdXRlT3B0aW9ucy5hd2FpdFNlcnZlckRhdGEgPz8gdHJ1ZVxuICAgICAgICB9KSwgRWZmZWN0LmZsYXRNYXAoaHR0cENsaWVudC5leGVjdXRlKSk7XG4gICAgICAgIGNvbnN0IGhhbmRsZURldlN0cmVhbUVycm9yID0gRWZmZWN0LmZuKFwiaGFuZGxlRGV2U3RyZWFtRXJyb3JcIikoZnVuY3Rpb24qKGVyciwgY2h1bmspIHtcbiAgICAgICAgICAgIGNvbnN0IHNjaGVtYSA9IFNjaGVtYS5wYXJzZUpzb24oU2NoZW1hLlN0cnVjdCh7XG4gICAgICAgICAgICAgICAgZmlsZTogVXBsb2FkZWRGaWxlRGF0YVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgY29uc3QgcGFyc2VkQ2h1bmsgPSB5aWVsZCogU2NoZW1hLmRlY29kZVVua25vd24oc2NoZW1hKShjaHVuayk7XG4gICAgICAgICAgICBjb25zdCBrZXkgPSBwYXJzZWRDaHVuay5maWxlLmtleTtcbiAgICAgICAgICAgIHlpZWxkKiBFZmZlY3QubG9nRXJyb3IoXCJGYWlsZWQgdG8gZm9yd2FyZCBjYWxsYmFjayByZXF1ZXN0IGZyb20gZGV2IHN0cmVhbVwiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3Moe1xuICAgICAgICAgICAgICAgIGZpbGVLZXk6IGtleSxcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyLm1lc3NhZ2VcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGNvbnN0IGh0dHBSZXNwb25zZSA9IHlpZWxkKiBIdHRwQ2xpZW50UmVxdWVzdC5wb3N0KFwiL2NhbGxiYWNrLXJlc3VsdFwiKS5waXBlKEh0dHBDbGllbnRSZXF1ZXN0LnByZXBlbmRVcmwoaW5nZXN0VXJsKSwgSHR0cENsaWVudFJlcXVlc3Quc2V0SGVhZGVycyh7XG4gICAgICAgICAgICAgICAgXCJ4LXVwbG9hZHRoaW5nLWFwaS1rZXlcIjogUmVkYWN0ZWQudmFsdWUoYXBpS2V5KSxcbiAgICAgICAgICAgICAgICBcIngtdXBsb2FkdGhpbmctdmVyc2lvblwiOiB2ZXJzaW9uLFxuICAgICAgICAgICAgICAgIFwieC11cGxvYWR0aGluZy1iZS1hZGFwdGVyXCI6IGJlQWRhcHRlcixcbiAgICAgICAgICAgICAgICBcIngtdXBsb2FkdGhpbmctZmUtcGFja2FnZVwiOiBmZVBhY2thZ2VcbiAgICAgICAgICAgIH0pLCBIdHRwQ2xpZW50UmVxdWVzdC5ib2R5SnNvbih7XG4gICAgICAgICAgICAgICAgZmlsZUtleToga2V5LFxuICAgICAgICAgICAgICAgIGVycm9yOiBgRmFpbGVkIHRvIGZvcndhcmQgY2FsbGJhY2sgcmVxdWVzdCBmcm9tIGRldiBzdHJlYW06ICR7ZXJyLm1lc3NhZ2V9YFxuICAgICAgICAgICAgfSksIEVmZmVjdC5mbGF0TWFwKGh0dHBDbGllbnQuZXhlY3V0ZSkpO1xuICAgICAgICAgICAgeWllbGQqIGxvZ0h0dHBDbGllbnRSZXNwb25zZShcIlJlcG9ydGVkIGNhbGxiYWNrIGVycm9yIHRvIFVwbG9hZFRoaW5nXCIpKGh0dHBSZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBTZW5kIG1ldGFkYXRhIHRvIFVUIHNlcnZlciAobm9uIGJsb2NraW5nIGFzIGEgZGFlbW9uKVxuICAgICAgICAvLyBJbiBkZXYsIGtlZXAgdGhlIHN0cmVhbSBvcGVuIGFuZCBzaW11bGF0ZSB0aGUgY2FsbGJhY2sgcmVxdWVzdHMgYXNcbiAgICAgICAgLy8gZmlsZXMgY29tcGxldGUgdXBsb2FkaW5nXG4gICAgICAgIGNvbnN0IGZpYmVyID0geWllbGQqIEVmZmVjdC5pZihpc0Rldiwge1xuICAgICAgICAgICAgb25UcnVlOiAoKT0+bWV0YWRhdGFSZXF1ZXN0LnBpcGUoRWZmZWN0LnRhcEJvdGgoe1xuICAgICAgICAgICAgICAgICAgICBvblN1Y2Nlc3M6IGxvZ0h0dHBDbGllbnRSZXNwb25zZShcIlJlZ2lzdGVyZWQgbWV0YWRhdGFcIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWl4aW46IFwiTm9uZVwiXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICBvbkZhaWx1cmU6IGxvZ0h0dHBDbGllbnRFcnJvcihcIkZhaWxlZCB0byByZWdpc3RlciBtZXRhZGF0YVwiKVxuICAgICAgICAgICAgICAgIH0pLCBIdHRwQ2xpZW50UmVzcG9uc2Uuc3RyZWFtLCBoYW5kbGVKc29uTGluZVN0cmVhbShNZXRhZGF0YUZldGNoU3RyZWFtUGFydCwgKGNodW5rKT0+ZGV2SG9va1JlcXVlc3QucGlwZShIdHRwQ2xpZW50UmVxdWVzdC5zZXRIZWFkZXJzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidXBsb2FkdGhpbmctaG9va1wiOiBjaHVuay5ob29rLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ4LXVwbG9hZHRoaW5nLXNpZ25hdHVyZVwiOiBjaHVuay5zaWduYXR1cmVcbiAgICAgICAgICAgICAgICAgICAgfSksIEh0dHBDbGllbnRSZXF1ZXN0LnNldEJvZHkoSHR0cEJvZHkudGV4dChjaHVuay5wYXlsb2FkLCBcImFwcGxpY2F0aW9uL2pzb25cIikpLCBodHRwQ2xpZW50LmV4ZWN1dGUsIEVmZmVjdC50YXAobG9nSHR0cENsaWVudFJlc3BvbnNlKFwiU3VjY2Vzc2Z1bGx5IGZvcndhcmRlZCBjYWxsYmFjayByZXF1ZXN0IGZyb20gZGV2IHN0cmVhbVwiKSksIEVmZmVjdC5jYXRjaFRhZyhcIlJlc3BvbnNlRXJyb3JcIiwgKGVycik9PmhhbmRsZURldlN0cmVhbUVycm9yKGVyciwgY2h1bmsucGF5bG9hZCkpLCBFZmZlY3QuYW5ub3RhdGVMb2dzKGNodW5rKSwgRWZmZWN0LmFzVm9pZCwgRWZmZWN0Lmlnbm9yZUxvZ2dlZCwgRWZmZWN0LnNjb3BlZCkpKSxcbiAgICAgICAgICAgIG9uRmFsc2U6ICgpPT5tZXRhZGF0YVJlcXVlc3QucGlwZShFZmZlY3QudGFwQm90aCh7XG4gICAgICAgICAgICAgICAgICAgIG9uU3VjY2VzczogbG9nSHR0cENsaWVudFJlc3BvbnNlKFwiUmVnaXN0ZXJlZCBtZXRhZGF0YVwiKSxcbiAgICAgICAgICAgICAgICAgICAgb25GYWlsdXJlOiBsb2dIdHRwQ2xpZW50RXJyb3IoXCJGYWlsZWQgdG8gcmVnaXN0ZXIgbWV0YWRhdGFcIilcbiAgICAgICAgICAgICAgICB9KSwgRWZmZWN0LmZsYXRNYXAoSHR0cENsaWVudFJlc3BvbnNlLnNjaGVtYUJvZHlKc29uKE1ldGFkYXRhRmV0Y2hSZXNwb25zZSkpLCBFZmZlY3Quc2NvcGVkKVxuICAgICAgICB9KS5waXBlKEVmZmVjdC5mb3JrRGFlbW9uKTtcbiAgICAgICAgY29uc3QgcHJlc2lnbmVkcyA9IHByZXNpZ25lZFVybHMubWFwKChwLCBpKT0+KHtcbiAgICAgICAgICAgICAgICB1cmw6IHAudXJsLFxuICAgICAgICAgICAgICAgIGtleTogcC5rZXksXG4gICAgICAgICAgICAgICAgbmFtZTogZmlsZVVwbG9hZFJlcXVlc3RzW2ldLm5hbWUsXG4gICAgICAgICAgICAgICAgY3VzdG9tSWQ6IGZpbGVVcGxvYWRSZXF1ZXN0c1tpXS5jdXN0b21JZCA/PyBudWxsXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIHlpZWxkKiBFZmZlY3QubG9nSW5mbyhcIlNlbmRpbmcgcHJlc2lnbmVkIFVSTHMgdG8gY2xpZW50XCIpLnBpcGUoRWZmZWN0LmFubm90YXRlTG9ncyhcInByZXNpZ25lZFVybHNcIiwgcHJlc2lnbmVkcykpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYm9keTogcHJlc2lnbmVkcyxcbiAgICAgICAgICAgIGZpYmVyXG4gICAgICAgIH07XG4gICAgfSkucGlwZShFZmZlY3Qud2l0aExvZ1NwYW4oXCJoYW5kbGVVcGxvYWRBY3Rpb25cIikpO1xuXG5leHBvcnQgeyBBZGFwdGVyQXJndW1lbnRzLCBjcmVhdGVSZXF1ZXN0SGFuZGxlciwgbWFrZUFkYXB0ZXJIYW5kbGVyIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/_internal/handler.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/_internal/jsonl.js":
/*!**********************************************************!*\
  !*** ./node_modules/uploadthing/dist/_internal/jsonl.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handleJsonLineStream: () => (/* binding */ handleJsonLineStream)\n/* harmony export */ });\n/* harmony import */ var effect_Effect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! effect/Effect */ \"(rsc)/./node_modules/effect/dist/esm/Effect.js\");\n/* harmony import */ var effect_Schema__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! effect/Schema */ \"(rsc)/./node_modules/effect/dist/esm/Schema.js\");\n/* harmony import */ var effect_Stream__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! effect/Stream */ \"(rsc)/./node_modules/effect/dist/esm/Stream.js\");\n\n\n\n\nconst handleJsonLineStream = (schema, onChunk)=>(stream)=>{\n        let buf = \"\";\n        return stream.pipe(effect_Stream__WEBPACK_IMPORTED_MODULE_0__.decodeText(), effect_Stream__WEBPACK_IMPORTED_MODULE_0__.mapEffect((chunk)=>effect_Effect__WEBPACK_IMPORTED_MODULE_1__.gen(function*() {\n                buf += chunk;\n                // Scan buffer for newlines\n                const parts = buf.split(\"\\n\");\n                const validChunks = [];\n                for (const part of parts){\n                    try {\n                        // Attempt to parse chunk as JSON\n                        validChunks.push(JSON.parse(part));\n                        // Advance buffer if parsing succeeded\n                        buf = buf.slice(part.length + 1);\n                    } catch  {\n                    //\n                    }\n                }\n                yield* effect_Effect__WEBPACK_IMPORTED_MODULE_1__.logDebug(\"Received chunks\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.annotateLogs(\"chunk\", chunk), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.annotateLogs(\"parsedChunks\", validChunks), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.annotateLogs(\"buf\", buf));\n                return validChunks;\n            })), effect_Stream__WEBPACK_IMPORTED_MODULE_0__.mapEffect(effect_Schema__WEBPACK_IMPORTED_MODULE_2__.decodeUnknown(effect_Schema__WEBPACK_IMPORTED_MODULE_2__.Array(schema))), effect_Stream__WEBPACK_IMPORTED_MODULE_0__.mapEffect(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.forEach((part)=>onChunk(part))), effect_Stream__WEBPACK_IMPORTED_MODULE_0__.runDrain, effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"handleJsonLineStream\"));\n    };\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvanNvbmwuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUF3QztBQUNMO0FBQ0s7O0FBRXhDO0FBQ0E7QUFDQSwyQkFBMkIscURBQWlCLElBQUksb0RBQWdCLFVBQVUsOENBQVU7QUFDcEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLG1EQUFlLHlCQUF5Qix1REFBbUIsa0JBQWtCLHVEQUFtQiwrQkFBK0IsdURBQW1CO0FBQ3pLO0FBQ0EsYUFBYSxJQUFJLG9EQUFnQixDQUFDLHdEQUFlLENBQUMsZ0RBQU8sWUFBWSxvREFBZ0IsQ0FBQyxrREFBYywwQkFBMEIsbURBQWUsRUFBRSxzREFBa0I7QUFDaks7O0FBRWdDIiwic291cmNlcyI6WyIvaG9tZS9hbGV4YW5kcmUvRG9jdW1lbnRzL21hc3Rlcl8yL1JOQ1AvYXRobGV0ZS1heGlzL25vZGVfbW9kdWxlcy91cGxvYWR0aGluZy9kaXN0L19pbnRlcm5hbC9qc29ubC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBFZmZlY3QgZnJvbSAnZWZmZWN0L0VmZmVjdCc7XG5pbXBvcnQgKiBhcyBTIGZyb20gJ2VmZmVjdC9TY2hlbWEnO1xuaW1wb3J0ICogYXMgU3RyZWFtIGZyb20gJ2VmZmVjdC9TdHJlYW0nO1xuXG5jb25zdCBoYW5kbGVKc29uTGluZVN0cmVhbSA9IChzY2hlbWEsIG9uQ2h1bmspPT4oc3RyZWFtKT0+e1xuICAgICAgICBsZXQgYnVmID0gXCJcIjtcbiAgICAgICAgcmV0dXJuIHN0cmVhbS5waXBlKFN0cmVhbS5kZWNvZGVUZXh0KCksIFN0cmVhbS5tYXBFZmZlY3QoKGNodW5rKT0+RWZmZWN0LmdlbihmdW5jdGlvbiooKSB7XG4gICAgICAgICAgICAgICAgYnVmICs9IGNodW5rO1xuICAgICAgICAgICAgICAgIC8vIFNjYW4gYnVmZmVyIGZvciBuZXdsaW5lc1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gYnVmLnNwbGl0KFwiXFxuXCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhbGlkQ2h1bmtzID0gW107XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYXJ0IG9mIHBhcnRzKXtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEF0dGVtcHQgdG8gcGFyc2UgY2h1bmsgYXMgSlNPTlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRDaHVua3MucHVzaChKU09OLnBhcnNlKHBhcnQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkdmFuY2UgYnVmZmVyIGlmIHBhcnNpbmcgc3VjY2VlZGVkXG4gICAgICAgICAgICAgICAgICAgICAgICBidWYgPSBidWYuc2xpY2UocGFydC5sZW5ndGggKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAge1xuICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHlpZWxkKiBFZmZlY3QubG9nRGVidWcoXCJSZWNlaXZlZCBjaHVua3NcIikucGlwZShFZmZlY3QuYW5ub3RhdGVMb2dzKFwiY2h1bmtcIiwgY2h1bmspLCBFZmZlY3QuYW5ub3RhdGVMb2dzKFwicGFyc2VkQ2h1bmtzXCIsIHZhbGlkQ2h1bmtzKSwgRWZmZWN0LmFubm90YXRlTG9ncyhcImJ1ZlwiLCBidWYpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsaWRDaHVua3M7XG4gICAgICAgICAgICB9KSksIFN0cmVhbS5tYXBFZmZlY3QoUy5kZWNvZGVVbmtub3duKFMuQXJyYXkoc2NoZW1hKSkpLCBTdHJlYW0ubWFwRWZmZWN0KEVmZmVjdC5mb3JFYWNoKChwYXJ0KT0+b25DaHVuayhwYXJ0KSkpLCBTdHJlYW0ucnVuRHJhaW4sIEVmZmVjdC53aXRoTG9nU3BhbihcImhhbmRsZUpzb25MaW5lU3RyZWFtXCIpKTtcbiAgICB9O1xuXG5leHBvcnQgeyBoYW5kbGVKc29uTGluZVN0cmVhbSB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/_internal/jsonl.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/_internal/logger.js":
/*!***********************************************************!*\
  !*** ./node_modules/uploadthing/dist/_internal/logger.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LogFormat: () => (/* binding */ LogFormat),\n/* harmony export */   logHttpClientError: () => (/* binding */ logHttpClientError),\n/* harmony export */   logHttpClientResponse: () => (/* binding */ logHttpClientResponse),\n/* harmony export */   withLogFormat: () => (/* binding */ withLogFormat),\n/* harmony export */   withMinimalLogLevel: () => (/* binding */ withMinimalLogLevel)\n/* harmony export */ });\n/* harmony import */ var effect_Config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! effect/Config */ \"(rsc)/./node_modules/effect/dist/esm/Config.js\");\n/* harmony import */ var effect_ConfigError__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! effect/ConfigError */ \"(rsc)/./node_modules/effect/dist/esm/ConfigError.js\");\n/* harmony import */ var effect_Effect__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! effect/Effect */ \"(rsc)/./node_modules/effect/dist/esm/Effect.js\");\n/* harmony import */ var effect_Either__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! effect/Either */ \"(rsc)/./node_modules/effect/dist/esm/Either.js\");\n/* harmony import */ var effect_Layer__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! effect/Layer */ \"(rsc)/./node_modules/effect/dist/esm/Layer.js\");\n/* harmony import */ var effect_Logger__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! effect/Logger */ \"(rsc)/./node_modules/effect/dist/esm/Logger.js\");\n/* harmony import */ var effect_LogLevel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! effect/LogLevel */ \"(rsc)/./node_modules/effect/dist/esm/LogLevel.js\");\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @uploadthing/shared */ \"(rsc)/./node_modules/@uploadthing/shared/dist/index.js\");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./config.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/config.js\");\n\n\n\n\n\n\n\n\n\n\n/**\n * Config.logLevel counter-intuitively accepts LogLevel[\"label\"]\n * instead of a literal, ripping it and changing to accept literal\n * Effect 4.0 will change this to accept a literal and then we can\n * remove this and go back to the built-in validator.\n */ const ConfigLogLevel = (name)=>{\n    const config = effect_Config__WEBPACK_IMPORTED_MODULE_0__.mapOrFail(effect_Config__WEBPACK_IMPORTED_MODULE_0__.string(), (literal)=>{\n        const level = effect_LogLevel__WEBPACK_IMPORTED_MODULE_1__.allLevels.find((level)=>level._tag === literal);\n        return level === undefined ? effect_Either__WEBPACK_IMPORTED_MODULE_2__.left(effect_ConfigError__WEBPACK_IMPORTED_MODULE_3__.InvalidData([], `Expected a log level but received ${literal}`)) : effect_Either__WEBPACK_IMPORTED_MODULE_2__.right(level);\n    });\n    return name === undefined ? config : effect_Config__WEBPACK_IMPORTED_MODULE_0__.nested(config, name);\n};\nconst withMinimalLogLevel = ConfigLogLevel(\"logLevel\").pipe(effect_Config__WEBPACK_IMPORTED_MODULE_0__.withDefault(effect_LogLevel__WEBPACK_IMPORTED_MODULE_1__.Info), effect_Effect__WEBPACK_IMPORTED_MODULE_4__.andThen((level)=>effect_Logger__WEBPACK_IMPORTED_MODULE_5__.minimumLogLevel(level)), effect_Effect__WEBPACK_IMPORTED_MODULE_4__.tapError((e)=>effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logError(\"Invalid log level\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_4__.annotateLogs(\"error\", e))), effect_Effect__WEBPACK_IMPORTED_MODULE_4__.catchTag(\"ConfigError\", (e)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n        code: \"INVALID_SERVER_CONFIG\",\n        message: \"Invalid server configuration\",\n        cause: e\n    })), effect_Layer__WEBPACK_IMPORTED_MODULE_7__.unwrapEffect);\nconst LogFormat = effect_Config__WEBPACK_IMPORTED_MODULE_0__.literal(\"json\", \"logFmt\", \"structured\", \"pretty\")(\"logFormat\");\nconst withLogFormat = effect_Effect__WEBPACK_IMPORTED_MODULE_4__.gen(function*() {\n    const isDev = yield* _config_js__WEBPACK_IMPORTED_MODULE_8__.IsDevelopment;\n    const logFormat = yield* LogFormat.pipe(effect_Config__WEBPACK_IMPORTED_MODULE_0__.withDefault(isDev ? \"pretty\" : \"json\"));\n    return effect_Logger__WEBPACK_IMPORTED_MODULE_5__[logFormat];\n}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_4__.catchTag(\"ConfigError\", (e)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n        code: \"INVALID_SERVER_CONFIG\",\n        message: \"Invalid server configuration\",\n        cause: e\n    })), effect_Layer__WEBPACK_IMPORTED_MODULE_7__.unwrapEffect);\nconst logHttpClientResponse = (message, opts)=>{\n    const mixin = opts?.mixin ?? \"json\";\n    const level = effect_LogLevel__WEBPACK_IMPORTED_MODULE_1__.fromLiteral(opts?.level ?? \"Debug\");\n    return (response)=>effect_Effect__WEBPACK_IMPORTED_MODULE_4__.flatMap(mixin !== \"None\" ? response[mixin] : effect_Effect__WEBPACK_IMPORTED_MODULE_4__[\"void\"], ()=>effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logWithLevel(level, `${message} (${response.status})`).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_4__.annotateLogs(\"response\", response)));\n};\nconst logHttpClientError = (message)=>(err)=>err._tag === \"ResponseError\" ? logHttpClientResponse(message, {\n            level: \"Error\"\n        })(err.response) : effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logError(message).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_4__.annotateLogs(\"error\", err));\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvbG9nZ2VyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXdDO0FBQ1U7QUFDVjtBQUNBO0FBQ0Y7QUFDRTtBQUNJO0FBQ1c7QUFDWDs7QUFFNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLG9EQUFnQixDQUFDLGlEQUFhO0FBQ2pELHNCQUFzQixzREFBa0I7QUFDeEMscUNBQXFDLCtDQUFXLENBQUMsMkRBQXVCLDBDQUEwQyxRQUFRLE1BQU0sZ0RBQVk7QUFDNUksS0FBSztBQUNMLHlDQUF5QyxpREFBYTtBQUN0RDtBQUNBLDREQUE0RCxzREFBa0IsQ0FBQyxpREFBYSxHQUFHLGtEQUFjLFVBQVUsMERBQXNCLFVBQVUsbURBQWUsTUFBTSxtREFBZSwyQkFBMkIsdURBQW1CLGdCQUFnQixtREFBZSx5QkFBeUIsaUVBQWdCO0FBQ2pUO0FBQ0E7QUFDQTtBQUNBLEtBQUssSUFBSSxzREFBa0I7QUFDM0Isa0JBQWtCLGtEQUFjO0FBQ2hDLHNCQUFzQiw4Q0FBVTtBQUNoQyx5QkFBeUIscURBQWE7QUFDdEMsNENBQTRDLHNEQUFrQjtBQUM5RCxXQUFXLDBDQUFNO0FBQ2pCLENBQUMsT0FBTyxtREFBZSx5QkFBeUIsaUVBQWdCO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBLEtBQUssSUFBSSxzREFBa0I7QUFDM0I7QUFDQTtBQUNBLGtCQUFrQix3REFBb0I7QUFDdEMsdUJBQXVCLGtEQUFjLHNDQUFzQyxrREFBVyxNQUFNLHVEQUFtQixXQUFXLFNBQVMsR0FBRyxnQkFBZ0IsU0FBUyx1REFBbUI7QUFDbEw7QUFDQTtBQUNBO0FBQ0EsU0FBUyxrQkFBa0IsbURBQWUsZUFBZSx1REFBbUI7O0FBRXdCIiwic291cmNlcyI6WyIvaG9tZS9hbGV4YW5kcmUvRG9jdW1lbnRzL21hc3Rlcl8yL1JOQ1AvYXRobGV0ZS1heGlzL25vZGVfbW9kdWxlcy91cGxvYWR0aGluZy9kaXN0L19pbnRlcm5hbC9sb2dnZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgQ29uZmlnIGZyb20gJ2VmZmVjdC9Db25maWcnO1xuaW1wb3J0ICogYXMgQ29uZmlnRXJyb3IgZnJvbSAnZWZmZWN0L0NvbmZpZ0Vycm9yJztcbmltcG9ydCAqIGFzIEVmZmVjdCBmcm9tICdlZmZlY3QvRWZmZWN0JztcbmltcG9ydCAqIGFzIEVpdGhlciBmcm9tICdlZmZlY3QvRWl0aGVyJztcbmltcG9ydCAqIGFzIExheWVyIGZyb20gJ2VmZmVjdC9MYXllcic7XG5pbXBvcnQgKiBhcyBMb2dnZXIgZnJvbSAnZWZmZWN0L0xvZ2dlcic7XG5pbXBvcnQgKiBhcyBMb2dMZXZlbCBmcm9tICdlZmZlY3QvTG9nTGV2ZWwnO1xuaW1wb3J0IHsgVXBsb2FkVGhpbmdFcnJvciB9IGZyb20gJ0B1cGxvYWR0aGluZy9zaGFyZWQnO1xuaW1wb3J0IHsgSXNEZXZlbG9wbWVudCB9IGZyb20gJy4vY29uZmlnLmpzJztcblxuLyoqXG4gKiBDb25maWcubG9nTGV2ZWwgY291bnRlci1pbnR1aXRpdmVseSBhY2NlcHRzIExvZ0xldmVsW1wibGFiZWxcIl1cbiAqIGluc3RlYWQgb2YgYSBsaXRlcmFsLCByaXBwaW5nIGl0IGFuZCBjaGFuZ2luZyB0byBhY2NlcHQgbGl0ZXJhbFxuICogRWZmZWN0IDQuMCB3aWxsIGNoYW5nZSB0aGlzIHRvIGFjY2VwdCBhIGxpdGVyYWwgYW5kIHRoZW4gd2UgY2FuXG4gKiByZW1vdmUgdGhpcyBhbmQgZ28gYmFjayB0byB0aGUgYnVpbHQtaW4gdmFsaWRhdG9yLlxuICovIGNvbnN0IENvbmZpZ0xvZ0xldmVsID0gKG5hbWUpPT57XG4gICAgY29uc3QgY29uZmlnID0gQ29uZmlnLm1hcE9yRmFpbChDb25maWcuc3RyaW5nKCksIChsaXRlcmFsKT0+e1xuICAgICAgICBjb25zdCBsZXZlbCA9IExvZ0xldmVsLmFsbExldmVscy5maW5kKChsZXZlbCk9PmxldmVsLl90YWcgPT09IGxpdGVyYWwpO1xuICAgICAgICByZXR1cm4gbGV2ZWwgPT09IHVuZGVmaW5lZCA/IEVpdGhlci5sZWZ0KENvbmZpZ0Vycm9yLkludmFsaWREYXRhKFtdLCBgRXhwZWN0ZWQgYSBsb2cgbGV2ZWwgYnV0IHJlY2VpdmVkICR7bGl0ZXJhbH1gKSkgOiBFaXRoZXIucmlnaHQobGV2ZWwpO1xuICAgIH0pO1xuICAgIHJldHVybiBuYW1lID09PSB1bmRlZmluZWQgPyBjb25maWcgOiBDb25maWcubmVzdGVkKGNvbmZpZywgbmFtZSk7XG59O1xuY29uc3Qgd2l0aE1pbmltYWxMb2dMZXZlbCA9IENvbmZpZ0xvZ0xldmVsKFwibG9nTGV2ZWxcIikucGlwZShDb25maWcud2l0aERlZmF1bHQoTG9nTGV2ZWwuSW5mbyksIEVmZmVjdC5hbmRUaGVuKChsZXZlbCk9PkxvZ2dlci5taW5pbXVtTG9nTGV2ZWwobGV2ZWwpKSwgRWZmZWN0LnRhcEVycm9yKChlKT0+RWZmZWN0LmxvZ0Vycm9yKFwiSW52YWxpZCBsb2cgbGV2ZWxcIikucGlwZShFZmZlY3QuYW5ub3RhdGVMb2dzKFwiZXJyb3JcIiwgZSkpKSwgRWZmZWN0LmNhdGNoVGFnKFwiQ29uZmlnRXJyb3JcIiwgKGUpPT5uZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgIGNvZGU6IFwiSU5WQUxJRF9TRVJWRVJfQ09ORklHXCIsXG4gICAgICAgIG1lc3NhZ2U6IFwiSW52YWxpZCBzZXJ2ZXIgY29uZmlndXJhdGlvblwiLFxuICAgICAgICBjYXVzZTogZVxuICAgIH0pKSwgTGF5ZXIudW53cmFwRWZmZWN0KTtcbmNvbnN0IExvZ0Zvcm1hdCA9IENvbmZpZy5saXRlcmFsKFwianNvblwiLCBcImxvZ0ZtdFwiLCBcInN0cnVjdHVyZWRcIiwgXCJwcmV0dHlcIikoXCJsb2dGb3JtYXRcIik7XG5jb25zdCB3aXRoTG9nRm9ybWF0ID0gRWZmZWN0LmdlbihmdW5jdGlvbiooKSB7XG4gICAgY29uc3QgaXNEZXYgPSB5aWVsZCogSXNEZXZlbG9wbWVudDtcbiAgICBjb25zdCBsb2dGb3JtYXQgPSB5aWVsZCogTG9nRm9ybWF0LnBpcGUoQ29uZmlnLndpdGhEZWZhdWx0KGlzRGV2ID8gXCJwcmV0dHlcIiA6IFwianNvblwiKSk7XG4gICAgcmV0dXJuIExvZ2dlcltsb2dGb3JtYXRdO1xufSkucGlwZShFZmZlY3QuY2F0Y2hUYWcoXCJDb25maWdFcnJvclwiLCAoZSk9Pm5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgY29kZTogXCJJTlZBTElEX1NFUlZFUl9DT05GSUdcIixcbiAgICAgICAgbWVzc2FnZTogXCJJbnZhbGlkIHNlcnZlciBjb25maWd1cmF0aW9uXCIsXG4gICAgICAgIGNhdXNlOiBlXG4gICAgfSkpLCBMYXllci51bndyYXBFZmZlY3QpO1xuY29uc3QgbG9nSHR0cENsaWVudFJlc3BvbnNlID0gKG1lc3NhZ2UsIG9wdHMpPT57XG4gICAgY29uc3QgbWl4aW4gPSBvcHRzPy5taXhpbiA/PyBcImpzb25cIjtcbiAgICBjb25zdCBsZXZlbCA9IExvZ0xldmVsLmZyb21MaXRlcmFsKG9wdHM/LmxldmVsID8/IFwiRGVidWdcIik7XG4gICAgcmV0dXJuIChyZXNwb25zZSk9PkVmZmVjdC5mbGF0TWFwKG1peGluICE9PSBcIk5vbmVcIiA/IHJlc3BvbnNlW21peGluXSA6IEVmZmVjdC52b2lkLCAoKT0+RWZmZWN0LmxvZ1dpdGhMZXZlbChsZXZlbCwgYCR7bWVzc2FnZX0gKCR7cmVzcG9uc2Uuc3RhdHVzfSlgKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJyZXNwb25zZVwiLCByZXNwb25zZSkpKTtcbn07XG5jb25zdCBsb2dIdHRwQ2xpZW50RXJyb3IgPSAobWVzc2FnZSk9PihlcnIpPT5lcnIuX3RhZyA9PT0gXCJSZXNwb25zZUVycm9yXCIgPyBsb2dIdHRwQ2xpZW50UmVzcG9uc2UobWVzc2FnZSwge1xuICAgICAgICAgICAgbGV2ZWw6IFwiRXJyb3JcIlxuICAgICAgICB9KShlcnIucmVzcG9uc2UpIDogRWZmZWN0LmxvZ0Vycm9yKG1lc3NhZ2UpLnBpcGUoRWZmZWN0LmFubm90YXRlTG9ncyhcImVycm9yXCIsIGVycikpO1xuXG5leHBvcnQgeyBMb2dGb3JtYXQsIGxvZ0h0dHBDbGllbnRFcnJvciwgbG9nSHR0cENsaWVudFJlc3BvbnNlLCB3aXRoTG9nRm9ybWF0LCB3aXRoTWluaW1hbExvZ0xldmVsIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/_internal/logger.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/_internal/parser.js":
/*!***********************************************************!*\
  !*** ./node_modules/uploadthing/dist/_internal/parser.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ParserError: () => (/* binding */ ParserError),\n/* harmony export */   getParseFn: () => (/* binding */ getParseFn)\n/* harmony export */ });\n/* harmony import */ var effect_Cause__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! effect/Cause */ \"(rsc)/./node_modules/effect/dist/esm/Cause.js\");\n/* harmony import */ var effect_Data__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! effect/Data */ \"(rsc)/./node_modules/effect/dist/esm/Data.js\");\n/* harmony import */ var effect_Runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! effect/Runtime */ \"(rsc)/./node_modules/effect/dist/esm/Runtime.js\");\n/* harmony import */ var effect_Schema__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! effect/Schema */ \"(rsc)/./node_modules/effect/dist/esm/Schema.js\");\n\n\n\n\n\nclass ParserError extends effect_Data__WEBPACK_IMPORTED_MODULE_0__.TaggedError(\"ParserError\") {\n    constructor(...args){\n        super(...args), this.message = \"Input validation failed. The original error with it's validation issues is in the error cause.\";\n    }\n}\nfunction getParseFn(parser) {\n    if (\"parseAsync\" in parser && typeof parser.parseAsync === \"function\") {\n        /**\n     * Zod\n     * TODO (next major): Consider wrapping ZodError in ParserError\n     */ return parser.parseAsync;\n    }\n    if (effect_Schema__WEBPACK_IMPORTED_MODULE_1__.isSchema(parser)) {\n        /**\n     * Effect Schema\n     */ return (value)=>effect_Schema__WEBPACK_IMPORTED_MODULE_1__.decodeUnknownPromise(parser)(value).catch((error)=>{\n                throw new ParserError({\n                    cause: effect_Cause__WEBPACK_IMPORTED_MODULE_2__.squash(error[effect_Runtime__WEBPACK_IMPORTED_MODULE_3__.FiberFailureCauseId])\n                });\n            });\n    }\n    if (\"~standard\" in parser) {\n        /**\n     * Standard Schema\n     * TODO (next major): Consider moving this to the top of the function\n     */ return async (value)=>{\n            const result = await parser[\"~standard\"].validate(value);\n            if (result.issues) {\n                throw new ParserError({\n                    cause: result.issues\n                });\n            }\n            return result.value;\n        };\n    }\n    throw new Error(\"Invalid parser\");\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvcGFyc2VyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFzQztBQUNGO0FBQ007QUFDRjs7QUFFeEMsMEJBQTBCLG9EQUFnQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxtREFBZTtBQUN2QjtBQUNBO0FBQ0Esd0JBQXdCLCtEQUEyQjtBQUNuRDtBQUNBLDJCQUEyQixnREFBWSxPQUFPLCtEQUEyQjtBQUN6RSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFbUMiLCJzb3VyY2VzIjpbIi9ob21lL2FsZXhhbmRyZS9Eb2N1bWVudHMvbWFzdGVyXzIvUk5DUC9hdGhsZXRlLWF4aXMvbm9kZV9tb2R1bGVzL3VwbG9hZHRoaW5nL2Rpc3QvX2ludGVybmFsL3BhcnNlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBDYXVzZSBmcm9tICdlZmZlY3QvQ2F1c2UnO1xuaW1wb3J0ICogYXMgRGF0YSBmcm9tICdlZmZlY3QvRGF0YSc7XG5pbXBvcnQgKiBhcyBSdW50aW1lIGZyb20gJ2VmZmVjdC9SdW50aW1lJztcbmltcG9ydCAqIGFzIFNjaGVtYSBmcm9tICdlZmZlY3QvU2NoZW1hJztcblxuY2xhc3MgUGFyc2VyRXJyb3IgZXh0ZW5kcyBEYXRhLlRhZ2dlZEVycm9yKFwiUGFyc2VyRXJyb3JcIikge1xuICAgIGNvbnN0cnVjdG9yKC4uLmFyZ3Mpe1xuICAgICAgICBzdXBlciguLi5hcmdzKSwgdGhpcy5tZXNzYWdlID0gXCJJbnB1dCB2YWxpZGF0aW9uIGZhaWxlZC4gVGhlIG9yaWdpbmFsIGVycm9yIHdpdGggaXQncyB2YWxpZGF0aW9uIGlzc3VlcyBpcyBpbiB0aGUgZXJyb3IgY2F1c2UuXCI7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0UGFyc2VGbihwYXJzZXIpIHtcbiAgICBpZiAoXCJwYXJzZUFzeW5jXCIgaW4gcGFyc2VyICYmIHR5cGVvZiBwYXJzZXIucGFyc2VBc3luYyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIC8qKlxuICAgICAqIFpvZFxuICAgICAqIFRPRE8gKG5leHQgbWFqb3IpOiBDb25zaWRlciB3cmFwcGluZyBab2RFcnJvciBpbiBQYXJzZXJFcnJvclxuICAgICAqLyByZXR1cm4gcGFyc2VyLnBhcnNlQXN5bmM7XG4gICAgfVxuICAgIGlmIChTY2hlbWEuaXNTY2hlbWEocGFyc2VyKSkge1xuICAgICAgICAvKipcbiAgICAgKiBFZmZlY3QgU2NoZW1hXG4gICAgICovIHJldHVybiAodmFsdWUpPT5TY2hlbWEuZGVjb2RlVW5rbm93blByb21pc2UocGFyc2VyKSh2YWx1ZSkuY2F0Y2goKGVycm9yKT0+e1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBQYXJzZXJFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIGNhdXNlOiBDYXVzZS5zcXVhc2goZXJyb3JbUnVudGltZS5GaWJlckZhaWx1cmVDYXVzZUlkXSlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoXCJ+c3RhbmRhcmRcIiBpbiBwYXJzZXIpIHtcbiAgICAgICAgLyoqXG4gICAgICogU3RhbmRhcmQgU2NoZW1hXG4gICAgICogVE9ETyAobmV4dCBtYWpvcik6IENvbnNpZGVyIG1vdmluZyB0aGlzIHRvIHRoZSB0b3Agb2YgdGhlIGZ1bmN0aW9uXG4gICAgICovIHJldHVybiBhc3luYyAodmFsdWUpPT57XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwYXJzZXJbXCJ+c3RhbmRhcmRcIl0udmFsaWRhdGUodmFsdWUpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdC5pc3N1ZXMpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUGFyc2VyRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBjYXVzZTogcmVzdWx0Lmlzc3Vlc1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC52YWx1ZTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBwYXJzZXJcIik7XG59XG5cbmV4cG9ydCB7IFBhcnNlckVycm9yLCBnZXRQYXJzZUZuIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/_internal/parser.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/_internal/route-config.js":
/*!*****************************************************************!*\
  !*** ./node_modules/uploadthing/dist/_internal/route-config.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   assertFilesMeetConfig: () => (/* binding */ assertFilesMeetConfig),\n/* harmony export */   extractRouterConfig: () => (/* binding */ extractRouterConfig)\n/* harmony export */ });\n/* harmony import */ var effect_Data__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! effect/Data */ \"(rsc)/./node_modules/effect/dist/esm/Data.js\");\n/* harmony import */ var effect_Effect__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! effect/Effect */ \"(rsc)/./node_modules/effect/dist/esm/Effect.js\");\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @uploadthing/shared */ \"(rsc)/./node_modules/@uploadthing/shared/dist/index.js\");\n\n\n\n\nclass FileSizeMismatch extends effect_Data__WEBPACK_IMPORTED_MODULE_0__.Error {\n    constructor(type, max, actual){\n        const reason = `You uploaded a ${type} file that was ${(0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.bytesToFileSize)(actual)}, but the limit for that type is ${max}`;\n        super({\n            reason\n        }), this._tag = \"FileSizeMismatch\", this.name = \"FileSizeMismatchError\";\n    }\n}\nclass FileCountMismatch extends effect_Data__WEBPACK_IMPORTED_MODULE_0__.Error {\n    constructor(type, boundtype, bound, actual){\n        const reason = `You uploaded ${actual} file(s) of type '${type}', but the ${boundtype} for that type is ${bound}`;\n        super({\n            reason\n        }), this._tag = \"FileCountMismatch\", this.name = \"FileCountMismatchError\";\n    }\n}\n// Verify that the uploaded files doesn't violate the route config,\n// e.g. uploading more videos than allowed, or a file that is larger than allowed.\n// This is double-checked on infra side, but we want to fail early to avoid network latency.\nconst assertFilesMeetConfig = (files, routeConfig)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.gen(function*() {\n        const counts = {};\n        for (const file of files){\n            const type = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.matchFileType)(file, (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.objectKeys)(routeConfig));\n            counts[type] = (counts[type] ?? 0) + 1;\n            const sizeLimit = routeConfig[type]?.maxFileSize;\n            if (!sizeLimit) {\n                return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.InvalidRouteConfigError(type, \"maxFileSize\");\n            }\n            const sizeLimitBytes = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.fileSizeToBytes)(sizeLimit);\n            if (file.size > sizeLimitBytes) {\n                return yield* new FileSizeMismatch(type, sizeLimit, file.size);\n            }\n        }\n        for(const _key in counts){\n            const key = _key;\n            const config = routeConfig[key];\n            if (!config) return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.InvalidRouteConfigError(key);\n            const count = counts[key];\n            const min = config.minFileCount;\n            const max = config.maxFileCount;\n            if (min > max) {\n                return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n                    code: \"BAD_REQUEST\",\n                    message: \"Invalid config during file count - minFileCount > maxFileCount\",\n                    cause: `minFileCount must be less than maxFileCount for key ${key}. got: ${min} > ${max}`\n                });\n            }\n            if (count != null && count < min) {\n                return yield* new FileCountMismatch(key, \"minimum\", min, count);\n            }\n            if (count != null && count > max) {\n                return yield* new FileCountMismatch(key, \"maximum\", max, count);\n            }\n        }\n        return null;\n    });\nconst extractRouterConfig = (router)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.forEach((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.objectKeys)(router), (slug)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.map((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.fillInputRouteConfig)(router[slug].routerConfig), (config)=>({\n                slug,\n                config\n            })));\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvcm91dGUtY29uZmlnLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQW9DO0FBQ0k7QUFDMkg7O0FBRW5LLCtCQUErQiw4Q0FBVTtBQUN6QztBQUNBLHlDQUF5QyxNQUFNLGdCQUFnQixvRUFBZSxTQUFTLG1DQUFtQyxJQUFJO0FBQzlIO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLGdDQUFnQyw4Q0FBVTtBQUMxQztBQUNBLHVDQUF1QyxRQUFRLG1CQUFtQixLQUFLLGFBQWEsV0FBVyxtQkFBbUIsTUFBTTtBQUN4SDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvREFBb0QsOENBQVU7QUFDOUQ7QUFDQTtBQUNBLGdDQUFnQyxrRUFBYSxPQUFPLCtEQUFVO0FBQzlEO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyx3RUFBdUI7QUFDekQ7QUFDQSwwQ0FBMEMsb0VBQWU7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsd0VBQXVCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLGlFQUFnQjtBQUNsRDtBQUNBO0FBQ0Esa0ZBQWtGLElBQUksU0FBUyxLQUFLLElBQUksSUFBSTtBQUM1RyxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLHNDQUFzQyxrREFBYyxDQUFDLCtEQUFVLGtCQUFrQiw4Q0FBVSxDQUFDLHlFQUFvQjtBQUNoSDtBQUNBO0FBQ0EsYUFBYTs7QUFFeUMiLCJzb3VyY2VzIjpbIi9ob21lL2FsZXhhbmRyZS9Eb2N1bWVudHMvbWFzdGVyXzIvUk5DUC9hdGhsZXRlLWF4aXMvbm9kZV9tb2R1bGVzL3VwbG9hZHRoaW5nL2Rpc3QvX2ludGVybmFsL3JvdXRlLWNvbmZpZy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBEYXRhIGZyb20gJ2VmZmVjdC9EYXRhJztcbmltcG9ydCAqIGFzIEVmZmVjdCBmcm9tICdlZmZlY3QvRWZmZWN0JztcbmltcG9ydCB7IG1hdGNoRmlsZVR5cGUsIG9iamVjdEtleXMsIEludmFsaWRSb3V0ZUNvbmZpZ0Vycm9yLCBmaWxlU2l6ZVRvQnl0ZXMsIFVwbG9hZFRoaW5nRXJyb3IsIGZpbGxJbnB1dFJvdXRlQ29uZmlnLCBieXRlc1RvRmlsZVNpemUgfSBmcm9tICdAdXBsb2FkdGhpbmcvc2hhcmVkJztcblxuY2xhc3MgRmlsZVNpemVNaXNtYXRjaCBleHRlbmRzIERhdGEuRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKHR5cGUsIG1heCwgYWN0dWFsKXtcbiAgICAgICAgY29uc3QgcmVhc29uID0gYFlvdSB1cGxvYWRlZCBhICR7dHlwZX0gZmlsZSB0aGF0IHdhcyAke2J5dGVzVG9GaWxlU2l6ZShhY3R1YWwpfSwgYnV0IHRoZSBsaW1pdCBmb3IgdGhhdCB0eXBlIGlzICR7bWF4fWA7XG4gICAgICAgIHN1cGVyKHtcbiAgICAgICAgICAgIHJlYXNvblxuICAgICAgICB9KSwgdGhpcy5fdGFnID0gXCJGaWxlU2l6ZU1pc21hdGNoXCIsIHRoaXMubmFtZSA9IFwiRmlsZVNpemVNaXNtYXRjaEVycm9yXCI7XG4gICAgfVxufVxuY2xhc3MgRmlsZUNvdW50TWlzbWF0Y2ggZXh0ZW5kcyBEYXRhLkVycm9yIHtcbiAgICBjb25zdHJ1Y3Rvcih0eXBlLCBib3VuZHR5cGUsIGJvdW5kLCBhY3R1YWwpe1xuICAgICAgICBjb25zdCByZWFzb24gPSBgWW91IHVwbG9hZGVkICR7YWN0dWFsfSBmaWxlKHMpIG9mIHR5cGUgJyR7dHlwZX0nLCBidXQgdGhlICR7Ym91bmR0eXBlfSBmb3IgdGhhdCB0eXBlIGlzICR7Ym91bmR9YDtcbiAgICAgICAgc3VwZXIoe1xuICAgICAgICAgICAgcmVhc29uXG4gICAgICAgIH0pLCB0aGlzLl90YWcgPSBcIkZpbGVDb3VudE1pc21hdGNoXCIsIHRoaXMubmFtZSA9IFwiRmlsZUNvdW50TWlzbWF0Y2hFcnJvclwiO1xuICAgIH1cbn1cbi8vIFZlcmlmeSB0aGF0IHRoZSB1cGxvYWRlZCBmaWxlcyBkb2Vzbid0IHZpb2xhdGUgdGhlIHJvdXRlIGNvbmZpZyxcbi8vIGUuZy4gdXBsb2FkaW5nIG1vcmUgdmlkZW9zIHRoYW4gYWxsb3dlZCwgb3IgYSBmaWxlIHRoYXQgaXMgbGFyZ2VyIHRoYW4gYWxsb3dlZC5cbi8vIFRoaXMgaXMgZG91YmxlLWNoZWNrZWQgb24gaW5mcmEgc2lkZSwgYnV0IHdlIHdhbnQgdG8gZmFpbCBlYXJseSB0byBhdm9pZCBuZXR3b3JrIGxhdGVuY3kuXG5jb25zdCBhc3NlcnRGaWxlc01lZXRDb25maWcgPSAoZmlsZXMsIHJvdXRlQ29uZmlnKT0+RWZmZWN0LmdlbihmdW5jdGlvbiooKSB7XG4gICAgICAgIGNvbnN0IGNvdW50cyA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMpe1xuICAgICAgICAgICAgY29uc3QgdHlwZSA9IHlpZWxkKiBtYXRjaEZpbGVUeXBlKGZpbGUsIG9iamVjdEtleXMocm91dGVDb25maWcpKTtcbiAgICAgICAgICAgIGNvdW50c1t0eXBlXSA9IChjb3VudHNbdHlwZV0gPz8gMCkgKyAxO1xuICAgICAgICAgICAgY29uc3Qgc2l6ZUxpbWl0ID0gcm91dGVDb25maWdbdHlwZV0/Lm1heEZpbGVTaXplO1xuICAgICAgICAgICAgaWYgKCFzaXplTGltaXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geWllbGQqIG5ldyBJbnZhbGlkUm91dGVDb25maWdFcnJvcih0eXBlLCBcIm1heEZpbGVTaXplXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc2l6ZUxpbWl0Qnl0ZXMgPSB5aWVsZCogZmlsZVNpemVUb0J5dGVzKHNpemVMaW1pdCk7XG4gICAgICAgICAgICBpZiAoZmlsZS5zaXplID4gc2l6ZUxpbWl0Qnl0ZXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geWllbGQqIG5ldyBGaWxlU2l6ZU1pc21hdGNoKHR5cGUsIHNpemVMaW1pdCwgZmlsZS5zaXplKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IoY29uc3QgX2tleSBpbiBjb3VudHMpe1xuICAgICAgICAgICAgY29uc3Qga2V5ID0gX2tleTtcbiAgICAgICAgICAgIGNvbnN0IGNvbmZpZyA9IHJvdXRlQ29uZmlnW2tleV07XG4gICAgICAgICAgICBpZiAoIWNvbmZpZykgcmV0dXJuIHlpZWxkKiBuZXcgSW52YWxpZFJvdXRlQ29uZmlnRXJyb3Ioa2V5KTtcbiAgICAgICAgICAgIGNvbnN0IGNvdW50ID0gY291bnRzW2tleV07XG4gICAgICAgICAgICBjb25zdCBtaW4gPSBjb25maWcubWluRmlsZUNvdW50O1xuICAgICAgICAgICAgY29uc3QgbWF4ID0gY29uZmlnLm1heEZpbGVDb3VudDtcbiAgICAgICAgICAgIGlmIChtaW4gPiBtYXgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geWllbGQqIG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogXCJCQURfUkVRVUVTVFwiLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkludmFsaWQgY29uZmlnIGR1cmluZyBmaWxlIGNvdW50IC0gbWluRmlsZUNvdW50ID4gbWF4RmlsZUNvdW50XCIsXG4gICAgICAgICAgICAgICAgICAgIGNhdXNlOiBgbWluRmlsZUNvdW50IG11c3QgYmUgbGVzcyB0aGFuIG1heEZpbGVDb3VudCBmb3Iga2V5ICR7a2V5fS4gZ290OiAke21pbn0gPiAke21heH1gXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY291bnQgIT0gbnVsbCAmJiBjb3VudCA8IG1pbikge1xuICAgICAgICAgICAgICAgIHJldHVybiB5aWVsZCogbmV3IEZpbGVDb3VudE1pc21hdGNoKGtleSwgXCJtaW5pbXVtXCIsIG1pbiwgY291bnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvdW50ICE9IG51bGwgJiYgY291bnQgPiBtYXgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geWllbGQqIG5ldyBGaWxlQ291bnRNaXNtYXRjaChrZXksIFwibWF4aW11bVwiLCBtYXgsIGNvdW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9KTtcbmNvbnN0IGV4dHJhY3RSb3V0ZXJDb25maWcgPSAocm91dGVyKT0+RWZmZWN0LmZvckVhY2gob2JqZWN0S2V5cyhyb3V0ZXIpLCAoc2x1Zyk9PkVmZmVjdC5tYXAoZmlsbElucHV0Um91dGVDb25maWcocm91dGVyW3NsdWddLnJvdXRlckNvbmZpZyksIChjb25maWcpPT4oe1xuICAgICAgICAgICAgICAgIHNsdWcsXG4gICAgICAgICAgICAgICAgY29uZmlnXG4gICAgICAgICAgICB9KSkpO1xuXG5leHBvcnQgeyBhc3NlcnRGaWxlc01lZXRDb25maWcsIGV4dHJhY3RSb3V0ZXJDb25maWcgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/_internal/route-config.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/_internal/runtime.js":
/*!************************************************************!*\
  !*** ./node_modules/uploadthing/dist/_internal/runtime.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   makeRuntime: () => (/* binding */ makeRuntime)\n/* harmony export */ });\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/FetchHttpClient.js\");\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/Headers.js\");\n/* harmony import */ var effect_FiberRef__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! effect/FiberRef */ \"(rsc)/./node_modules/effect/dist/esm/FiberRef.js\");\n/* harmony import */ var effect_Layer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! effect/Layer */ \"(rsc)/./node_modules/effect/dist/esm/Layer.js\");\n/* harmony import */ var effect_ManagedRuntime__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! effect/ManagedRuntime */ \"(rsc)/./node_modules/effect/dist/esm/ManagedRuntime.js\");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./config.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/config.js\");\n/* harmony import */ var _logger_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./logger.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/logger.js\");\n\n\n\n\n\n\n\nconst makeRuntime = (fetch, config)=>{\n    const fetchHttpClient = effect_Layer__WEBPACK_IMPORTED_MODULE_0__.provideMerge(_effect_platform__WEBPACK_IMPORTED_MODULE_1__.layer, effect_Layer__WEBPACK_IMPORTED_MODULE_0__.succeed(_effect_platform__WEBPACK_IMPORTED_MODULE_1__.Fetch, fetch));\n    const withRedactedHeaders = effect_Layer__WEBPACK_IMPORTED_MODULE_0__.effectDiscard(effect_FiberRef__WEBPACK_IMPORTED_MODULE_2__.update(_effect_platform__WEBPACK_IMPORTED_MODULE_3__.currentRedactedNames, (_)=>_.concat([\n            \"x-uploadthing-api-key\"\n        ])));\n    const layer = effect_Layer__WEBPACK_IMPORTED_MODULE_0__.provide(effect_Layer__WEBPACK_IMPORTED_MODULE_0__.mergeAll(_logger_js__WEBPACK_IMPORTED_MODULE_4__.withLogFormat, _logger_js__WEBPACK_IMPORTED_MODULE_4__.withMinimalLogLevel, fetchHttpClient, withRedactedHeaders), effect_Layer__WEBPACK_IMPORTED_MODULE_0__.setConfigProvider((0,_config_js__WEBPACK_IMPORTED_MODULE_5__.configProvider)(config)));\n    return effect_ManagedRuntime__WEBPACK_IMPORTED_MODULE_6__.make(layer);\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvcnVudGltZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUE0RDtBQUNoQjtBQUNOO0FBQ2tCO0FBQ1g7QUFDb0I7O0FBRWpFO0FBQ0EsNEJBQTRCLHNEQUFrQixDQUFDLG1EQUFxQixFQUFFLGlEQUFhLENBQUMsbURBQXFCO0FBQ3pHLGdDQUFnQyx1REFBbUIsQ0FBQyxtREFBZSxDQUFDLGtFQUE0QjtBQUNoRztBQUNBO0FBQ0Esa0JBQWtCLGlEQUFhLENBQUMsa0RBQWMsQ0FBQyxxREFBYSxFQUFFLDJEQUFtQix5Q0FBeUMsMkRBQXVCLENBQUMsMERBQWM7QUFDaEssV0FBVyx1REFBbUI7QUFDOUI7O0FBRXVCIiwic291cmNlcyI6WyIvaG9tZS9hbGV4YW5kcmUvRG9jdW1lbnRzL21hc3Rlcl8yL1JOQ1AvYXRobGV0ZS1heGlzL25vZGVfbW9kdWxlcy91cGxvYWR0aGluZy9kaXN0L19pbnRlcm5hbC9ydW50aW1lLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZldGNoSHR0cENsaWVudCwgSGVhZGVycyB9IGZyb20gJ0BlZmZlY3QvcGxhdGZvcm0nO1xuaW1wb3J0ICogYXMgRmliZXJSZWYgZnJvbSAnZWZmZWN0L0ZpYmVyUmVmJztcbmltcG9ydCAqIGFzIExheWVyIGZyb20gJ2VmZmVjdC9MYXllcic7XG5pbXBvcnQgKiBhcyBNYW5hZ2VkUnVudGltZSBmcm9tICdlZmZlY3QvTWFuYWdlZFJ1bnRpbWUnO1xuaW1wb3J0IHsgY29uZmlnUHJvdmlkZXIgfSBmcm9tICcuL2NvbmZpZy5qcyc7XG5pbXBvcnQgeyB3aXRoTG9nRm9ybWF0LCB3aXRoTWluaW1hbExvZ0xldmVsIH0gZnJvbSAnLi9sb2dnZXIuanMnO1xuXG5jb25zdCBtYWtlUnVudGltZSA9IChmZXRjaCwgY29uZmlnKT0+e1xuICAgIGNvbnN0IGZldGNoSHR0cENsaWVudCA9IExheWVyLnByb3ZpZGVNZXJnZShGZXRjaEh0dHBDbGllbnQubGF5ZXIsIExheWVyLnN1Y2NlZWQoRmV0Y2hIdHRwQ2xpZW50LkZldGNoLCBmZXRjaCkpO1xuICAgIGNvbnN0IHdpdGhSZWRhY3RlZEhlYWRlcnMgPSBMYXllci5lZmZlY3REaXNjYXJkKEZpYmVyUmVmLnVwZGF0ZShIZWFkZXJzLmN1cnJlbnRSZWRhY3RlZE5hbWVzLCAoXyk9Pl8uY29uY2F0KFtcbiAgICAgICAgICAgIFwieC11cGxvYWR0aGluZy1hcGkta2V5XCJcbiAgICAgICAgXSkpKTtcbiAgICBjb25zdCBsYXllciA9IExheWVyLnByb3ZpZGUoTGF5ZXIubWVyZ2VBbGwod2l0aExvZ0Zvcm1hdCwgd2l0aE1pbmltYWxMb2dMZXZlbCwgZmV0Y2hIdHRwQ2xpZW50LCB3aXRoUmVkYWN0ZWRIZWFkZXJzKSwgTGF5ZXIuc2V0Q29uZmlnUHJvdmlkZXIoY29uZmlnUHJvdmlkZXIoY29uZmlnKSkpO1xuICAgIHJldHVybiBNYW5hZ2VkUnVudGltZS5tYWtlKGxheWVyKTtcbn07XG5cbmV4cG9ydCB7IG1ha2VSdW50aW1lIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/_internal/runtime.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/_internal/shared-schemas.js":
/*!*******************************************************************!*\
  !*** ./node_modules/uploadthing/dist/_internal/shared-schemas.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ACLSchema: () => (/* binding */ ACLSchema),\n/* harmony export */   ActionType: () => (/* binding */ ActionType),\n/* harmony export */   CallbackResultResponse: () => (/* binding */ CallbackResultResponse),\n/* harmony export */   ContentDispositionSchema: () => (/* binding */ ContentDispositionSchema),\n/* harmony export */   FileUploadData: () => (/* binding */ FileUploadData),\n/* harmony export */   FileUploadDataWithCustomId: () => (/* binding */ FileUploadDataWithCustomId),\n/* harmony export */   MetadataFetchResponse: () => (/* binding */ MetadataFetchResponse),\n/* harmony export */   MetadataFetchStreamPart: () => (/* binding */ MetadataFetchStreamPart),\n/* harmony export */   NewPresignedUrl: () => (/* binding */ NewPresignedUrl),\n/* harmony export */   ParsedToken: () => (/* binding */ ParsedToken),\n/* harmony export */   UploadActionPayload: () => (/* binding */ UploadActionPayload),\n/* harmony export */   UploadThingHook: () => (/* binding */ UploadThingHook),\n/* harmony export */   UploadThingToken: () => (/* binding */ UploadThingToken),\n/* harmony export */   UploadedFileData: () => (/* binding */ UploadedFileData)\n/* harmony export */ });\n/* harmony import */ var effect_Schema__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! effect/Schema */ \"(rsc)/./node_modules/effect/dist/esm/Schema.js\");\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @uploadthing/shared */ \"(rsc)/./node_modules/@uploadthing/shared/dist/index.js\");\n\n\n\nconst ContentDispositionSchema = effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Literal(..._uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.ValidContentDispositions);\nconst ACLSchema = effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Literal(..._uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.ValidACLs);\n/**\n * Valid options for the `?actionType` query param\n */ const ActionType = effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Literal(\"upload\");\n/**\n * Valid options for the `uploadthing-hook` header\n * for requests coming from UT server\n */ const UploadThingHook = effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Literal(\"callback\", \"error\");\n/**\n * =============================================================================\n * =========================== Configuration ===================================\n * =============================================================================\n */ const DecodeString = effect_Schema__WEBPACK_IMPORTED_MODULE_0__.transform(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Uint8ArrayFromSelf, effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String, {\n    decode: (data)=>new TextDecoder().decode(data),\n    encode: (data)=>new TextEncoder().encode(data)\n});\nconst ParsedToken = effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Struct({\n    apiKey: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Redacted(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.startsWith(\"sk_\"))),\n    appId: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n    regions: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.NonEmptyArray(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String),\n    ingestHost: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.optionalWith({\n        default: ()=>\"ingest.uploadthing.com\"\n    }))\n});\nconst UploadThingToken = effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Uint8ArrayFromBase64.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.compose(DecodeString), effect_Schema__WEBPACK_IMPORTED_MODULE_0__.compose(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.parseJson(ParsedToken)));\n/**\n * =============================================================================\n * ======================== File Type Hierarchy ===============================\n * =============================================================================\n */ /**\n * Properties from the web File object, this is what the client sends when initiating an upload\n */ class FileUploadData extends effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Class(\"FileUploadData\")({\n    name: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n    size: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Number,\n    type: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n    lastModified: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Number.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.optional)\n}) {\n}\n/**\n * `.middleware()` can add a customId to the incoming file data\n */ class FileUploadDataWithCustomId extends FileUploadData.extend(\"FileUploadDataWithCustomId\")({\n    customId: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.NullOr(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String)\n}) {\n}\n/**\n * When files are uploaded, we get back\n * - a key\n * - URLs for the file\n * - the hash (md5-hex) of the uploaded file's contents\n */ class UploadedFileData extends FileUploadDataWithCustomId.extend(\"UploadedFileData\")({\n    key: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n    /**\n   * @deprecated\n   * This field will be removed in uploadthing v9. Use `ufsUrl` instead.\n   */ url: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n    /**\n   * @deprecated\n   * This field will be removed in uploadthing v9. Use `ufsUrl` instead.\n   */ appUrl: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n    ufsUrl: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n    fileHash: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String\n}) {\n}\n/**\n * =============================================================================\n * ======================== Server Response Schemas ============================\n * =============================================================================\n */ class NewPresignedUrl extends effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Class(\"NewPresignedUrl\")({\n    url: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n    key: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n    customId: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.NullOr(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String),\n    name: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String\n}) {\n}\nclass MetadataFetchStreamPart extends effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Class(\"MetadataFetchStreamPart\")({\n    payload: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n    signature: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n    hook: UploadThingHook\n}) {\n}\nclass MetadataFetchResponse extends effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Class(\"MetadataFetchResponse\")({\n    ok: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Boolean\n}) {\n}\nclass CallbackResultResponse extends effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Class(\"CallbackResultResponse\")({\n    ok: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Boolean\n}) {\n}\n/**\n * =============================================================================\n * ======================== Client Action Payloads ============================\n * =============================================================================\n */ class UploadActionPayload extends effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Class(\"UploadActionPayload\")({\n    files: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Array(FileUploadData),\n    input: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Unknown\n}) {\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvc2hhcmVkLXNjaGVtYXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFtQztBQUN1Qzs7QUFFMUUsaUNBQWlDLGtEQUFTLElBQUkseUVBQXdCO0FBQ3RFLGtCQUFrQixrREFBUyxJQUFJLDBEQUFTO0FBQ3hDO0FBQ0E7QUFDQSx1QkFBdUIsa0RBQVM7QUFDaEM7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGtEQUFTO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLG9EQUFXLENBQUMsNkRBQW9CLEVBQUUsaURBQVE7QUFDbkU7QUFDQTtBQUNBLENBQUM7QUFDRCxvQkFBb0IsaURBQVE7QUFDNUIsWUFBWSxtREFBVSxDQUFDLGlEQUFRLE1BQU0scURBQVk7QUFDakQsV0FBVyxpREFBUTtBQUNuQixhQUFhLHdEQUFlLENBQUMsaURBQVE7QUFDckMsZ0JBQWdCLGlEQUFRLE1BQU0sdURBQWM7QUFDNUM7QUFDQSxLQUFLO0FBQ0wsQ0FBQztBQUNELHlCQUF5QiwrREFBc0IsTUFBTSxrREFBUyxnQkFBZ0Isa0RBQVMsQ0FBQyxvREFBVztBQUNuRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsZ0RBQU87QUFDeEMsVUFBVSxpREFBUTtBQUNsQixVQUFVLGlEQUFRO0FBQ2xCLFVBQVUsaURBQVE7QUFDbEIsa0JBQWtCLGlEQUFRLE1BQU0sbURBQVU7QUFDMUMsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxpREFBUSxDQUFDLGlEQUFRO0FBQy9CLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsaURBQVE7QUFDakI7QUFDQTtBQUNBO0FBQ0EsV0FBVyxpREFBUTtBQUNuQjtBQUNBO0FBQ0E7QUFDQSxjQUFjLGlEQUFRO0FBQ3RCLFlBQVksaURBQVE7QUFDcEIsY0FBYyxpREFBUTtBQUN0QixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxnREFBTztBQUN6QyxTQUFTLGlEQUFRO0FBQ2pCLFNBQVMsaURBQVE7QUFDakIsY0FBYyxpREFBUSxDQUFDLGlEQUFRO0FBQy9CLFVBQVUsaURBQVE7QUFDbEIsQ0FBQztBQUNEO0FBQ0Esc0NBQXNDLGdEQUFPO0FBQzdDLGFBQWEsaURBQVE7QUFDckIsZUFBZSxpREFBUTtBQUN2QjtBQUNBLENBQUM7QUFDRDtBQUNBLG9DQUFvQyxnREFBTztBQUMzQyxRQUFRLGtEQUFTO0FBQ2pCLENBQUM7QUFDRDtBQUNBLHFDQUFxQyxnREFBTztBQUM1QyxRQUFRLGtEQUFTO0FBQ2pCLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLGdEQUFPO0FBQzdDLFdBQVcsZ0RBQU87QUFDbEIsV0FBVyxrREFBUztBQUNwQixDQUFDO0FBQ0Q7O0FBRXVSIiwic291cmNlcyI6WyIvaG9tZS9hbGV4YW5kcmUvRG9jdW1lbnRzL21hc3Rlcl8yL1JOQ1AvYXRobGV0ZS1heGlzL25vZGVfbW9kdWxlcy91cGxvYWR0aGluZy9kaXN0L19pbnRlcm5hbC9zaGFyZWQtc2NoZW1hcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBTIGZyb20gJ2VmZmVjdC9TY2hlbWEnO1xuaW1wb3J0IHsgVmFsaWRDb250ZW50RGlzcG9zaXRpb25zLCBWYWxpZEFDTHMgfSBmcm9tICdAdXBsb2FkdGhpbmcvc2hhcmVkJztcblxuY29uc3QgQ29udGVudERpc3Bvc2l0aW9uU2NoZW1hID0gUy5MaXRlcmFsKC4uLlZhbGlkQ29udGVudERpc3Bvc2l0aW9ucyk7XG5jb25zdCBBQ0xTY2hlbWEgPSBTLkxpdGVyYWwoLi4uVmFsaWRBQ0xzKTtcbi8qKlxuICogVmFsaWQgb3B0aW9ucyBmb3IgdGhlIGA/YWN0aW9uVHlwZWAgcXVlcnkgcGFyYW1cbiAqLyBjb25zdCBBY3Rpb25UeXBlID0gUy5MaXRlcmFsKFwidXBsb2FkXCIpO1xuLyoqXG4gKiBWYWxpZCBvcHRpb25zIGZvciB0aGUgYHVwbG9hZHRoaW5nLWhvb2tgIGhlYWRlclxuICogZm9yIHJlcXVlc3RzIGNvbWluZyBmcm9tIFVUIHNlcnZlclxuICovIGNvbnN0IFVwbG9hZFRoaW5nSG9vayA9IFMuTGl0ZXJhbChcImNhbGxiYWNrXCIsIFwiZXJyb3JcIik7XG4vKipcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT0gQ29uZmlndXJhdGlvbiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqLyBjb25zdCBEZWNvZGVTdHJpbmcgPSBTLnRyYW5zZm9ybShTLlVpbnQ4QXJyYXlGcm9tU2VsZiwgUy5TdHJpbmcsIHtcbiAgICBkZWNvZGU6IChkYXRhKT0+bmV3IFRleHREZWNvZGVyKCkuZGVjb2RlKGRhdGEpLFxuICAgIGVuY29kZTogKGRhdGEpPT5uZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoZGF0YSlcbn0pO1xuY29uc3QgUGFyc2VkVG9rZW4gPSBTLlN0cnVjdCh7XG4gICAgYXBpS2V5OiBTLlJlZGFjdGVkKFMuU3RyaW5nLnBpcGUoUy5zdGFydHNXaXRoKFwic2tfXCIpKSksXG4gICAgYXBwSWQ6IFMuU3RyaW5nLFxuICAgIHJlZ2lvbnM6IFMuTm9uRW1wdHlBcnJheShTLlN0cmluZyksXG4gICAgaW5nZXN0SG9zdDogUy5TdHJpbmcucGlwZShTLm9wdGlvbmFsV2l0aCh7XG4gICAgICAgIGRlZmF1bHQ6ICgpPT5cImluZ2VzdC51cGxvYWR0aGluZy5jb21cIlxuICAgIH0pKVxufSk7XG5jb25zdCBVcGxvYWRUaGluZ1Rva2VuID0gUy5VaW50OEFycmF5RnJvbUJhc2U2NC5waXBlKFMuY29tcG9zZShEZWNvZGVTdHJpbmcpLCBTLmNvbXBvc2UoUy5wYXJzZUpzb24oUGFyc2VkVG9rZW4pKSk7XG4vKipcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT0gRmlsZSBUeXBlIEhpZXJhcmNoeSA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovIC8qKlxuICogUHJvcGVydGllcyBmcm9tIHRoZSB3ZWIgRmlsZSBvYmplY3QsIHRoaXMgaXMgd2hhdCB0aGUgY2xpZW50IHNlbmRzIHdoZW4gaW5pdGlhdGluZyBhbiB1cGxvYWRcbiAqLyBjbGFzcyBGaWxlVXBsb2FkRGF0YSBleHRlbmRzIFMuQ2xhc3MoXCJGaWxlVXBsb2FkRGF0YVwiKSh7XG4gICAgbmFtZTogUy5TdHJpbmcsXG4gICAgc2l6ZTogUy5OdW1iZXIsXG4gICAgdHlwZTogUy5TdHJpbmcsXG4gICAgbGFzdE1vZGlmaWVkOiBTLk51bWJlci5waXBlKFMub3B0aW9uYWwpXG59KSB7XG59XG4vKipcbiAqIGAubWlkZGxld2FyZSgpYCBjYW4gYWRkIGEgY3VzdG9tSWQgdG8gdGhlIGluY29taW5nIGZpbGUgZGF0YVxuICovIGNsYXNzIEZpbGVVcGxvYWREYXRhV2l0aEN1c3RvbUlkIGV4dGVuZHMgRmlsZVVwbG9hZERhdGEuZXh0ZW5kKFwiRmlsZVVwbG9hZERhdGFXaXRoQ3VzdG9tSWRcIikoe1xuICAgIGN1c3RvbUlkOiBTLk51bGxPcihTLlN0cmluZylcbn0pIHtcbn1cbi8qKlxuICogV2hlbiBmaWxlcyBhcmUgdXBsb2FkZWQsIHdlIGdldCBiYWNrXG4gKiAtIGEga2V5XG4gKiAtIFVSTHMgZm9yIHRoZSBmaWxlXG4gKiAtIHRoZSBoYXNoIChtZDUtaGV4KSBvZiB0aGUgdXBsb2FkZWQgZmlsZSdzIGNvbnRlbnRzXG4gKi8gY2xhc3MgVXBsb2FkZWRGaWxlRGF0YSBleHRlbmRzIEZpbGVVcGxvYWREYXRhV2l0aEN1c3RvbUlkLmV4dGVuZChcIlVwbG9hZGVkRmlsZURhdGFcIikoe1xuICAgIGtleTogUy5TdHJpbmcsXG4gICAgLyoqXG4gICAqIEBkZXByZWNhdGVkXG4gICAqIFRoaXMgZmllbGQgd2lsbCBiZSByZW1vdmVkIGluIHVwbG9hZHRoaW5nIHY5LiBVc2UgYHVmc1VybGAgaW5zdGVhZC5cbiAgICovIHVybDogUy5TdHJpbmcsXG4gICAgLyoqXG4gICAqIEBkZXByZWNhdGVkXG4gICAqIFRoaXMgZmllbGQgd2lsbCBiZSByZW1vdmVkIGluIHVwbG9hZHRoaW5nIHY5LiBVc2UgYHVmc1VybGAgaW5zdGVhZC5cbiAgICovIGFwcFVybDogUy5TdHJpbmcsXG4gICAgdWZzVXJsOiBTLlN0cmluZyxcbiAgICBmaWxlSGFzaDogUy5TdHJpbmdcbn0pIHtcbn1cbi8qKlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqID09PT09PT09PT09PT09PT09PT09PT09PSBTZXJ2ZXIgUmVzcG9uc2UgU2NoZW1hcyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovIGNsYXNzIE5ld1ByZXNpZ25lZFVybCBleHRlbmRzIFMuQ2xhc3MoXCJOZXdQcmVzaWduZWRVcmxcIikoe1xuICAgIHVybDogUy5TdHJpbmcsXG4gICAga2V5OiBTLlN0cmluZyxcbiAgICBjdXN0b21JZDogUy5OdWxsT3IoUy5TdHJpbmcpLFxuICAgIG5hbWU6IFMuU3RyaW5nXG59KSB7XG59XG5jbGFzcyBNZXRhZGF0YUZldGNoU3RyZWFtUGFydCBleHRlbmRzIFMuQ2xhc3MoXCJNZXRhZGF0YUZldGNoU3RyZWFtUGFydFwiKSh7XG4gICAgcGF5bG9hZDogUy5TdHJpbmcsXG4gICAgc2lnbmF0dXJlOiBTLlN0cmluZyxcbiAgICBob29rOiBVcGxvYWRUaGluZ0hvb2tcbn0pIHtcbn1cbmNsYXNzIE1ldGFkYXRhRmV0Y2hSZXNwb25zZSBleHRlbmRzIFMuQ2xhc3MoXCJNZXRhZGF0YUZldGNoUmVzcG9uc2VcIikoe1xuICAgIG9rOiBTLkJvb2xlYW5cbn0pIHtcbn1cbmNsYXNzIENhbGxiYWNrUmVzdWx0UmVzcG9uc2UgZXh0ZW5kcyBTLkNsYXNzKFwiQ2FsbGJhY2tSZXN1bHRSZXNwb25zZVwiKSh7XG4gICAgb2s6IFMuQm9vbGVhblxufSkge1xufVxuLyoqXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogPT09PT09PT09PT09PT09PT09PT09PT09IENsaWVudCBBY3Rpb24gUGF5bG9hZHMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqLyBjbGFzcyBVcGxvYWRBY3Rpb25QYXlsb2FkIGV4dGVuZHMgUy5DbGFzcyhcIlVwbG9hZEFjdGlvblBheWxvYWRcIikoe1xuICAgIGZpbGVzOiBTLkFycmF5KEZpbGVVcGxvYWREYXRhKSxcbiAgICBpbnB1dDogUy5Vbmtub3duXG59KSB7XG59XG5cbmV4cG9ydCB7IEFDTFNjaGVtYSwgQWN0aW9uVHlwZSwgQ2FsbGJhY2tSZXN1bHRSZXNwb25zZSwgQ29udGVudERpc3Bvc2l0aW9uU2NoZW1hLCBGaWxlVXBsb2FkRGF0YSwgRmlsZVVwbG9hZERhdGFXaXRoQ3VzdG9tSWQsIE1ldGFkYXRhRmV0Y2hSZXNwb25zZSwgTWV0YWRhdGFGZXRjaFN0cmVhbVBhcnQsIE5ld1ByZXNpZ25lZFVybCwgUGFyc2VkVG9rZW4sIFVwbG9hZEFjdGlvblBheWxvYWQsIFVwbG9hZFRoaW5nSG9vaywgVXBsb2FkVGhpbmdUb2tlbiwgVXBsb2FkZWRGaWxlRGF0YSB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/_internal/shared-schemas.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/_internal/types.js":
/*!**********************************************************!*\
  !*** ./node_modules/uploadthing/dist/_internal/types.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UTFiles: () => (/* binding */ UTFiles)\n/* harmony export */ });\n/**\n * Marker used to append a `customId` to the incoming file data in `.middleware()`\n * @example\n * ```ts\n * .middleware((opts) => {\n *   return {\n *     [UTFiles]: opts.files.map((file) => ({\n *       ...file,\n *       customId: generateId(),\n *     }))\n *   };\n * })\n * ```\n */ const UTFiles = Symbol(\"uploadthing-custom-id-symbol\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvdHlwZXMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVtQiIsInNvdXJjZXMiOlsiL2hvbWUvYWxleGFuZHJlL0RvY3VtZW50cy9tYXN0ZXJfMi9STkNQL2F0aGxldGUtYXhpcy9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvdHlwZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBNYXJrZXIgdXNlZCB0byBhcHBlbmQgYSBgY3VzdG9tSWRgIHRvIHRoZSBpbmNvbWluZyBmaWxlIGRhdGEgaW4gYC5taWRkbGV3YXJlKClgXG4gKiBAZXhhbXBsZVxuICogYGBgdHNcbiAqIC5taWRkbGV3YXJlKChvcHRzKSA9PiB7XG4gKiAgIHJldHVybiB7XG4gKiAgICAgW1VURmlsZXNdOiBvcHRzLmZpbGVzLm1hcCgoZmlsZSkgPT4gKHtcbiAqICAgICAgIC4uLmZpbGUsXG4gKiAgICAgICBjdXN0b21JZDogZ2VuZXJhdGVJZCgpLFxuICogICAgIH0pKVxuICogICB9O1xuICogfSlcbiAqIGBgYFxuICovIGNvbnN0IFVURmlsZXMgPSBTeW1ib2woXCJ1cGxvYWR0aGluZy1jdXN0b20taWQtc3ltYm9sXCIpO1xuXG5leHBvcnQgeyBVVEZpbGVzIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/_internal/types.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/_internal/upload-builder.js":
/*!*******************************************************************!*\
  !*** ./node_modules/uploadthing/dist/_internal/upload-builder.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createBuilder: () => (/* binding */ createBuilder)\n/* harmony export */ });\n/* harmony import */ var _error_formatter_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./error-formatter.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/error-formatter.js\");\n\n\nfunction internalCreateBuilder(initDef = {}) {\n    const _def = {\n        $types: {},\n        // Default router config\n        routerConfig: {\n            image: {\n                maxFileSize: \"4MB\"\n            }\n        },\n        routeOptions: {\n            awaitServerData: true\n        },\n        inputParser: {\n            parseAsync: ()=>Promise.resolve(undefined),\n            _input: undefined,\n            _output: undefined\n        },\n        middleware: ()=>({}),\n        onUploadError: ()=>{\n        // noop\n        },\n        onUploadComplete: ()=>undefined,\n        errorFormatter: initDef.errorFormatter ?? _error_formatter_js__WEBPACK_IMPORTED_MODULE_0__.defaultErrorFormatter,\n        // Overload with properties passed in\n        ...initDef\n    };\n    return {\n        input (userParser) {\n            return internalCreateBuilder({\n                ..._def,\n                inputParser: userParser\n            });\n        },\n        middleware (userMiddleware) {\n            return internalCreateBuilder({\n                ..._def,\n                middleware: userMiddleware\n            });\n        },\n        onUploadComplete (userUploadComplete) {\n            return {\n                ..._def,\n                onUploadComplete: userUploadComplete\n            };\n        },\n        onUploadError (userOnUploadError) {\n            return internalCreateBuilder({\n                ..._def,\n                onUploadError: userOnUploadError\n            });\n        }\n    };\n}\n/**\n * Create a builder for your backend adapter.\n * Refer to the existing adapters for examples on how to use this function.\n * @public\n *\n * @param opts - Options for the builder\n * @returns A file route builder for making UploadThing file routes\n */ function createBuilder(opts) {\n    return (input, config)=>{\n        return internalCreateBuilder({\n            routerConfig: input,\n            routeOptions: config ?? {},\n            ...opts\n        });\n    };\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvdXBsb2FkLWJ1aWxkZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBNkQ7O0FBRTdELDJDQUEyQztBQUMzQztBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxrREFBa0Qsc0VBQXFCO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFeUIiLCJzb3VyY2VzIjpbIi9ob21lL2FsZXhhbmRyZS9Eb2N1bWVudHMvbWFzdGVyXzIvUk5DUC9hdGhsZXRlLWF4aXMvbm9kZV9tb2R1bGVzL3VwbG9hZHRoaW5nL2Rpc3QvX2ludGVybmFsL3VwbG9hZC1idWlsZGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRlZmF1bHRFcnJvckZvcm1hdHRlciB9IGZyb20gJy4vZXJyb3ItZm9ybWF0dGVyLmpzJztcblxuZnVuY3Rpb24gaW50ZXJuYWxDcmVhdGVCdWlsZGVyKGluaXREZWYgPSB7fSkge1xuICAgIGNvbnN0IF9kZWYgPSB7XG4gICAgICAgICR0eXBlczoge30sXG4gICAgICAgIC8vIERlZmF1bHQgcm91dGVyIGNvbmZpZ1xuICAgICAgICByb3V0ZXJDb25maWc6IHtcbiAgICAgICAgICAgIGltYWdlOiB7XG4gICAgICAgICAgICAgICAgbWF4RmlsZVNpemU6IFwiNE1CXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcm91dGVPcHRpb25zOiB7XG4gICAgICAgICAgICBhd2FpdFNlcnZlckRhdGE6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgaW5wdXRQYXJzZXI6IHtcbiAgICAgICAgICAgIHBhcnNlQXN5bmM6ICgpPT5Qcm9taXNlLnJlc29sdmUodW5kZWZpbmVkKSxcbiAgICAgICAgICAgIF9pbnB1dDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgX291dHB1dDogdW5kZWZpbmVkXG4gICAgICAgIH0sXG4gICAgICAgIG1pZGRsZXdhcmU6ICgpPT4oe30pLFxuICAgICAgICBvblVwbG9hZEVycm9yOiAoKT0+e1xuICAgICAgICAvLyBub29wXG4gICAgICAgIH0sXG4gICAgICAgIG9uVXBsb2FkQ29tcGxldGU6ICgpPT51bmRlZmluZWQsXG4gICAgICAgIGVycm9yRm9ybWF0dGVyOiBpbml0RGVmLmVycm9yRm9ybWF0dGVyID8/IGRlZmF1bHRFcnJvckZvcm1hdHRlcixcbiAgICAgICAgLy8gT3ZlcmxvYWQgd2l0aCBwcm9wZXJ0aWVzIHBhc3NlZCBpblxuICAgICAgICAuLi5pbml0RGVmXG4gICAgfTtcbiAgICByZXR1cm4ge1xuICAgICAgICBpbnB1dCAodXNlclBhcnNlcikge1xuICAgICAgICAgICAgcmV0dXJuIGludGVybmFsQ3JlYXRlQnVpbGRlcih7XG4gICAgICAgICAgICAgICAgLi4uX2RlZixcbiAgICAgICAgICAgICAgICBpbnB1dFBhcnNlcjogdXNlclBhcnNlclxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIG1pZGRsZXdhcmUgKHVzZXJNaWRkbGV3YXJlKSB7XG4gICAgICAgICAgICByZXR1cm4gaW50ZXJuYWxDcmVhdGVCdWlsZGVyKHtcbiAgICAgICAgICAgICAgICAuLi5fZGVmLFxuICAgICAgICAgICAgICAgIG1pZGRsZXdhcmU6IHVzZXJNaWRkbGV3YXJlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgb25VcGxvYWRDb21wbGV0ZSAodXNlclVwbG9hZENvbXBsZXRlKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIC4uLl9kZWYsXG4gICAgICAgICAgICAgICAgb25VcGxvYWRDb21wbGV0ZTogdXNlclVwbG9hZENvbXBsZXRlXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBvblVwbG9hZEVycm9yICh1c2VyT25VcGxvYWRFcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIGludGVybmFsQ3JlYXRlQnVpbGRlcih7XG4gICAgICAgICAgICAgICAgLi4uX2RlZixcbiAgICAgICAgICAgICAgICBvblVwbG9hZEVycm9yOiB1c2VyT25VcGxvYWRFcnJvclxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuLyoqXG4gKiBDcmVhdGUgYSBidWlsZGVyIGZvciB5b3VyIGJhY2tlbmQgYWRhcHRlci5cbiAqIFJlZmVyIHRvIHRoZSBleGlzdGluZyBhZGFwdGVycyBmb3IgZXhhbXBsZXMgb24gaG93IHRvIHVzZSB0aGlzIGZ1bmN0aW9uLlxuICogQHB1YmxpY1xuICpcbiAqIEBwYXJhbSBvcHRzIC0gT3B0aW9ucyBmb3IgdGhlIGJ1aWxkZXJcbiAqIEByZXR1cm5zIEEgZmlsZSByb3V0ZSBidWlsZGVyIGZvciBtYWtpbmcgVXBsb2FkVGhpbmcgZmlsZSByb3V0ZXNcbiAqLyBmdW5jdGlvbiBjcmVhdGVCdWlsZGVyKG9wdHMpIHtcbiAgICByZXR1cm4gKGlucHV0LCBjb25maWcpPT57XG4gICAgICAgIHJldHVybiBpbnRlcm5hbENyZWF0ZUJ1aWxkZXIoe1xuICAgICAgICAgICAgcm91dGVyQ29uZmlnOiBpbnB1dCxcbiAgICAgICAgICAgIHJvdXRlT3B0aW9uczogY29uZmlnID8/IHt9LFxuICAgICAgICAgICAgLi4ub3B0c1xuICAgICAgICB9KTtcbiAgICB9O1xufVxuXG5leHBvcnQgeyBjcmVhdGVCdWlsZGVyIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/_internal/upload-builder.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/_internal/upload-server.js":
/*!******************************************************************!*\
  !*** ./node_modules/uploadthing/dist/_internal/upload-server.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   uploadWithoutProgress: () => (/* binding */ uploadWithoutProgress)\n/* harmony export */ });\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpClient.js\");\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpClientRequest.js\");\n/* harmony import */ var effect_Effect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! effect/Effect */ \"(rsc)/./node_modules/effect/dist/esm/Effect.js\");\n/* harmony import */ var effect_Function__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! effect/Function */ \"(rsc)/./node_modules/effect/dist/esm/Function.js\");\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @uploadthing/shared */ \"(rsc)/./node_modules/@uploadthing/shared/dist/index.js\");\n/* harmony import */ var _deprecations_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./deprecations.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/deprecations.js\");\n/* harmony import */ var _logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./logger.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/logger.js\");\n\n\n\n\n\n\n\nvar version = \"7.6.0\";\n\nconst uploadWithoutProgress = (file, presigned)=>effect_Effect__WEBPACK_IMPORTED_MODULE_0__.gen(function*() {\n        const formData = new FormData();\n        formData.append(\"file\", file);\n        const httpClient = (yield* _effect_platform__WEBPACK_IMPORTED_MODULE_1__.HttpClient).pipe(_effect_platform__WEBPACK_IMPORTED_MODULE_1__.filterStatusOk);\n        const json = yield* _effect_platform__WEBPACK_IMPORTED_MODULE_2__.put(presigned.url).pipe(_effect_platform__WEBPACK_IMPORTED_MODULE_2__.bodyFormData(formData), _effect_platform__WEBPACK_IMPORTED_MODULE_2__.setHeader(\"Range\", \"bytes=0-\"), _effect_platform__WEBPACK_IMPORTED_MODULE_2__.setHeader(\"x-uploadthing-version\", version), httpClient.execute, effect_Effect__WEBPACK_IMPORTED_MODULE_0__.tapError((0,_logger_js__WEBPACK_IMPORTED_MODULE_3__.logHttpClientError)(\"Failed to upload file\")), effect_Effect__WEBPACK_IMPORTED_MODULE_0__.mapError((e)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_4__.UploadThingError({\n                code: \"UPLOAD_FAILED\",\n                message: \"Failed to upload file\",\n                cause: e\n            })), effect_Effect__WEBPACK_IMPORTED_MODULE_0__.andThen((_)=>_.json), effect_Effect__WEBPACK_IMPORTED_MODULE_0__.andThen(effect_Function__WEBPACK_IMPORTED_MODULE_5__.unsafeCoerce), effect_Effect__WEBPACK_IMPORTED_MODULE_0__.scoped);\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_0__.logDebug(`File ${file.name} uploaded successfully`).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_0__.annotateLogs(\"json\", json));\n        return {\n            ...json,\n            get url () {\n                (0,_deprecations_js__WEBPACK_IMPORTED_MODULE_6__.logDeprecationWarning)(\"`file.url` is deprecated and will be removed in uploadthing v9. Use `file.ufsUrl` instead.\");\n                return json.url;\n            },\n            get appUrl () {\n                (0,_deprecations_js__WEBPACK_IMPORTED_MODULE_6__.logDeprecationWarning)(\"`file.appUrl` is deprecated and will be removed in uploadthing v9. Use `file.ufsUrl` instead.\");\n                return json.appUrl;\n            }\n        };\n    });\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvdXBsb2FkLXNlcnZlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFpRTtBQUN6QjtBQUNPO0FBQ1E7QUFDRztBQUNUOztBQUVqRDs7QUFFQSxpREFBaUQsOENBQVU7QUFDM0Q7QUFDQTtBQUNBLG1DQUFtQyx3REFBcUIsT0FBTyw0REFBeUI7QUFDeEYsNEJBQTRCLGlEQUFxQixxQkFBcUIsMERBQThCLFlBQVksdURBQTJCLHVCQUF1Qix1REFBMkIsd0RBQXdELG1EQUFlLENBQUMsOERBQWtCLDRCQUE0QixtREFBZSxVQUFVLGlFQUFnQjtBQUM1VjtBQUNBO0FBQ0E7QUFDQSxhQUFhLElBQUksa0RBQWMsZUFBZSxrREFBYyxDQUFDLHlEQUFZLEdBQUcsaURBQWE7QUFDekYsZUFBZSxtREFBZSxTQUFTLFdBQVcsNkJBQTZCLHVEQUFtQjtBQUNsRztBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsdUVBQXFCO0FBQ3JDO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsZ0JBQWdCLHVFQUFxQjtBQUNyQztBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUU0QiIsInNvdXJjZXMiOlsiL2hvbWUvYWxleGFuZHJlL0RvY3VtZW50cy9tYXN0ZXJfMi9STkNQL2F0aGxldGUtYXhpcy9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvdXBsb2FkLXNlcnZlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBIdHRwQ2xpZW50LCBIdHRwQ2xpZW50UmVxdWVzdCB9IGZyb20gJ0BlZmZlY3QvcGxhdGZvcm0nO1xuaW1wb3J0ICogYXMgRWZmZWN0IGZyb20gJ2VmZmVjdC9FZmZlY3QnO1xuaW1wb3J0IHsgdW5zYWZlQ29lcmNlIH0gZnJvbSAnZWZmZWN0L0Z1bmN0aW9uJztcbmltcG9ydCB7IFVwbG9hZFRoaW5nRXJyb3IgfSBmcm9tICdAdXBsb2FkdGhpbmcvc2hhcmVkJztcbmltcG9ydCB7IGxvZ0RlcHJlY2F0aW9uV2FybmluZyB9IGZyb20gJy4vZGVwcmVjYXRpb25zLmpzJztcbmltcG9ydCB7IGxvZ0h0dHBDbGllbnRFcnJvciB9IGZyb20gJy4vbG9nZ2VyLmpzJztcblxudmFyIHZlcnNpb24gPSBcIjcuNi4wXCI7XG5cbmNvbnN0IHVwbG9hZFdpdGhvdXRQcm9ncmVzcyA9IChmaWxlLCBwcmVzaWduZWQpPT5FZmZlY3QuZ2VuKGZ1bmN0aW9uKigpIHtcbiAgICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgICAgZm9ybURhdGEuYXBwZW5kKFwiZmlsZVwiLCBmaWxlKTtcbiAgICAgICAgY29uc3QgaHR0cENsaWVudCA9ICh5aWVsZCogSHR0cENsaWVudC5IdHRwQ2xpZW50KS5waXBlKEh0dHBDbGllbnQuZmlsdGVyU3RhdHVzT2spO1xuICAgICAgICBjb25zdCBqc29uID0geWllbGQqIEh0dHBDbGllbnRSZXF1ZXN0LnB1dChwcmVzaWduZWQudXJsKS5waXBlKEh0dHBDbGllbnRSZXF1ZXN0LmJvZHlGb3JtRGF0YShmb3JtRGF0YSksIEh0dHBDbGllbnRSZXF1ZXN0LnNldEhlYWRlcihcIlJhbmdlXCIsIFwiYnl0ZXM9MC1cIiksIEh0dHBDbGllbnRSZXF1ZXN0LnNldEhlYWRlcihcIngtdXBsb2FkdGhpbmctdmVyc2lvblwiLCB2ZXJzaW9uKSwgaHR0cENsaWVudC5leGVjdXRlLCBFZmZlY3QudGFwRXJyb3IobG9nSHR0cENsaWVudEVycm9yKFwiRmFpbGVkIHRvIHVwbG9hZCBmaWxlXCIpKSwgRWZmZWN0Lm1hcEVycm9yKChlKT0+bmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICAgICAgICAgIGNvZGU6IFwiVVBMT0FEX0ZBSUxFRFwiLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIHVwbG9hZCBmaWxlXCIsXG4gICAgICAgICAgICAgICAgY2F1c2U6IGVcbiAgICAgICAgICAgIH0pKSwgRWZmZWN0LmFuZFRoZW4oKF8pPT5fLmpzb24pLCBFZmZlY3QuYW5kVGhlbih1bnNhZmVDb2VyY2UpLCBFZmZlY3Quc2NvcGVkKTtcbiAgICAgICAgeWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhgRmlsZSAke2ZpbGUubmFtZX0gdXBsb2FkZWQgc3VjY2Vzc2Z1bGx5YCkucGlwZShFZmZlY3QuYW5ub3RhdGVMb2dzKFwianNvblwiLCBqc29uKSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5qc29uLFxuICAgICAgICAgICAgZ2V0IHVybCAoKSB7XG4gICAgICAgICAgICAgICAgbG9nRGVwcmVjYXRpb25XYXJuaW5nKFwiYGZpbGUudXJsYCBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdXBsb2FkdGhpbmcgdjkuIFVzZSBgZmlsZS51ZnNVcmxgIGluc3RlYWQuXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBqc29uLnVybDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXQgYXBwVXJsICgpIHtcbiAgICAgICAgICAgICAgICBsb2dEZXByZWNhdGlvbldhcm5pbmcoXCJgZmlsZS5hcHBVcmxgIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiB1cGxvYWR0aGluZyB2OS4gVXNlIGBmaWxlLnVmc1VybGAgaW5zdGVhZC5cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGpzb24uYXBwVXJsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0pO1xuXG5leHBvcnQgeyB1cGxvYWRXaXRob3V0UHJvZ3Jlc3MgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/_internal/upload-server.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/next/index.js":
/*!************************************************!*\
  !*** ./node_modules/uploadthing/next/index.js ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UTFiles: () => (/* reexport safe */ _dist_internal_types_js__WEBPACK_IMPORTED_MODULE_0__.UTFiles),\n/* harmony export */   createRouteHandler: () => (/* binding */ createRouteHandler),\n/* harmony export */   createUploadthing: () => (/* binding */ createUploadthing)\n/* harmony export */ });\n/* harmony import */ var effect_Effect__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! effect/Effect */ \"(rsc)/./node_modules/effect/dist/esm/Effect.js\");\n/* harmony import */ var _dist_internal_handler_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../dist/_internal/handler.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/handler.js\");\n/* harmony import */ var _dist_internal_upload_builder_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../dist/_internal/upload-builder.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/upload-builder.js\");\n/* harmony import */ var _dist_internal_types_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dist/_internal/types.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/types.js\");\n\n\n\n\n\nconst createUploadthing = (opts)=>(0,_dist_internal_upload_builder_js__WEBPACK_IMPORTED_MODULE_1__.createBuilder)(opts);\nconst createRouteHandler = (opts)=>{\n    const handler = (0,_dist_internal_handler_js__WEBPACK_IMPORTED_MODULE_2__.makeAdapterHandler)((req)=>effect_Effect__WEBPACK_IMPORTED_MODULE_3__.succeed({\n            req\n        }), (req)=>effect_Effect__WEBPACK_IMPORTED_MODULE_3__.succeed(req), opts, \"nextjs-app\");\n    return {\n        POST: handler,\n        GET: handler\n    };\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvbmV4dC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXdDO0FBQzBCO0FBQ0U7QUFDZjs7QUFFckQsa0NBQWtDLCtFQUFhO0FBQy9DO0FBQ0Esb0JBQW9CLDZFQUFrQixRQUFRLGtEQUFjO0FBQzVEO0FBQ0EsU0FBUyxVQUFVLGtEQUFjO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRWlEIiwic291cmNlcyI6WyIvaG9tZS9hbGV4YW5kcmUvRG9jdW1lbnRzL21hc3Rlcl8yL1JOQ1AvYXRobGV0ZS1heGlzL25vZGVfbW9kdWxlcy91cGxvYWR0aGluZy9uZXh0L2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIEVmZmVjdCBmcm9tICdlZmZlY3QvRWZmZWN0JztcbmltcG9ydCB7IG1ha2VBZGFwdGVySGFuZGxlciB9IGZyb20gJy4uL2Rpc3QvX2ludGVybmFsL2hhbmRsZXIuanMnO1xuaW1wb3J0IHsgY3JlYXRlQnVpbGRlciB9IGZyb20gJy4uL2Rpc3QvX2ludGVybmFsL3VwbG9hZC1idWlsZGVyLmpzJztcbmV4cG9ydCB7IFVURmlsZXMgfSBmcm9tICcuLi9kaXN0L19pbnRlcm5hbC90eXBlcy5qcyc7XG5cbmNvbnN0IGNyZWF0ZVVwbG9hZHRoaW5nID0gKG9wdHMpPT5jcmVhdGVCdWlsZGVyKG9wdHMpO1xuY29uc3QgY3JlYXRlUm91dGVIYW5kbGVyID0gKG9wdHMpPT57XG4gICAgY29uc3QgaGFuZGxlciA9IG1ha2VBZGFwdGVySGFuZGxlcigocmVxKT0+RWZmZWN0LnN1Y2NlZWQoe1xuICAgICAgICAgICAgcmVxXG4gICAgICAgIH0pLCAocmVxKT0+RWZmZWN0LnN1Y2NlZWQocmVxKSwgb3B0cywgXCJuZXh0anMtYXBwXCIpO1xuICAgIHJldHVybiB7XG4gICAgICAgIFBPU1Q6IGhhbmRsZXIsXG4gICAgICAgIEdFVDogaGFuZGxlclxuICAgIH07XG59O1xuXG5leHBvcnQgeyBjcmVhdGVSb3V0ZUhhbmRsZXIsIGNyZWF0ZVVwbG9hZHRoaW5nIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/next/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/server/index.js":
/*!**************************************************!*\
  !*** ./node_modules/uploadthing/server/index.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UTApi: () => (/* binding */ UTApi),\n/* harmony export */   UTFile: () => (/* binding */ UTFile),\n/* harmony export */   UTFiles: () => (/* reexport safe */ _dist_internal_types_js__WEBPACK_IMPORTED_MODULE_3__.UTFiles),\n/* harmony export */   UploadThingError: () => (/* reexport safe */ _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError),\n/* harmony export */   createBuilder: () => (/* reexport safe */ _dist_internal_upload_builder_js__WEBPACK_IMPORTED_MODULE_2__.createBuilder),\n/* harmony export */   createRouteHandler: () => (/* binding */ createRouteHandler),\n/* harmony export */   createUploadthing: () => (/* binding */ createUploadthing),\n/* harmony export */   extractRouterConfig: () => (/* binding */ extractRouterConfig),\n/* harmony export */   makeAdapterHandler: () => (/* reexport safe */ _dist_internal_handler_js__WEBPACK_IMPORTED_MODULE_1__.makeAdapterHandler)\n/* harmony export */ });\n/* harmony import */ var effect_Effect__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! effect/Effect */ \"(rsc)/./node_modules/effect/dist/esm/Effect.js\");\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @uploadthing/shared */ \"(rsc)/./node_modules/@uploadthing/shared/dist/index.js\");\n/* harmony import */ var _dist_internal_handler_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../dist/_internal/handler.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/handler.js\");\n/* harmony import */ var _dist_internal_route_config_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../dist/_internal/route-config.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/route-config.js\");\n/* harmony import */ var _dist_internal_upload_builder_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../dist/_internal/upload-builder.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/upload-builder.js\");\n/* harmony import */ var _dist_internal_types_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../dist/_internal/types.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/types.js\");\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpClient.js\");\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpClientRequest.js\");\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpIncomingMessage.js\");\n/* harmony import */ var effect_Array__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! effect/Array */ \"(rsc)/./node_modules/effect/dist/esm/Array.js\");\n/* harmony import */ var effect_Cause__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! effect/Cause */ \"(rsc)/./node_modules/effect/dist/esm/Cause.js\");\n/* harmony import */ var effect_Redacted__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! effect/Redacted */ \"(rsc)/./node_modules/effect/dist/esm/Redacted.js\");\n/* harmony import */ var effect_Schema__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! effect/Schema */ \"(rsc)/./node_modules/effect/dist/esm/Schema.js\");\n/* harmony import */ var _dist_internal_config_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../dist/_internal/config.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/config.js\");\n/* harmony import */ var _dist_internal_logger_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../dist/_internal/logger.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/logger.js\");\n/* harmony import */ var _dist_internal_runtime_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../dist/_internal/runtime.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/runtime.js\");\n/* harmony import */ var _uploadthing_mime_types__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @uploadthing/mime-types */ \"(rsc)/./node_modules/@uploadthing/mime-types/dist/index.js\");\n/* harmony import */ var effect_Predicate__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! effect/Predicate */ \"(rsc)/./node_modules/effect/dist/esm/Predicate.js\");\n/* harmony import */ var _dist_internal_upload_server_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../dist/_internal/upload-server.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/upload-server.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Extension of the Blob class that simplifies setting the `name` and `customId` properties,\n * similar to the built-in File class from Node > 20.\n */ class UTFile extends Blob {\n    constructor(parts, name, options){\n        const optionsWithDefaults = {\n            ...options,\n            type: options?.type ?? ((0,_uploadthing_mime_types__WEBPACK_IMPORTED_MODULE_4__.lookup)(name) || \"application/octet-stream\"),\n            lastModified: options?.lastModified ?? Date.now()\n        };\n        super(parts, optionsWithDefaults);\n        this.name = name;\n        this.customId = optionsWithDefaults.customId;\n        this.lastModified = optionsWithDefaults.lastModified;\n    }\n}\n\nfunction guardServerOnly() {\n    if (typeof window !== \"undefined\") {\n        throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n            code: \"INTERNAL_SERVER_ERROR\",\n            message: \"The `utapi` can only be used on the server.\"\n        });\n    }\n}\nconst downloadFile = (_url)=>effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function*() {\n        let url = effect_Predicate__WEBPACK_IMPORTED_MODULE_6__.isRecord(_url) ? _url.url : _url;\n        if (typeof url === \"string\") {\n            // since dataurls will result in name being too long, tell the user\n            // to use uploadFiles instead.\n            if (url.startsWith(\"data:\")) {\n                return yield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.fail({\n                    code: \"BAD_REQUEST\",\n                    message: \"Please use uploadFiles() for data URLs. uploadFilesFromUrl() is intended for use with remote URLs only.\",\n                    data: undefined\n                });\n            }\n        }\n        url = new URL(url);\n        const { name = url.pathname.split(\"/\").pop() ?? \"unknown-filename\", customId = undefined } = effect_Predicate__WEBPACK_IMPORTED_MODULE_6__.isRecord(_url) ? _url : {};\n        const httpClient = (yield* _effect_platform__WEBPACK_IMPORTED_MODULE_7__.HttpClient).pipe(_effect_platform__WEBPACK_IMPORTED_MODULE_7__.filterStatusOk);\n        const arrayBuffer = yield* _effect_platform__WEBPACK_IMPORTED_MODULE_8__.get(url).pipe(_effect_platform__WEBPACK_IMPORTED_MODULE_8__.modify({\n            headers: {}\n        }), httpClient.execute, effect_Effect__WEBPACK_IMPORTED_MODULE_5__.flatMap((_)=>_.arrayBuffer), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.mapError((cause)=>{\n            return {\n                code: \"BAD_REQUEST\",\n                message: `Failed to download requested file: ${cause.message}`,\n                data: cause.toJSON()\n            };\n        }), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.scoped);\n        return new UTFile([\n            arrayBuffer\n        ], name, {\n            customId,\n            lastModified: Date.now()\n        });\n    }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"downloadFile\"));\nconst generatePresignedUrl = (file, cd, acl)=>effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function*() {\n        const { apiKey, appId } = yield* _dist_internal_config_js__WEBPACK_IMPORTED_MODULE_9__.UTToken;\n        const baseUrl = yield* _dist_internal_config_js__WEBPACK_IMPORTED_MODULE_9__.IngestUrl;\n        const key = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.generateKey)(file, appId);\n        const url = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.generateSignedURL)(`${baseUrl}/${key}`, apiKey, {\n            // ttlInSeconds: routeOptions.presignedURLTTL,\n            data: {\n                \"x-ut-identifier\": appId,\n                \"x-ut-file-name\": file.name,\n                \"x-ut-file-size\": file.size,\n                \"x-ut-file-type\": file.type,\n                \"x-ut-custom-id\": file.customId,\n                \"x-ut-content-disposition\": cd,\n                \"x-ut-acl\": acl\n            }\n        });\n        return {\n            url,\n            key\n        };\n    }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"generatePresignedUrl\"));\nconst uploadFile = (file, opts)=>effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function*() {\n        const presigned = yield* generatePresignedUrl(file, opts.contentDisposition ?? \"inline\", opts.acl).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.catchTag(\"UploadThingError\", (e)=>effect_Effect__WEBPACK_IMPORTED_MODULE_5__.fail(_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError.toObject(e))), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.catchTag(\"ConfigError\", ()=>effect_Effect__WEBPACK_IMPORTED_MODULE_5__.fail({\n                code: \"INVALID_SERVER_CONFIG\",\n                message: \"Failed to generate presigned URL\"\n            })));\n        const response = yield* (0,_dist_internal_upload_server_js__WEBPACK_IMPORTED_MODULE_10__.uploadWithoutProgress)(file, presigned).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.catchTag(\"UploadThingError\", (e)=>effect_Effect__WEBPACK_IMPORTED_MODULE_5__.fail(_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError.toObject(e))), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.catchTag(\"ResponseError\", (e)=>effect_Effect__WEBPACK_IMPORTED_MODULE_5__.fail({\n                code: \"UPLOAD_FAILED\",\n                message: \"Failed to upload file\",\n                data: e.toJSON()\n            })));\n        return {\n            key: presigned.key,\n            url: response.url,\n            appUrl: response.appUrl,\n            ufsUrl: response.ufsUrl,\n            lastModified: file.lastModified ?? Date.now(),\n            name: file.name,\n            size: file.size,\n            type: file.type,\n            customId: file.customId ?? null,\n            fileHash: response.fileHash\n        };\n    }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"uploadFile\"));\n\nclass UTApi {\n    constructor(opts){\n        this.opts = opts;\n        this.requestUploadThing = (pathname, body, responseSchema)=>effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(this, function*() {\n                const { apiKey } = yield* _dist_internal_config_js__WEBPACK_IMPORTED_MODULE_9__.UTToken;\n                const baseUrl = yield* _dist_internal_config_js__WEBPACK_IMPORTED_MODULE_9__.ApiUrl;\n                const httpClient = (yield* _effect_platform__WEBPACK_IMPORTED_MODULE_7__.HttpClient).pipe(_effect_platform__WEBPACK_IMPORTED_MODULE_7__.filterStatusOk);\n                return yield* _effect_platform__WEBPACK_IMPORTED_MODULE_8__.post(pathname).pipe(_effect_platform__WEBPACK_IMPORTED_MODULE_8__.prependUrl(baseUrl), _effect_platform__WEBPACK_IMPORTED_MODULE_8__.bodyUnsafeJson(body), _effect_platform__WEBPACK_IMPORTED_MODULE_8__.setHeaders({\n                    \"x-uploadthing-version\": _dist_internal_config_js__WEBPACK_IMPORTED_MODULE_9__.UPLOADTHING_VERSION,\n                    \"x-uploadthing-be-adapter\": \"server-sdk\",\n                    \"x-uploadthing-api-key\": effect_Redacted__WEBPACK_IMPORTED_MODULE_11__.value(apiKey)\n                }), httpClient.execute, effect_Effect__WEBPACK_IMPORTED_MODULE_5__.tapBoth({\n                    onSuccess: (0,_dist_internal_logger_js__WEBPACK_IMPORTED_MODULE_12__.logHttpClientResponse)(\"UploadThing API Response\"),\n                    onFailure: (0,_dist_internal_logger_js__WEBPACK_IMPORTED_MODULE_12__.logHttpClientError)(\"Failed to request UploadThing API\")\n                }), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.flatMap(_effect_platform__WEBPACK_IMPORTED_MODULE_13__.schemaBodyJson(responseSchema)), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.scoped);\n            }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.catchTag(\"ConfigError\", (e)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                    code: \"INVALID_SERVER_CONFIG\",\n                    message: \"There was an error with the server configuration. More info can be found on this error's `cause` property\",\n                    cause: e\n                })), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"utapi.#requestUploadThing\"));\n        this.executeAsync = async (program, signal)=>{\n            const exit = await program.pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"utapi.#executeAsync\"), (e)=>this.runtime.runPromiseExit(e, signal ? {\n                    signal\n                } : undefined));\n            if (exit._tag === \"Failure\") {\n                throw effect_Cause__WEBPACK_IMPORTED_MODULE_14__.squash(exit.cause);\n            }\n            return exit.value;\n        };\n        this./**\n   * Request to delete files from UploadThing storage.\n   * @param {string | string[]} fileKeys\n   *\n   * @example\n   * await deleteFiles(\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\");\n   *\n   * @example\n   * await deleteFiles([\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\",\"1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\"])\n   *\n   * @example\n   * await deleteFiles(\"myCustomIdentifier\", { keyType: \"customId\" })\n   */ deleteFiles = async (keys, opts)=>{\n            guardServerOnly();\n            const { keyType = this.defaultKeyType } = opts ?? {};\n            class DeleteFileResponse extends effect_Schema__WEBPACK_IMPORTED_MODULE_15__.Class(\"DeleteFileResponse\")({\n                success: effect_Schema__WEBPACK_IMPORTED_MODULE_15__.Boolean,\n                deletedCount: effect_Schema__WEBPACK_IMPORTED_MODULE_15__.Number\n            }) {\n            }\n            return await this.executeAsync(this.requestUploadThing(\"/v6/deleteFiles\", keyType === \"fileKey\" ? {\n                fileKeys: effect_Array__WEBPACK_IMPORTED_MODULE_16__.ensure(keys)\n            } : {\n                customIds: effect_Array__WEBPACK_IMPORTED_MODULE_16__.ensure(keys)\n            }, DeleteFileResponse).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"deleteFiles\")));\n        };\n        this./**\n   * Request file URLs from UploadThing storage.\n   * @param {string | string[]} fileKeys\n   *\n   * @example\n   * const data = await getFileUrls(\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\");\n   * console.log(data); // [{key: \"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\", url: \"https://uploadthing.com/f/2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\"}]\n   *\n   * @example\n   * const data = await getFileUrls([\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\",\"1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\"])\n   * console.log(data) // [{key: \"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\", url: \"https://uploadthing.com/f/2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\" },{key: \"1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\", url: \"https://uploadthing.com/f/1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\"}]\n   *\n   * @deprecated - See https://docs.uploadthing.com/working-with-files#accessing-files for info how to access files\n   */ getFileUrls = async (keys, opts)=>{\n            guardServerOnly();\n            const { keyType = this.defaultKeyType } = opts ?? {};\n            class GetFileUrlResponse extends effect_Schema__WEBPACK_IMPORTED_MODULE_15__.Class(\"GetFileUrlResponse\")({\n                data: effect_Schema__WEBPACK_IMPORTED_MODULE_15__.Array(effect_Schema__WEBPACK_IMPORTED_MODULE_15__.Struct({\n                    key: effect_Schema__WEBPACK_IMPORTED_MODULE_15__.String,\n                    url: effect_Schema__WEBPACK_IMPORTED_MODULE_15__.String\n                }))\n            }) {\n            }\n            return await this.executeAsync(this.requestUploadThing(\"/v6/getFileUrl\", keyType === \"fileKey\" ? {\n                fileKeys: effect_Array__WEBPACK_IMPORTED_MODULE_16__.ensure(keys)\n            } : {\n                customIds: effect_Array__WEBPACK_IMPORTED_MODULE_16__.ensure(keys)\n            }, GetFileUrlResponse).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"getFileUrls\")));\n        };\n        this./**\n   * Request file list from UploadThing storage.\n   * @param {object} opts\n   * @param {number} opts.limit The maximum number of files to return\n   * @param {number} opts.offset The number of files to skip\n   *\n   * @example\n   * const data = await listFiles({ limit: 1 });\n   * console.log(data); // { key: \"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\", id: \"2e0fdb64-9957-4262-8e45-f372ba903ac8\" }\n   */ listFiles = async (opts)=>{\n            guardServerOnly();\n            class ListFileResponse extends effect_Schema__WEBPACK_IMPORTED_MODULE_15__.Class(\"ListFileResponse\")({\n                hasMore: effect_Schema__WEBPACK_IMPORTED_MODULE_15__.Boolean,\n                files: effect_Schema__WEBPACK_IMPORTED_MODULE_15__.Array(effect_Schema__WEBPACK_IMPORTED_MODULE_15__.Struct({\n                    id: effect_Schema__WEBPACK_IMPORTED_MODULE_15__.String,\n                    customId: effect_Schema__WEBPACK_IMPORTED_MODULE_15__.NullOr(effect_Schema__WEBPACK_IMPORTED_MODULE_15__.String),\n                    key: effect_Schema__WEBPACK_IMPORTED_MODULE_15__.String,\n                    name: effect_Schema__WEBPACK_IMPORTED_MODULE_15__.String,\n                    size: effect_Schema__WEBPACK_IMPORTED_MODULE_15__.Number,\n                    status: effect_Schema__WEBPACK_IMPORTED_MODULE_15__.Literal(\"Deletion Pending\", \"Failed\", \"Uploaded\", \"Uploading\"),\n                    uploadedAt: effect_Schema__WEBPACK_IMPORTED_MODULE_15__.Number\n                }))\n            }) {\n            }\n            return await this.executeAsync(this.requestUploadThing(\"/v6/listFiles\", {\n                ...opts\n            }, ListFileResponse).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"listFiles\")));\n        };\n        this.renameFiles = async (updates)=>{\n            guardServerOnly();\n            class RenameFileResponse extends effect_Schema__WEBPACK_IMPORTED_MODULE_15__.Class(\"RenameFileResponse\")({\n                success: effect_Schema__WEBPACK_IMPORTED_MODULE_15__.Boolean\n            }) {\n            }\n            return await this.executeAsync(this.requestUploadThing(\"/v6/renameFiles\", {\n                updates: effect_Array__WEBPACK_IMPORTED_MODULE_16__.ensure(updates)\n            }, RenameFileResponse).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"renameFiles\")));\n        };\n        this.getUsageInfo = async ()=>{\n            guardServerOnly();\n            class GetUsageInfoResponse extends effect_Schema__WEBPACK_IMPORTED_MODULE_15__.Class(\"GetUsageInfoResponse\")({\n                totalBytes: effect_Schema__WEBPACK_IMPORTED_MODULE_15__.Number,\n                appTotalBytes: effect_Schema__WEBPACK_IMPORTED_MODULE_15__.Number,\n                filesUploaded: effect_Schema__WEBPACK_IMPORTED_MODULE_15__.Number,\n                limitBytes: effect_Schema__WEBPACK_IMPORTED_MODULE_15__.Number\n            }) {\n            }\n            return await this.executeAsync(this.requestUploadThing(\"/v6/getUsageInfo\", {}, GetUsageInfoResponse).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"getUsageInfo\")));\n        };\n        this./**\n   * Generate a presigned url for a private file\n   * Unlike {@link getSignedURL}, this method does not make a fetch request to the UploadThing API\n   * and is the recommended way to generate a presigned url for a private file.\n   **/ generateSignedURL = async (key, opts)=>{\n            guardServerOnly();\n            const expiresIn = (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.parseTimeToSeconds)(opts?.expiresIn ?? \"5 minutes\");\n            if (opts?.expiresIn && isNaN(expiresIn)) {\n                throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                    code: \"BAD_REQUEST\",\n                    message: \"expiresIn must be a valid time string, for example '1d', '2 days', or a number of seconds.\"\n                });\n            }\n            if (expiresIn > 86400 * 7) {\n                throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                    code: \"BAD_REQUEST\",\n                    message: \"expiresIn must be less than 7 days (604800 seconds).\"\n                });\n            }\n            const program = effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function*() {\n                const { apiKey, appId } = yield* _dist_internal_config_js__WEBPACK_IMPORTED_MODULE_9__.UTToken;\n                const ufsHost = yield* _dist_internal_config_js__WEBPACK_IMPORTED_MODULE_9__.UfsHost;\n                const proto = ufsHost.includes(\"local\") ? \"http\" : \"https\";\n                const ufsUrl = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.generateSignedURL)(`${proto}://${appId}.${ufsHost}/f/${key}`, apiKey, {\n                    ttlInSeconds: expiresIn\n                });\n                return {\n                    ufsUrl\n                };\n            });\n            return await this.executeAsync(program.pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.catchTag(\"ConfigError\", (e)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                    code: \"INVALID_SERVER_CONFIG\",\n                    message: \"There was an error with the server configuration. More info can be found on this error's `cause` property\",\n                    cause: e\n                })), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"generateSignedURL\")));\n        };\n        this./**\n   * Request a presigned url for a private file(s)\n   * @remarks This method is no longer recommended as it makes a fetch\n   * request to the UploadThing API which incurs redundant latency. It\n   * will be deprecated in UploadThing v8 and removed in UploadThing v9.\n   *\n   * @see {@link generateSignedURL} for a more efficient way to generate a presigned url\n   **/ getSignedURL = async (key, opts)=>{\n            guardServerOnly();\n            const expiresIn = opts?.expiresIn ? (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.parseTimeToSeconds)(opts.expiresIn) : undefined;\n            const { keyType = this.defaultKeyType } = opts ?? {};\n            if (opts?.expiresIn && isNaN(expiresIn)) {\n                throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                    code: \"BAD_REQUEST\",\n                    message: \"expiresIn must be a valid time string, for example '1d', '2 days', or a number of seconds.\"\n                });\n            }\n            if (expiresIn && expiresIn > 86400 * 7) {\n                throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                    code: \"BAD_REQUEST\",\n                    message: \"expiresIn must be less than 7 days (604800 seconds).\"\n                });\n            }\n            class GetSignedUrlResponse extends effect_Schema__WEBPACK_IMPORTED_MODULE_15__.Class(\"GetSignedUrlResponse\")({\n                url: effect_Schema__WEBPACK_IMPORTED_MODULE_15__.String,\n                ufsUrl: effect_Schema__WEBPACK_IMPORTED_MODULE_15__.String\n            }) {\n            }\n            return await this.executeAsync(this.requestUploadThing(\"/v6/requestFileAccess\", keyType === \"fileKey\" ? {\n                fileKey: key,\n                expiresIn\n            } : {\n                customId: key,\n                expiresIn\n            }, GetSignedUrlResponse).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"getSignedURL\")));\n        };\n        this./**\n   * Update the ACL of a file or set of files.\n   *\n   * @example\n   * // Make a single file public\n   * await utapi.updateACL(\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\", \"public-read\");\n   *\n   * // Make multiple files private\n   * await utapi.updateACL(\n   *   [\n   *     \"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\",\n   *     \"1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\",\n   *   ],\n   *   \"private\",\n   * );\n   */ updateACL = async (keys, acl, opts)=>{\n            guardServerOnly();\n            const { keyType = this.defaultKeyType } = opts ?? {};\n            const updates = effect_Array__WEBPACK_IMPORTED_MODULE_16__.ensure(keys).map((key)=>{\n                return keyType === \"fileKey\" ? {\n                    fileKey: key,\n                    acl\n                } : {\n                    customId: key,\n                    acl\n                };\n            });\n            const responseSchema = effect_Schema__WEBPACK_IMPORTED_MODULE_15__.Struct({\n                success: effect_Schema__WEBPACK_IMPORTED_MODULE_15__.Boolean\n            });\n            return await this.executeAsync(this.requestUploadThing(\"/v6/updateACL\", {\n                updates\n            }, responseSchema).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"updateACL\")));\n        };\n        // Assert some stuff\n        guardServerOnly();\n        this.fetch = opts?.fetch ?? globalThis.fetch;\n        this.defaultKeyType = opts?.defaultKeyType ?? \"fileKey\";\n        this.runtime = (0,_dist_internal_runtime_js__WEBPACK_IMPORTED_MODULE_17__.makeRuntime)(this.fetch, this.opts);\n    }\n    uploadFiles(files, opts) {\n        guardServerOnly();\n        const program = effect_Effect__WEBPACK_IMPORTED_MODULE_5__.forEach(effect_Array__WEBPACK_IMPORTED_MODULE_16__.ensure(files), (file)=>uploadFile(file, opts ?? {}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.match({\n                onSuccess: (data)=>({\n                        data,\n                        error: null\n                    }),\n                onFailure: (error)=>({\n                        data: null,\n                        error\n                    })\n            }))).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.map((ups)=>Array.isArray(files) ? ups : ups[0]), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.tap((res)=>effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"Finished uploading\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"uploadResult\", res))), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"uploadFiles\"));\n        return this.executeAsync(program, opts?.signal);\n    }\n    uploadFilesFromUrl(urls, opts) {\n        guardServerOnly();\n        const program = effect_Effect__WEBPACK_IMPORTED_MODULE_5__.forEach(effect_Array__WEBPACK_IMPORTED_MODULE_16__.ensure(urls), (url)=>downloadFile(url).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.flatMap((file)=>uploadFile(file, opts ?? {})), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.match({\n                onSuccess: (data)=>({\n                        data,\n                        error: null\n                    }),\n                onFailure: (error)=>({\n                        data: null,\n                        error\n                    })\n            }))).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.map((ups)=>Array.isArray(urls) ? ups : ups[0]), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.tap((res)=>effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"Finished uploading\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"uploadResult\", res))), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"uploadFiles\")).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"uploadFilesFromUrl\"));\n        return this.executeAsync(program, opts?.signal);\n    }\n}\n\nconst createUploadthing = (opts)=>(0,_dist_internal_upload_builder_js__WEBPACK_IMPORTED_MODULE_2__.createBuilder)(opts);\nconst createRouteHandler = (opts)=>{\n    return (0,_dist_internal_handler_js__WEBPACK_IMPORTED_MODULE_1__.makeAdapterHandler)((ev)=>effect_Effect__WEBPACK_IMPORTED_MODULE_5__.succeed({\n            req: \"request\" in ev ? ev.request : ev\n        }), (ev)=>effect_Effect__WEBPACK_IMPORTED_MODULE_5__.succeed(\"request\" in ev ? ev.request : ev), opts, \"server\");\n};\nconst extractRouterConfig = (router)=>effect_Effect__WEBPACK_IMPORTED_MODULE_5__.runSync((0,_dist_internal_route_config_js__WEBPACK_IMPORTED_MODULE_18__.extractRouterConfig)(router));\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvc2VydmVyL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBd0M7QUFDbUU7QUFDcEQ7QUFDVztBQUNBO0FBQytCO0FBQzdCO0FBQ0E7QUFDZjtBQUNnQztBQUNqRDtBQUNFO0FBQ007QUFDVDtBQUNvRTtBQUNmO0FBQzdCO0FBQ1Y7QUFDSDtBQUM2Qjs7QUFFM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsK0RBQU07QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esa0JBQWtCLGlFQUFnQjtBQUNsQztBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSw2QkFBNkIsOENBQVU7QUFDdkMsa0JBQWtCLHNEQUFrQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QiwrQ0FBVztBQUN6QztBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLG1GQUFtRixFQUFFLHNEQUFrQjtBQUN2SCxtQ0FBbUMsd0RBQXFCLE9BQU8sNERBQXlCO0FBQ3hGLG1DQUFtQyxpREFBcUIsV0FBVyxvREFBd0I7QUFDM0Y7QUFDQSxTQUFTLHVCQUF1QixrREFBYyxzQkFBc0IsbURBQWU7QUFDbkY7QUFDQTtBQUNBLCtEQUErRCxjQUFjO0FBQzdFO0FBQ0E7QUFDQSxTQUFTLEdBQUcsaURBQWE7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLLE9BQU8sc0RBQWtCO0FBQzlCLDhDQUE4Qyw4Q0FBVTtBQUN4RCxnQkFBZ0IsZ0JBQWdCLFNBQVMsNkRBQU87QUFDaEQsK0JBQStCLCtEQUFTO0FBQ3hDLDJCQUEyQixnRUFBVztBQUN0QywyQkFBMkIsc0VBQWlCLElBQUksUUFBUSxHQUFHLElBQUk7QUFDL0Q7QUFDQTtBQUNB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VSxRQUFRLG1EQUFlLDRCQUE0Qix1REFBbUIseUJBQXlCLHNEQUFrQixzQkFBc0Isc0RBQWtCO0FBQ2hQO0FBQ0E7QUFDQTs7QUFFQSxrQ0FBa0MsK0VBQWE7QUFDL0M7QUFDQSxXQUFXLDZFQUFrQixPQUFPLGtEQUFjO0FBQ2xEO0FBQ0EsU0FBUyxTQUFTLGtEQUFjO0FBQ2hDO0FBQ0Esc0NBQXNDLGtEQUFjLENBQUMsb0ZBQXFCOztBQUVXIiwic291cmNlcyI6WyIvaG9tZS9hbGV4YW5kcmUvRG9jdW1lbnRzL21hc3Rlcl8yL1JOQ1AvYXRobGV0ZS1heGlzL25vZGVfbW9kdWxlcy91cGxvYWR0aGluZy9zZXJ2ZXIvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgRWZmZWN0IGZyb20gJ2VmZmVjdC9FZmZlY3QnO1xuaW1wb3J0IHsgVXBsb2FkVGhpbmdFcnJvciwgZ2VuZXJhdGVLZXksIGdlbmVyYXRlU2lnbmVkVVJMLCBwYXJzZVRpbWVUb1NlY29uZHMgfSBmcm9tICdAdXBsb2FkdGhpbmcvc2hhcmVkJztcbmV4cG9ydCB7IFVwbG9hZFRoaW5nRXJyb3IgfSBmcm9tICdAdXBsb2FkdGhpbmcvc2hhcmVkJztcbmltcG9ydCB7IG1ha2VBZGFwdGVySGFuZGxlciB9IGZyb20gJy4uL2Rpc3QvX2ludGVybmFsL2hhbmRsZXIuanMnO1xuZXhwb3J0IHsgbWFrZUFkYXB0ZXJIYW5kbGVyIH0gZnJvbSAnLi4vZGlzdC9faW50ZXJuYWwvaGFuZGxlci5qcyc7XG5pbXBvcnQgeyBleHRyYWN0Um91dGVyQ29uZmlnIGFzIGV4dHJhY3RSb3V0ZXJDb25maWckMSB9IGZyb20gJy4uL2Rpc3QvX2ludGVybmFsL3JvdXRlLWNvbmZpZy5qcyc7XG5pbXBvcnQgeyBjcmVhdGVCdWlsZGVyIH0gZnJvbSAnLi4vZGlzdC9faW50ZXJuYWwvdXBsb2FkLWJ1aWxkZXIuanMnO1xuZXhwb3J0IHsgY3JlYXRlQnVpbGRlciB9IGZyb20gJy4uL2Rpc3QvX2ludGVybmFsL3VwbG9hZC1idWlsZGVyLmpzJztcbmV4cG9ydCB7IFVURmlsZXMgfSBmcm9tICcuLi9kaXN0L19pbnRlcm5hbC90eXBlcy5qcyc7XG5pbXBvcnQgeyBIdHRwQ2xpZW50LCBIdHRwQ2xpZW50UmVxdWVzdCwgSHR0cENsaWVudFJlc3BvbnNlIH0gZnJvbSAnQGVmZmVjdC9wbGF0Zm9ybSc7XG5pbXBvcnQgKiBhcyBBcnIgZnJvbSAnZWZmZWN0L0FycmF5JztcbmltcG9ydCAqIGFzIENhdXNlIGZyb20gJ2VmZmVjdC9DYXVzZSc7XG5pbXBvcnQgKiBhcyBSZWRhY3RlZCBmcm9tICdlZmZlY3QvUmVkYWN0ZWQnO1xuaW1wb3J0ICogYXMgUyBmcm9tICdlZmZlY3QvU2NoZW1hJztcbmltcG9ydCB7IFVUVG9rZW4sIEluZ2VzdFVybCwgQXBpVXJsLCBVUExPQURUSElOR19WRVJTSU9OLCBVZnNIb3N0IH0gZnJvbSAnLi4vZGlzdC9faW50ZXJuYWwvY29uZmlnLmpzJztcbmltcG9ydCB7IGxvZ0h0dHBDbGllbnRSZXNwb25zZSwgbG9nSHR0cENsaWVudEVycm9yIH0gZnJvbSAnLi4vZGlzdC9faW50ZXJuYWwvbG9nZ2VyLmpzJztcbmltcG9ydCB7IG1ha2VSdW50aW1lIH0gZnJvbSAnLi4vZGlzdC9faW50ZXJuYWwvcnVudGltZS5qcyc7XG5pbXBvcnQgeyBsb29rdXAgfSBmcm9tICdAdXBsb2FkdGhpbmcvbWltZS10eXBlcyc7XG5pbXBvcnQgKiBhcyBQcmVkaWNhdGUgZnJvbSAnZWZmZWN0L1ByZWRpY2F0ZSc7XG5pbXBvcnQgeyB1cGxvYWRXaXRob3V0UHJvZ3Jlc3MgfSBmcm9tICcuLi9kaXN0L19pbnRlcm5hbC91cGxvYWQtc2VydmVyLmpzJztcblxuLyoqXG4gKiBFeHRlbnNpb24gb2YgdGhlIEJsb2IgY2xhc3MgdGhhdCBzaW1wbGlmaWVzIHNldHRpbmcgdGhlIGBuYW1lYCBhbmQgYGN1c3RvbUlkYCBwcm9wZXJ0aWVzLFxuICogc2ltaWxhciB0byB0aGUgYnVpbHQtaW4gRmlsZSBjbGFzcyBmcm9tIE5vZGUgPiAyMC5cbiAqLyBjbGFzcyBVVEZpbGUgZXh0ZW5kcyBCbG9iIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJ0cywgbmFtZSwgb3B0aW9ucyl7XG4gICAgICAgIGNvbnN0IG9wdGlvbnNXaXRoRGVmYXVsdHMgPSB7XG4gICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgdHlwZTogb3B0aW9ucz8udHlwZSA/PyAobG9va3VwKG5hbWUpIHx8IFwiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtXCIpLFxuICAgICAgICAgICAgbGFzdE1vZGlmaWVkOiBvcHRpb25zPy5sYXN0TW9kaWZpZWQgPz8gRGF0ZS5ub3coKVxuICAgICAgICB9O1xuICAgICAgICBzdXBlcihwYXJ0cywgb3B0aW9uc1dpdGhEZWZhdWx0cyk7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuY3VzdG9tSWQgPSBvcHRpb25zV2l0aERlZmF1bHRzLmN1c3RvbUlkO1xuICAgICAgICB0aGlzLmxhc3RNb2RpZmllZCA9IG9wdGlvbnNXaXRoRGVmYXVsdHMubGFzdE1vZGlmaWVkO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZ3VhcmRTZXJ2ZXJPbmx5KCkge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIHRocm93IG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICAgIGNvZGU6IFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBcIlRoZSBgdXRhcGlgIGNhbiBvbmx5IGJlIHVzZWQgb24gdGhlIHNlcnZlci5cIlxuICAgICAgICB9KTtcbiAgICB9XG59XG5jb25zdCBkb3dubG9hZEZpbGUgPSAoX3VybCk9PkVmZmVjdC5nZW4oZnVuY3Rpb24qKCkge1xuICAgICAgICBsZXQgdXJsID0gUHJlZGljYXRlLmlzUmVjb3JkKF91cmwpID8gX3VybC51cmwgOiBfdXJsO1xuICAgICAgICBpZiAodHlwZW9mIHVybCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgLy8gc2luY2UgZGF0YXVybHMgd2lsbCByZXN1bHQgaW4gbmFtZSBiZWluZyB0b28gbG9uZywgdGVsbCB0aGUgdXNlclxuICAgICAgICAgICAgLy8gdG8gdXNlIHVwbG9hZEZpbGVzIGluc3RlYWQuXG4gICAgICAgICAgICBpZiAodXJsLnN0YXJ0c1dpdGgoXCJkYXRhOlwiKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB5aWVsZCogRWZmZWN0LmZhaWwoe1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiUGxlYXNlIHVzZSB1cGxvYWRGaWxlcygpIGZvciBkYXRhIFVSTHMuIHVwbG9hZEZpbGVzRnJvbVVybCgpIGlzIGludGVuZGVkIGZvciB1c2Ugd2l0aCByZW1vdGUgVVJMcyBvbmx5LlwiLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB1cmwgPSBuZXcgVVJMKHVybCk7XG4gICAgICAgIGNvbnN0IHsgbmFtZSA9IHVybC5wYXRobmFtZS5zcGxpdChcIi9cIikucG9wKCkgPz8gXCJ1bmtub3duLWZpbGVuYW1lXCIsIGN1c3RvbUlkID0gdW5kZWZpbmVkIH0gPSBQcmVkaWNhdGUuaXNSZWNvcmQoX3VybCkgPyBfdXJsIDoge307XG4gICAgICAgIGNvbnN0IGh0dHBDbGllbnQgPSAoeWllbGQqIEh0dHBDbGllbnQuSHR0cENsaWVudCkucGlwZShIdHRwQ2xpZW50LmZpbHRlclN0YXR1c09rKTtcbiAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSB5aWVsZCogSHR0cENsaWVudFJlcXVlc3QuZ2V0KHVybCkucGlwZShIdHRwQ2xpZW50UmVxdWVzdC5tb2RpZnkoe1xuICAgICAgICAgICAgaGVhZGVyczoge31cbiAgICAgICAgfSksIGh0dHBDbGllbnQuZXhlY3V0ZSwgRWZmZWN0LmZsYXRNYXAoKF8pPT5fLmFycmF5QnVmZmVyKSwgRWZmZWN0Lm1hcEVycm9yKChjYXVzZSk9PntcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgY29kZTogXCJCQURfUkVRVUVTVFwiLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBGYWlsZWQgdG8gZG93bmxvYWQgcmVxdWVzdGVkIGZpbGU6ICR7Y2F1c2UubWVzc2FnZX1gLFxuICAgICAgICAgICAgICAgIGRhdGE6IGNhdXNlLnRvSlNPTigpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSwgRWZmZWN0LnNjb3BlZCk7XG4gICAgICAgIHJldHVybiBuZXcgVVRGaWxlKFtcbiAgICAgICAgICAgIGFycmF5QnVmZmVyXG4gICAgICAgIF0sIG5hbWUsIHtcbiAgICAgICAgICAgIGN1c3RvbUlkLFxuICAgICAgICAgICAgbGFzdE1vZGlmaWVkOiBEYXRlLm5vdygpXG4gICAgICAgIH0pO1xuICAgIH0pLnBpcGUoRWZmZWN0LndpdGhMb2dTcGFuKFwiZG93bmxvYWRGaWxlXCIpKTtcbmNvbnN0IGdlbmVyYXRlUHJlc2lnbmVkVXJsID0gKGZpbGUsIGNkLCBhY2wpPT5FZmZlY3QuZ2VuKGZ1bmN0aW9uKigpIHtcbiAgICAgICAgY29uc3QgeyBhcGlLZXksIGFwcElkIH0gPSB5aWVsZCogVVRUb2tlbjtcbiAgICAgICAgY29uc3QgYmFzZVVybCA9IHlpZWxkKiBJbmdlc3RVcmw7XG4gICAgICAgIGNvbnN0IGtleSA9IHlpZWxkKiBnZW5lcmF0ZUtleShmaWxlLCBhcHBJZCk7XG4gICAgICAgIGNvbnN0IHVybCA9IHlpZWxkKiBnZW5lcmF0ZVNpZ25lZFVSTChgJHtiYXNlVXJsfS8ke2tleX1gLCBhcGlLZXksIHtcbiAgICAgICAgICAgIC8vIHR0bEluU2Vjb25kczogcm91dGVPcHRpb25zLnByZXNpZ25lZFVSTFRUTCxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBcIngtdXQtaWRlbnRpZmllclwiOiBhcHBJZCxcbiAgICAgICAgICAgICAgICBcIngtdXQtZmlsZS1uYW1lXCI6IGZpbGUubmFtZSxcbiAgICAgICAgICAgICAgICBcIngtdXQtZmlsZS1zaXplXCI6IGZpbGUuc2l6ZSxcbiAgICAgICAgICAgICAgICBcIngtdXQtZmlsZS10eXBlXCI6IGZpbGUudHlwZSxcbiAgICAgICAgICAgICAgICBcIngtdXQtY3VzdG9tLWlkXCI6IGZpbGUuY3VzdG9tSWQsXG4gICAgICAgICAgICAgICAgXCJ4LXV0LWNvbnRlbnQtZGlzcG9zaXRpb25cIjogY2QsXG4gICAgICAgICAgICAgICAgXCJ4LXV0LWFjbFwiOiBhY2xcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB1cmwsXG4gICAgICAgICAgICBrZXlcbiAgICAgICAgfTtcbiAgICB9KS5waXBlKEVmZmVjdC53aXRoTG9nU3BhbihcImdlbmVyYXRlUHJlc2lnbmVkVXJsXCIpKTtcbmNvbnN0IHVwbG9hZEZpbGUgPSAoZmlsZSwgb3B0cyk9PkVmZmVjdC5nZW4oZnVuY3Rpb24qKCkge1xuICAgICAgICBjb25zdCBwcmVzaWduZWQgPSB5aWVsZCogZ2VuZXJhdGVQcmVzaWduZWRVcmwoZmlsZSwgb3B0cy5jb250ZW50RGlzcG9zaXRpb24gPz8gXCJpbmxpbmVcIiwgb3B0cy5hY2wpLnBpcGUoRWZmZWN0LmNhdGNoVGFnKFwiVXBsb2FkVGhpbmdFcnJvclwiLCAoZSk9PkVmZmVjdC5mYWlsKFVwbG9hZFRoaW5nRXJyb3IudG9PYmplY3QoZSkpKSwgRWZmZWN0LmNhdGNoVGFnKFwiQ29uZmlnRXJyb3JcIiwgKCk9PkVmZmVjdC5mYWlsKHtcbiAgICAgICAgICAgICAgICBjb2RlOiBcIklOVkFMSURfU0VSVkVSX0NPTkZJR1wiLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIGdlbmVyYXRlIHByZXNpZ25lZCBVUkxcIlxuICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCogdXBsb2FkV2l0aG91dFByb2dyZXNzKGZpbGUsIHByZXNpZ25lZCkucGlwZShFZmZlY3QuY2F0Y2hUYWcoXCJVcGxvYWRUaGluZ0Vycm9yXCIsIChlKT0+RWZmZWN0LmZhaWwoVXBsb2FkVGhpbmdFcnJvci50b09iamVjdChlKSkpLCBFZmZlY3QuY2F0Y2hUYWcoXCJSZXNwb25zZUVycm9yXCIsIChlKT0+RWZmZWN0LmZhaWwoe1xuICAgICAgICAgICAgICAgIGNvZGU6IFwiVVBMT0FEX0ZBSUxFRFwiLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIHVwbG9hZCBmaWxlXCIsXG4gICAgICAgICAgICAgICAgZGF0YTogZS50b0pTT04oKVxuICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGtleTogcHJlc2lnbmVkLmtleSxcbiAgICAgICAgICAgIHVybDogcmVzcG9uc2UudXJsLFxuICAgICAgICAgICAgYXBwVXJsOiByZXNwb25zZS5hcHBVcmwsXG4gICAgICAgICAgICB1ZnNVcmw6IHJlc3BvbnNlLnVmc1VybCxcbiAgICAgICAgICAgIGxhc3RNb2RpZmllZDogZmlsZS5sYXN0TW9kaWZpZWQgPz8gRGF0ZS5ub3coKSxcbiAgICAgICAgICAgIG5hbWU6IGZpbGUubmFtZSxcbiAgICAgICAgICAgIHNpemU6IGZpbGUuc2l6ZSxcbiAgICAgICAgICAgIHR5cGU6IGZpbGUudHlwZSxcbiAgICAgICAgICAgIGN1c3RvbUlkOiBmaWxlLmN1c3RvbUlkID8/IG51bGwsXG4gICAgICAgICAgICBmaWxlSGFzaDogcmVzcG9uc2UuZmlsZUhhc2hcbiAgICAgICAgfTtcbiAgICB9KS5waXBlKEVmZmVjdC53aXRoTG9nU3BhbihcInVwbG9hZEZpbGVcIikpO1xuXG5jbGFzcyBVVEFwaSB7XG4gICAgY29uc3RydWN0b3Iob3B0cyl7XG4gICAgICAgIHRoaXMub3B0cyA9IG9wdHM7XG4gICAgICAgIHRoaXMucmVxdWVzdFVwbG9hZFRoaW5nID0gKHBhdGhuYW1lLCBib2R5LCByZXNwb25zZVNjaGVtYSk9PkVmZmVjdC5nZW4odGhpcywgZnVuY3Rpb24qKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgYXBpS2V5IH0gPSB5aWVsZCogVVRUb2tlbjtcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlVXJsID0geWllbGQqIEFwaVVybDtcbiAgICAgICAgICAgICAgICBjb25zdCBodHRwQ2xpZW50ID0gKHlpZWxkKiBIdHRwQ2xpZW50Lkh0dHBDbGllbnQpLnBpcGUoSHR0cENsaWVudC5maWx0ZXJTdGF0dXNPayk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHlpZWxkKiBIdHRwQ2xpZW50UmVxdWVzdC5wb3N0KHBhdGhuYW1lKS5waXBlKEh0dHBDbGllbnRSZXF1ZXN0LnByZXBlbmRVcmwoYmFzZVVybCksIEh0dHBDbGllbnRSZXF1ZXN0LmJvZHlVbnNhZmVKc29uKGJvZHkpLCBIdHRwQ2xpZW50UmVxdWVzdC5zZXRIZWFkZXJzKHtcbiAgICAgICAgICAgICAgICAgICAgXCJ4LXVwbG9hZHRoaW5nLXZlcnNpb25cIjogVVBMT0FEVEhJTkdfVkVSU0lPTixcbiAgICAgICAgICAgICAgICAgICAgXCJ4LXVwbG9hZHRoaW5nLWJlLWFkYXB0ZXJcIjogXCJzZXJ2ZXItc2RrXCIsXG4gICAgICAgICAgICAgICAgICAgIFwieC11cGxvYWR0aGluZy1hcGkta2V5XCI6IFJlZGFjdGVkLnZhbHVlKGFwaUtleSlcbiAgICAgICAgICAgICAgICB9KSwgaHR0cENsaWVudC5leGVjdXRlLCBFZmZlY3QudGFwQm90aCh7XG4gICAgICAgICAgICAgICAgICAgIG9uU3VjY2VzczogbG9nSHR0cENsaWVudFJlc3BvbnNlKFwiVXBsb2FkVGhpbmcgQVBJIFJlc3BvbnNlXCIpLFxuICAgICAgICAgICAgICAgICAgICBvbkZhaWx1cmU6IGxvZ0h0dHBDbGllbnRFcnJvcihcIkZhaWxlZCB0byByZXF1ZXN0IFVwbG9hZFRoaW5nIEFQSVwiKVxuICAgICAgICAgICAgICAgIH0pLCBFZmZlY3QuZmxhdE1hcChIdHRwQ2xpZW50UmVzcG9uc2Uuc2NoZW1hQm9keUpzb24ocmVzcG9uc2VTY2hlbWEpKSwgRWZmZWN0LnNjb3BlZCk7XG4gICAgICAgICAgICB9KS5waXBlKEVmZmVjdC5jYXRjaFRhZyhcIkNvbmZpZ0Vycm9yXCIsIChlKT0+bmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBcIklOVkFMSURfU0VSVkVSX0NPTkZJR1wiLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIlRoZXJlIHdhcyBhbiBlcnJvciB3aXRoIHRoZSBzZXJ2ZXIgY29uZmlndXJhdGlvbi4gTW9yZSBpbmZvIGNhbiBiZSBmb3VuZCBvbiB0aGlzIGVycm9yJ3MgYGNhdXNlYCBwcm9wZXJ0eVwiLFxuICAgICAgICAgICAgICAgICAgICBjYXVzZTogZVxuICAgICAgICAgICAgICAgIH0pKSwgRWZmZWN0LndpdGhMb2dTcGFuKFwidXRhcGkuI3JlcXVlc3RVcGxvYWRUaGluZ1wiKSk7XG4gICAgICAgIHRoaXMuZXhlY3V0ZUFzeW5jID0gYXN5bmMgKHByb2dyYW0sIHNpZ25hbCk9PntcbiAgICAgICAgICAgIGNvbnN0IGV4aXQgPSBhd2FpdCBwcm9ncmFtLnBpcGUoRWZmZWN0LndpdGhMb2dTcGFuKFwidXRhcGkuI2V4ZWN1dGVBc3luY1wiKSwgKGUpPT50aGlzLnJ1bnRpbWUucnVuUHJvbWlzZUV4aXQoZSwgc2lnbmFsID8ge1xuICAgICAgICAgICAgICAgICAgICBzaWduYWxcbiAgICAgICAgICAgICAgICB9IDogdW5kZWZpbmVkKSk7XG4gICAgICAgICAgICBpZiAoZXhpdC5fdGFnID09PSBcIkZhaWx1cmVcIikge1xuICAgICAgICAgICAgICAgIHRocm93IENhdXNlLnNxdWFzaChleGl0LmNhdXNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBleGl0LnZhbHVlO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLi8qKlxuICAgKiBSZXF1ZXN0IHRvIGRlbGV0ZSBmaWxlcyBmcm9tIFVwbG9hZFRoaW5nIHN0b3JhZ2UuXG4gICAqIEBwYXJhbSB7c3RyaW5nIHwgc3RyaW5nW119IGZpbGVLZXlzXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGF3YWl0IGRlbGV0ZUZpbGVzKFwiMmUwZmRiNjQtOTk1Ny00MjYyLThlNDUtZjM3MmJhOTAzYWM4X2ltYWdlLmpwZ1wiKTtcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYXdhaXQgZGVsZXRlRmlsZXMoW1wiMmUwZmRiNjQtOTk1Ny00MjYyLThlNDUtZjM3MmJhOTAzYWM4X2ltYWdlLmpwZ1wiLFwiMTY0OTM1M2ItMDRlYS00OGEyLTlkYjctMzFkZTdmNTYyYzhkX2ltYWdlMi5qcGdcIl0pXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGF3YWl0IGRlbGV0ZUZpbGVzKFwibXlDdXN0b21JZGVudGlmaWVyXCIsIHsga2V5VHlwZTogXCJjdXN0b21JZFwiIH0pXG4gICAqLyBkZWxldGVGaWxlcyA9IGFzeW5jIChrZXlzLCBvcHRzKT0+e1xuICAgICAgICAgICAgZ3VhcmRTZXJ2ZXJPbmx5KCk7XG4gICAgICAgICAgICBjb25zdCB7IGtleVR5cGUgPSB0aGlzLmRlZmF1bHRLZXlUeXBlIH0gPSBvcHRzID8/IHt9O1xuICAgICAgICAgICAgY2xhc3MgRGVsZXRlRmlsZVJlc3BvbnNlIGV4dGVuZHMgUy5DbGFzcyhcIkRlbGV0ZUZpbGVSZXNwb25zZVwiKSh7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogUy5Cb29sZWFuLFxuICAgICAgICAgICAgICAgIGRlbGV0ZWRDb3VudDogUy5OdW1iZXJcbiAgICAgICAgICAgIH0pIHtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmV4ZWN1dGVBc3luYyh0aGlzLnJlcXVlc3RVcGxvYWRUaGluZyhcIi92Ni9kZWxldGVGaWxlc1wiLCBrZXlUeXBlID09PSBcImZpbGVLZXlcIiA/IHtcbiAgICAgICAgICAgICAgICBmaWxlS2V5czogQXJyLmVuc3VyZShrZXlzKVxuICAgICAgICAgICAgfSA6IHtcbiAgICAgICAgICAgICAgICBjdXN0b21JZHM6IEFyci5lbnN1cmUoa2V5cylcbiAgICAgICAgICAgIH0sIERlbGV0ZUZpbGVSZXNwb25zZSkucGlwZShFZmZlY3Qud2l0aExvZ1NwYW4oXCJkZWxldGVGaWxlc1wiKSkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLi8qKlxuICAgKiBSZXF1ZXN0IGZpbGUgVVJMcyBmcm9tIFVwbG9hZFRoaW5nIHN0b3JhZ2UuXG4gICAqIEBwYXJhbSB7c3RyaW5nIHwgc3RyaW5nW119IGZpbGVLZXlzXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXRGaWxlVXJscyhcIjJlMGZkYjY0LTk5NTctNDI2Mi04ZTQ1LWYzNzJiYTkwM2FjOF9pbWFnZS5qcGdcIik7XG4gICAqIGNvbnNvbGUubG9nKGRhdGEpOyAvLyBbe2tleTogXCIyZTBmZGI2NC05OTU3LTQyNjItOGU0NS1mMzcyYmE5MDNhYzhfaW1hZ2UuanBnXCIsIHVybDogXCJodHRwczovL3VwbG9hZHRoaW5nLmNvbS9mLzJlMGZkYjY0LTk5NTctNDI2Mi04ZTQ1LWYzNzJiYTkwM2FjOF9pbWFnZS5qcGdcIn1dXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXRGaWxlVXJscyhbXCIyZTBmZGI2NC05OTU3LTQyNjItOGU0NS1mMzcyYmE5MDNhYzhfaW1hZ2UuanBnXCIsXCIxNjQ5MzUzYi0wNGVhLTQ4YTItOWRiNy0zMWRlN2Y1NjJjOGRfaW1hZ2UyLmpwZ1wiXSlcbiAgICogY29uc29sZS5sb2coZGF0YSkgLy8gW3trZXk6IFwiMmUwZmRiNjQtOTk1Ny00MjYyLThlNDUtZjM3MmJhOTAzYWM4X2ltYWdlLmpwZ1wiLCB1cmw6IFwiaHR0cHM6Ly91cGxvYWR0aGluZy5jb20vZi8yZTBmZGI2NC05OTU3LTQyNjItOGU0NS1mMzcyYmE5MDNhYzhfaW1hZ2UuanBnXCIgfSx7a2V5OiBcIjE2NDkzNTNiLTA0ZWEtNDhhMi05ZGI3LTMxZGU3ZjU2MmM4ZF9pbWFnZTIuanBnXCIsIHVybDogXCJodHRwczovL3VwbG9hZHRoaW5nLmNvbS9mLzE2NDkzNTNiLTA0ZWEtNDhhMi05ZGI3LTMxZGU3ZjU2MmM4ZF9pbWFnZTIuanBnXCJ9XVxuICAgKlxuICAgKiBAZGVwcmVjYXRlZCAtIFNlZSBodHRwczovL2RvY3MudXBsb2FkdGhpbmcuY29tL3dvcmtpbmctd2l0aC1maWxlcyNhY2Nlc3NpbmctZmlsZXMgZm9yIGluZm8gaG93IHRvIGFjY2VzcyBmaWxlc1xuICAgKi8gZ2V0RmlsZVVybHMgPSBhc3luYyAoa2V5cywgb3B0cyk9PntcbiAgICAgICAgICAgIGd1YXJkU2VydmVyT25seSgpO1xuICAgICAgICAgICAgY29uc3QgeyBrZXlUeXBlID0gdGhpcy5kZWZhdWx0S2V5VHlwZSB9ID0gb3B0cyA/PyB7fTtcbiAgICAgICAgICAgIGNsYXNzIEdldEZpbGVVcmxSZXNwb25zZSBleHRlbmRzIFMuQ2xhc3MoXCJHZXRGaWxlVXJsUmVzcG9uc2VcIikoe1xuICAgICAgICAgICAgICAgIGRhdGE6IFMuQXJyYXkoUy5TdHJ1Y3Qoe1xuICAgICAgICAgICAgICAgICAgICBrZXk6IFMuU3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICB1cmw6IFMuU3RyaW5nXG4gICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICB9KSB7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5leGVjdXRlQXN5bmModGhpcy5yZXF1ZXN0VXBsb2FkVGhpbmcoXCIvdjYvZ2V0RmlsZVVybFwiLCBrZXlUeXBlID09PSBcImZpbGVLZXlcIiA/IHtcbiAgICAgICAgICAgICAgICBmaWxlS2V5czogQXJyLmVuc3VyZShrZXlzKVxuICAgICAgICAgICAgfSA6IHtcbiAgICAgICAgICAgICAgICBjdXN0b21JZHM6IEFyci5lbnN1cmUoa2V5cylcbiAgICAgICAgICAgIH0sIEdldEZpbGVVcmxSZXNwb25zZSkucGlwZShFZmZlY3Qud2l0aExvZ1NwYW4oXCJnZXRGaWxlVXJsc1wiKSkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLi8qKlxuICAgKiBSZXF1ZXN0IGZpbGUgbGlzdCBmcm9tIFVwbG9hZFRoaW5nIHN0b3JhZ2UuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRzXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvcHRzLmxpbWl0IFRoZSBtYXhpbXVtIG51bWJlciBvZiBmaWxlcyB0byByZXR1cm5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG9wdHMub2Zmc2V0IFRoZSBudW1iZXIgb2YgZmlsZXMgdG8gc2tpcFxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBjb25zdCBkYXRhID0gYXdhaXQgbGlzdEZpbGVzKHsgbGltaXQ6IDEgfSk7XG4gICAqIGNvbnNvbGUubG9nKGRhdGEpOyAvLyB7IGtleTogXCIyZTBmZGI2NC05OTU3LTQyNjItOGU0NS1mMzcyYmE5MDNhYzhfaW1hZ2UuanBnXCIsIGlkOiBcIjJlMGZkYjY0LTk5NTctNDI2Mi04ZTQ1LWYzNzJiYTkwM2FjOFwiIH1cbiAgICovIGxpc3RGaWxlcyA9IGFzeW5jIChvcHRzKT0+e1xuICAgICAgICAgICAgZ3VhcmRTZXJ2ZXJPbmx5KCk7XG4gICAgICAgICAgICBjbGFzcyBMaXN0RmlsZVJlc3BvbnNlIGV4dGVuZHMgUy5DbGFzcyhcIkxpc3RGaWxlUmVzcG9uc2VcIikoe1xuICAgICAgICAgICAgICAgIGhhc01vcmU6IFMuQm9vbGVhbixcbiAgICAgICAgICAgICAgICBmaWxlczogUy5BcnJheShTLlN0cnVjdCh7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBTLlN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgY3VzdG9tSWQ6IFMuTnVsbE9yKFMuU3RyaW5nKSxcbiAgICAgICAgICAgICAgICAgICAga2V5OiBTLlN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogUy5TdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgIHNpemU6IFMuTnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFMuTGl0ZXJhbChcIkRlbGV0aW9uIFBlbmRpbmdcIiwgXCJGYWlsZWRcIiwgXCJVcGxvYWRlZFwiLCBcIlVwbG9hZGluZ1wiKSxcbiAgICAgICAgICAgICAgICAgICAgdXBsb2FkZWRBdDogUy5OdW1iZXJcbiAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgIH0pIHtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmV4ZWN1dGVBc3luYyh0aGlzLnJlcXVlc3RVcGxvYWRUaGluZyhcIi92Ni9saXN0RmlsZXNcIiwge1xuICAgICAgICAgICAgICAgIC4uLm9wdHNcbiAgICAgICAgICAgIH0sIExpc3RGaWxlUmVzcG9uc2UpLnBpcGUoRWZmZWN0LndpdGhMb2dTcGFuKFwibGlzdEZpbGVzXCIpKSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucmVuYW1lRmlsZXMgPSBhc3luYyAodXBkYXRlcyk9PntcbiAgICAgICAgICAgIGd1YXJkU2VydmVyT25seSgpO1xuICAgICAgICAgICAgY2xhc3MgUmVuYW1lRmlsZVJlc3BvbnNlIGV4dGVuZHMgUy5DbGFzcyhcIlJlbmFtZUZpbGVSZXNwb25zZVwiKSh7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogUy5Cb29sZWFuXG4gICAgICAgICAgICB9KSB7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5leGVjdXRlQXN5bmModGhpcy5yZXF1ZXN0VXBsb2FkVGhpbmcoXCIvdjYvcmVuYW1lRmlsZXNcIiwge1xuICAgICAgICAgICAgICAgIHVwZGF0ZXM6IEFyci5lbnN1cmUodXBkYXRlcylcbiAgICAgICAgICAgIH0sIFJlbmFtZUZpbGVSZXNwb25zZSkucGlwZShFZmZlY3Qud2l0aExvZ1NwYW4oXCJyZW5hbWVGaWxlc1wiKSkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmdldFVzYWdlSW5mbyA9IGFzeW5jICgpPT57XG4gICAgICAgICAgICBndWFyZFNlcnZlck9ubHkoKTtcbiAgICAgICAgICAgIGNsYXNzIEdldFVzYWdlSW5mb1Jlc3BvbnNlIGV4dGVuZHMgUy5DbGFzcyhcIkdldFVzYWdlSW5mb1Jlc3BvbnNlXCIpKHtcbiAgICAgICAgICAgICAgICB0b3RhbEJ5dGVzOiBTLk51bWJlcixcbiAgICAgICAgICAgICAgICBhcHBUb3RhbEJ5dGVzOiBTLk51bWJlcixcbiAgICAgICAgICAgICAgICBmaWxlc1VwbG9hZGVkOiBTLk51bWJlcixcbiAgICAgICAgICAgICAgICBsaW1pdEJ5dGVzOiBTLk51bWJlclxuICAgICAgICAgICAgfSkge1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZXhlY3V0ZUFzeW5jKHRoaXMucmVxdWVzdFVwbG9hZFRoaW5nKFwiL3Y2L2dldFVzYWdlSW5mb1wiLCB7fSwgR2V0VXNhZ2VJbmZvUmVzcG9uc2UpLnBpcGUoRWZmZWN0LndpdGhMb2dTcGFuKFwiZ2V0VXNhZ2VJbmZvXCIpKSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuLyoqXG4gICAqIEdlbmVyYXRlIGEgcHJlc2lnbmVkIHVybCBmb3IgYSBwcml2YXRlIGZpbGVcbiAgICogVW5saWtlIHtAbGluayBnZXRTaWduZWRVUkx9LCB0aGlzIG1ldGhvZCBkb2VzIG5vdCBtYWtlIGEgZmV0Y2ggcmVxdWVzdCB0byB0aGUgVXBsb2FkVGhpbmcgQVBJXG4gICAqIGFuZCBpcyB0aGUgcmVjb21tZW5kZWQgd2F5IHRvIGdlbmVyYXRlIGEgcHJlc2lnbmVkIHVybCBmb3IgYSBwcml2YXRlIGZpbGUuXG4gICAqKi8gZ2VuZXJhdGVTaWduZWRVUkwgPSBhc3luYyAoa2V5LCBvcHRzKT0+e1xuICAgICAgICAgICAgZ3VhcmRTZXJ2ZXJPbmx5KCk7XG4gICAgICAgICAgICBjb25zdCBleHBpcmVzSW4gPSBwYXJzZVRpbWVUb1NlY29uZHMob3B0cz8uZXhwaXJlc0luID8/IFwiNSBtaW51dGVzXCIpO1xuICAgICAgICAgICAgaWYgKG9wdHM/LmV4cGlyZXNJbiAmJiBpc05hTihleHBpcmVzSW4pKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiZXhwaXJlc0luIG11c3QgYmUgYSB2YWxpZCB0aW1lIHN0cmluZywgZm9yIGV4YW1wbGUgJzFkJywgJzIgZGF5cycsIG9yIGEgbnVtYmVyIG9mIHNlY29uZHMuXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChleHBpcmVzSW4gPiA4NjQwMCAqIDcpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJleHBpcmVzSW4gbXVzdCBiZSBsZXNzIHRoYW4gNyBkYXlzICg2MDQ4MDAgc2Vjb25kcykuXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHByb2dyYW0gPSBFZmZlY3QuZ2VuKGZ1bmN0aW9uKigpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGFwaUtleSwgYXBwSWQgfSA9IHlpZWxkKiBVVFRva2VuO1xuICAgICAgICAgICAgICAgIGNvbnN0IHVmc0hvc3QgPSB5aWVsZCogVWZzSG9zdDtcbiAgICAgICAgICAgICAgICBjb25zdCBwcm90byA9IHVmc0hvc3QuaW5jbHVkZXMoXCJsb2NhbFwiKSA/IFwiaHR0cFwiIDogXCJodHRwc1wiO1xuICAgICAgICAgICAgICAgIGNvbnN0IHVmc1VybCA9IHlpZWxkKiBnZW5lcmF0ZVNpZ25lZFVSTChgJHtwcm90b306Ly8ke2FwcElkfS4ke3Vmc0hvc3R9L2YvJHtrZXl9YCwgYXBpS2V5LCB7XG4gICAgICAgICAgICAgICAgICAgIHR0bEluU2Vjb25kczogZXhwaXJlc0luXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdWZzVXJsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZXhlY3V0ZUFzeW5jKHByb2dyYW0ucGlwZShFZmZlY3QuY2F0Y2hUYWcoXCJDb25maWdFcnJvclwiLCAoZSk9Pm5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogXCJJTlZBTElEX1NFUlZFUl9DT05GSUdcIixcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJUaGVyZSB3YXMgYW4gZXJyb3Igd2l0aCB0aGUgc2VydmVyIGNvbmZpZ3VyYXRpb24uIE1vcmUgaW5mbyBjYW4gYmUgZm91bmQgb24gdGhpcyBlcnJvcidzIGBjYXVzZWAgcHJvcGVydHlcIixcbiAgICAgICAgICAgICAgICAgICAgY2F1c2U6IGVcbiAgICAgICAgICAgICAgICB9KSksIEVmZmVjdC53aXRoTG9nU3BhbihcImdlbmVyYXRlU2lnbmVkVVJMXCIpKSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuLyoqXG4gICAqIFJlcXVlc3QgYSBwcmVzaWduZWQgdXJsIGZvciBhIHByaXZhdGUgZmlsZShzKVxuICAgKiBAcmVtYXJrcyBUaGlzIG1ldGhvZCBpcyBubyBsb25nZXIgcmVjb21tZW5kZWQgYXMgaXQgbWFrZXMgYSBmZXRjaFxuICAgKiByZXF1ZXN0IHRvIHRoZSBVcGxvYWRUaGluZyBBUEkgd2hpY2ggaW5jdXJzIHJlZHVuZGFudCBsYXRlbmN5LiBJdFxuICAgKiB3aWxsIGJlIGRlcHJlY2F0ZWQgaW4gVXBsb2FkVGhpbmcgdjggYW5kIHJlbW92ZWQgaW4gVXBsb2FkVGhpbmcgdjkuXG4gICAqXG4gICAqIEBzZWUge0BsaW5rIGdlbmVyYXRlU2lnbmVkVVJMfSBmb3IgYSBtb3JlIGVmZmljaWVudCB3YXkgdG8gZ2VuZXJhdGUgYSBwcmVzaWduZWQgdXJsXG4gICAqKi8gZ2V0U2lnbmVkVVJMID0gYXN5bmMgKGtleSwgb3B0cyk9PntcbiAgICAgICAgICAgIGd1YXJkU2VydmVyT25seSgpO1xuICAgICAgICAgICAgY29uc3QgZXhwaXJlc0luID0gb3B0cz8uZXhwaXJlc0luID8gcGFyc2VUaW1lVG9TZWNvbmRzKG9wdHMuZXhwaXJlc0luKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGNvbnN0IHsga2V5VHlwZSA9IHRoaXMuZGVmYXVsdEtleVR5cGUgfSA9IG9wdHMgPz8ge307XG4gICAgICAgICAgICBpZiAob3B0cz8uZXhwaXJlc0luICYmIGlzTmFOKGV4cGlyZXNJbikpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJleHBpcmVzSW4gbXVzdCBiZSBhIHZhbGlkIHRpbWUgc3RyaW5nLCBmb3IgZXhhbXBsZSAnMWQnLCAnMiBkYXlzJywgb3IgYSBudW1iZXIgb2Ygc2Vjb25kcy5cIlxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGV4cGlyZXNJbiAmJiBleHBpcmVzSW4gPiA4NjQwMCAqIDcpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJleHBpcmVzSW4gbXVzdCBiZSBsZXNzIHRoYW4gNyBkYXlzICg2MDQ4MDAgc2Vjb25kcykuXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNsYXNzIEdldFNpZ25lZFVybFJlc3BvbnNlIGV4dGVuZHMgUy5DbGFzcyhcIkdldFNpZ25lZFVybFJlc3BvbnNlXCIpKHtcbiAgICAgICAgICAgICAgICB1cmw6IFMuU3RyaW5nLFxuICAgICAgICAgICAgICAgIHVmc1VybDogUy5TdHJpbmdcbiAgICAgICAgICAgIH0pIHtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmV4ZWN1dGVBc3luYyh0aGlzLnJlcXVlc3RVcGxvYWRUaGluZyhcIi92Ni9yZXF1ZXN0RmlsZUFjY2Vzc1wiLCBrZXlUeXBlID09PSBcImZpbGVLZXlcIiA/IHtcbiAgICAgICAgICAgICAgICBmaWxlS2V5OiBrZXksXG4gICAgICAgICAgICAgICAgZXhwaXJlc0luXG4gICAgICAgICAgICB9IDoge1xuICAgICAgICAgICAgICAgIGN1c3RvbUlkOiBrZXksXG4gICAgICAgICAgICAgICAgZXhwaXJlc0luXG4gICAgICAgICAgICB9LCBHZXRTaWduZWRVcmxSZXNwb25zZSkucGlwZShFZmZlY3Qud2l0aExvZ1NwYW4oXCJnZXRTaWduZWRVUkxcIikpKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy4vKipcbiAgICogVXBkYXRlIHRoZSBBQ0wgb2YgYSBmaWxlIG9yIHNldCBvZiBmaWxlcy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogLy8gTWFrZSBhIHNpbmdsZSBmaWxlIHB1YmxpY1xuICAgKiBhd2FpdCB1dGFwaS51cGRhdGVBQ0woXCIyZTBmZGI2NC05OTU3LTQyNjItOGU0NS1mMzcyYmE5MDNhYzhfaW1hZ2UuanBnXCIsIFwicHVibGljLXJlYWRcIik7XG4gICAqXG4gICAqIC8vIE1ha2UgbXVsdGlwbGUgZmlsZXMgcHJpdmF0ZVxuICAgKiBhd2FpdCB1dGFwaS51cGRhdGVBQ0woXG4gICAqICAgW1xuICAgKiAgICAgXCIyZTBmZGI2NC05OTU3LTQyNjItOGU0NS1mMzcyYmE5MDNhYzhfaW1hZ2UuanBnXCIsXG4gICAqICAgICBcIjE2NDkzNTNiLTA0ZWEtNDhhMi05ZGI3LTMxZGU3ZjU2MmM4ZF9pbWFnZTIuanBnXCIsXG4gICAqICAgXSxcbiAgICogICBcInByaXZhdGVcIixcbiAgICogKTtcbiAgICovIHVwZGF0ZUFDTCA9IGFzeW5jIChrZXlzLCBhY2wsIG9wdHMpPT57XG4gICAgICAgICAgICBndWFyZFNlcnZlck9ubHkoKTtcbiAgICAgICAgICAgIGNvbnN0IHsga2V5VHlwZSA9IHRoaXMuZGVmYXVsdEtleVR5cGUgfSA9IG9wdHMgPz8ge307XG4gICAgICAgICAgICBjb25zdCB1cGRhdGVzID0gQXJyLmVuc3VyZShrZXlzKS5tYXAoKGtleSk9PntcbiAgICAgICAgICAgICAgICByZXR1cm4ga2V5VHlwZSA9PT0gXCJmaWxlS2V5XCIgPyB7XG4gICAgICAgICAgICAgICAgICAgIGZpbGVLZXk6IGtleSxcbiAgICAgICAgICAgICAgICAgICAgYWNsXG4gICAgICAgICAgICAgICAgfSA6IHtcbiAgICAgICAgICAgICAgICAgICAgY3VzdG9tSWQ6IGtleSxcbiAgICAgICAgICAgICAgICAgICAgYWNsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VTY2hlbWEgPSBTLlN0cnVjdCh7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogUy5Cb29sZWFuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmV4ZWN1dGVBc3luYyh0aGlzLnJlcXVlc3RVcGxvYWRUaGluZyhcIi92Ni91cGRhdGVBQ0xcIiwge1xuICAgICAgICAgICAgICAgIHVwZGF0ZXNcbiAgICAgICAgICAgIH0sIHJlc3BvbnNlU2NoZW1hKS5waXBlKEVmZmVjdC53aXRoTG9nU3BhbihcInVwZGF0ZUFDTFwiKSkpO1xuICAgICAgICB9O1xuICAgICAgICAvLyBBc3NlcnQgc29tZSBzdHVmZlxuICAgICAgICBndWFyZFNlcnZlck9ubHkoKTtcbiAgICAgICAgdGhpcy5mZXRjaCA9IG9wdHM/LmZldGNoID8/IGdsb2JhbFRoaXMuZmV0Y2g7XG4gICAgICAgIHRoaXMuZGVmYXVsdEtleVR5cGUgPSBvcHRzPy5kZWZhdWx0S2V5VHlwZSA/PyBcImZpbGVLZXlcIjtcbiAgICAgICAgdGhpcy5ydW50aW1lID0gbWFrZVJ1bnRpbWUodGhpcy5mZXRjaCwgdGhpcy5vcHRzKTtcbiAgICB9XG4gICAgdXBsb2FkRmlsZXMoZmlsZXMsIG9wdHMpIHtcbiAgICAgICAgZ3VhcmRTZXJ2ZXJPbmx5KCk7XG4gICAgICAgIGNvbnN0IHByb2dyYW0gPSBFZmZlY3QuZm9yRWFjaChBcnIuZW5zdXJlKGZpbGVzKSwgKGZpbGUpPT51cGxvYWRGaWxlKGZpbGUsIG9wdHMgPz8ge30pLnBpcGUoRWZmZWN0Lm1hdGNoKHtcbiAgICAgICAgICAgICAgICBvblN1Y2Nlc3M6IChkYXRhKT0+KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogbnVsbFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBvbkZhaWx1cmU6IChlcnJvcik9Pih7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pKSkucGlwZShFZmZlY3QubWFwKCh1cHMpPT5BcnJheS5pc0FycmF5KGZpbGVzKSA/IHVwcyA6IHVwc1swXSksIEVmZmVjdC50YXAoKHJlcyk9PkVmZmVjdC5sb2dEZWJ1ZyhcIkZpbmlzaGVkIHVwbG9hZGluZ1wiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJ1cGxvYWRSZXN1bHRcIiwgcmVzKSkpLCBFZmZlY3Qud2l0aExvZ1NwYW4oXCJ1cGxvYWRGaWxlc1wiKSk7XG4gICAgICAgIHJldHVybiB0aGlzLmV4ZWN1dGVBc3luYyhwcm9ncmFtLCBvcHRzPy5zaWduYWwpO1xuICAgIH1cbiAgICB1cGxvYWRGaWxlc0Zyb21VcmwodXJscywgb3B0cykge1xuICAgICAgICBndWFyZFNlcnZlck9ubHkoKTtcbiAgICAgICAgY29uc3QgcHJvZ3JhbSA9IEVmZmVjdC5mb3JFYWNoKEFyci5lbnN1cmUodXJscyksICh1cmwpPT5kb3dubG9hZEZpbGUodXJsKS5waXBlKEVmZmVjdC5mbGF0TWFwKChmaWxlKT0+dXBsb2FkRmlsZShmaWxlLCBvcHRzID8/IHt9KSksIEVmZmVjdC5tYXRjaCh7XG4gICAgICAgICAgICAgICAgb25TdWNjZXNzOiAoZGF0YSk9Pih7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgb25GYWlsdXJlOiAoZXJyb3IpPT4oe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KSkpLnBpcGUoRWZmZWN0Lm1hcCgodXBzKT0+QXJyYXkuaXNBcnJheSh1cmxzKSA/IHVwcyA6IHVwc1swXSksIEVmZmVjdC50YXAoKHJlcyk9PkVmZmVjdC5sb2dEZWJ1ZyhcIkZpbmlzaGVkIHVwbG9hZGluZ1wiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJ1cGxvYWRSZXN1bHRcIiwgcmVzKSkpLCBFZmZlY3Qud2l0aExvZ1NwYW4oXCJ1cGxvYWRGaWxlc1wiKSkucGlwZShFZmZlY3Qud2l0aExvZ1NwYW4oXCJ1cGxvYWRGaWxlc0Zyb21VcmxcIikpO1xuICAgICAgICByZXR1cm4gdGhpcy5leGVjdXRlQXN5bmMocHJvZ3JhbSwgb3B0cz8uc2lnbmFsKTtcbiAgICB9XG59XG5cbmNvbnN0IGNyZWF0ZVVwbG9hZHRoaW5nID0gKG9wdHMpPT5jcmVhdGVCdWlsZGVyKG9wdHMpO1xuY29uc3QgY3JlYXRlUm91dGVIYW5kbGVyID0gKG9wdHMpPT57XG4gICAgcmV0dXJuIG1ha2VBZGFwdGVySGFuZGxlcigoZXYpPT5FZmZlY3Quc3VjY2VlZCh7XG4gICAgICAgICAgICByZXE6IFwicmVxdWVzdFwiIGluIGV2ID8gZXYucmVxdWVzdCA6IGV2XG4gICAgICAgIH0pLCAoZXYpPT5FZmZlY3Quc3VjY2VlZChcInJlcXVlc3RcIiBpbiBldiA/IGV2LnJlcXVlc3QgOiBldiksIG9wdHMsIFwic2VydmVyXCIpO1xufTtcbmNvbnN0IGV4dHJhY3RSb3V0ZXJDb25maWcgPSAocm91dGVyKT0+RWZmZWN0LnJ1blN5bmMoZXh0cmFjdFJvdXRlckNvbmZpZyQxKHJvdXRlcikpO1xuXG5leHBvcnQgeyBVVEFwaSwgVVRGaWxlLCBjcmVhdGVSb3V0ZUhhbmRsZXIsIGNyZWF0ZVVwbG9hZHRoaW5nLCBleHRyYWN0Um91dGVyQ29uZmlnIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/server/index.js\n");

/***/ })

};
;